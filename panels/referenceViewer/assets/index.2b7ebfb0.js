var di=Object.defineProperty;var fi=(e,t,r)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $e=(e,t,r)=>(fi(e,typeof t!="symbol"?t+"":t,r),r),xt=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var A=(e,t,r)=>(xt(e,t,"read from private field"),r?r.call(e):t.get(e)),te=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ye=(e,t,r,n)=>(xt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ct=(e,t,r,n)=>({set _(a){ye(e,t,a,r)},get _(){return A(e,t,n)}}),oe=(e,t,r)=>(xt(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const v of m.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&n(v)}).observe(document,{childList:!0,subtree:!0});function r(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerpolicy&&(m.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?m.credentials="include":a.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function n(a){if(a.ep)return;a.ep=!0;const m=r(a);fetch(a.href,m)}})();function makeMap(e,t){const r=Object.create(null),n=e.split(",");for(let a=0;a<n.length;a++)r[n[a]]=!0;return t?a=>!!r[a.toLowerCase()]:a=>!!r[a]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function normalizeStyle(e){if(isArray(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],a=isString(n)?parseStringStyle(n):normalizeStyle(n);if(a)for(const m in a)t[m]=a[m]}return t}else{if(isString(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(e){const t={};return e.split(listDelimiterRE).forEach(r=>{if(r){const n=r.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray(e))for(let r=0;r<e.length;r++){const n=normalizeClass(e[r]);n&&(t+=n+" ")}else if(isObject(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const toDisplayString=e=>isString(e)?e:e==null?"":isArray(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,a])=>(r[`${n} =>`]=a,r),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject(t)&&!isArray(t)&&!isPlainObject(t)?String(t):t,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},def=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},toNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(t){if(this.active){const r=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const a=t[n];wasTracked(a)&&!newTracked(a)?a.delete(e):t[r++]=a,a.w&=~trackOpBit,a.n&=~trackOpBit}t.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let t=activeEffect,r=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,r){if(shouldTrack&&activeEffect){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let a=n.get(r);a||n.set(r,a=createDep()),trackEffects(a)}}function trackEffects(e,t){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,r,n,a,m){const v=targetMap.get(e);if(!v)return;let _=[];if(t==="clear")_=[...v.values()];else if(r==="length"&&isArray(e))v.forEach((w,u)=>{(u==="length"||u>=n)&&_.push(w)});else switch(r!==void 0&&_.push(v.get(r)),t){case"add":isArray(e)?isIntegerKey(r)&&_.push(v.get("length")):(_.push(v.get(ITERATE_KEY)),isMap(e)&&_.push(v.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(e)||(_.push(v.get(ITERATE_KEY)),isMap(e)&&_.push(v.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&_.push(v.get(ITERATE_KEY));break}if(_.length===1)_[0]&&triggerEffects(_[0]);else{const w=[];for(const u of _)u&&w.push(...u);triggerEffects(createDep(w))}}function triggerEffects(e,t){const r=isArray(e)?e:[...e];for(const n of r)n.computed&&triggerEffect(n);for(const n of r)n.computed||triggerEffect(n)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=toRaw(this);for(let m=0,v=this.length;m<v;m++)track(n,"get",m+"");const a=n[t](...r);return a===-1||a===!1?n[t](...r.map(toRaw)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){pauseTracking();const n=toRaw(this)[t].apply(this,r);return resetTracking(),n}}),e}function createGetter(e=!1,t=!1){return function(n,a,m){if(a==="__v_isReactive")return!e;if(a==="__v_isReadonly")return e;if(a==="__v_isShallow")return t;if(a==="__v_raw"&&m===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(n))return n;const v=isArray(n);if(!e&&v&&hasOwn(arrayInstrumentations,a))return Reflect.get(arrayInstrumentations,a,m);const _=Reflect.get(n,a,m);return(isSymbol(a)?builtInSymbols.has(a):isNonTrackableKeys(a))||(e||track(n,"get",a),t)?_:isRef(_)?v&&isIntegerKey(a)?_:_.value:isObject(_)?e?readonly(_):reactive(_):_}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(r,n,a,m){let v=r[n];if(isReadonly(v)&&isRef(v)&&!isRef(a))return!1;if(!e&&!isReadonly(a)&&(isShallow(a)||(a=toRaw(a),v=toRaw(v)),!isArray(r)&&isRef(v)&&!isRef(a)))return v.value=a,!0;const _=isArray(r)&&isIntegerKey(n)?Number(n)<r.length:hasOwn(r,n),w=Reflect.set(r,n,a,m);return r===toRaw(m)&&(_?hasChanged(a,v)&&trigger(r,"set",n,a):trigger(r,"add",n,a)),w}}function deleteProperty(e,t){const r=hasOwn(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&trigger(e,"delete",t,void 0),n}function has(e,t){const r=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),r}function ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$1(e,t,r=!1,n=!1){e=e.__v_raw;const a=toRaw(e),m=toRaw(t);r||(t!==m&&track(a,"get",t),track(a,"get",m));const{has:v}=getProto(a),_=n?toShallow:r?toReadonly:toReactive;if(v.call(a,t))return _(e.get(t));if(v.call(a,m))return _(e.get(m));e!==a&&e.get(t)}function has$1(e,t=!1){const r=this.__v_raw,n=toRaw(r),a=toRaw(e);return t||(e!==a&&track(n,"has",e),track(n,"has",a)),e===a?r.has(e):r.has(e)||r.has(a)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set$1(e,t){t=toRaw(t);const r=toRaw(this),{has:n,get:a}=getProto(r);let m=n.call(r,e);m||(e=toRaw(e),m=n.call(r,e));const v=a.call(r,e);return r.set(e,t),m?hasChanged(t,v)&&trigger(r,"set",e,t):trigger(r,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:r,get:n}=getProto(t);let a=r.call(t,e);a||(e=toRaw(e),a=r.call(t,e)),n&&n.call(t,e);const m=t.delete(e);return a&&trigger(t,"delete",e,void 0),m}function clear(){const e=toRaw(this),t=e.size!==0,r=e.clear();return t&&trigger(e,"clear",void 0,void 0),r}function createForEach(e,t){return function(n,a){const m=this,v=m.__v_raw,_=toRaw(v),w=t?toShallow:e?toReadonly:toReactive;return!e&&track(_,"iterate",ITERATE_KEY),v.forEach((u,c)=>n.call(a,w(u),w(c),m))}}function createIterableMethod(e,t,r){return function(...n){const a=this.__v_raw,m=toRaw(a),v=isMap(m),_=e==="entries"||e===Symbol.iterator&&v,w=e==="keys"&&v,u=a[e](...n),c=r?toShallow:t?toReadonly:toReactive;return!t&&track(m,"iterate",w?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:O,done:k}=u.next();return k?{value:O,done:k}:{value:_?[c(O[0]),c(O[1])]:c(O),done:k}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(m){return get$1(this,m)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(m){return get$1(this,m,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(m){return get$1(this,m,!0)},get size(){return size(this,!0)},has(m){return has$1.call(this,m,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(m){return get$1(this,m,!0,!0)},get size(){return size(this,!0)},has(m){return has$1.call(this,m,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{e[m]=createIterableMethod(m,!1,!1),r[m]=createIterableMethod(m,!0,!1),t[m]=createIterableMethod(m,!1,!0),n[m]=createIterableMethod(m,!0,!0)}),[e,r,t,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const r=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(n,a,m)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?n:Reflect.get(hasOwn(r,a)&&a in n?r:n,a,m)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,r,n,a){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const m=a.get(e);if(m)return m;const v=getTargetType(e);if(v===0)return e;const _=new Proxy(e,v===2?n:r);return a.set(e,_),_}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e),e.dep&&triggerEffects(e.dep)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:toRaw(t),this._value=r?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){t=this.__v_isShallow?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,r)=>unref(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const a=e[t];return isRef(a)&&!isRef(r)?(a.value=r,!0):Reflect.set(e,t,r,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,r,n,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=n}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,r=!1){let n,a;const m=isFunction(e);return m?(n=e,a=NOOP):(n=e.get,a=e.set),new ComputedRefImpl(n,a,m||!a,r)}function callWithErrorHandling(e,t,r,n){let a;try{a=n?e(...n):e()}catch(m){handleError(m,t,r)}return a}function callWithAsyncErrorHandling(e,t,r,n){if(isFunction(e)){const m=callWithErrorHandling(e,t,r,n);return m&&isPromise(m)&&m.catch(v=>{handleError(v,t,r)}),m}const a=[];for(let m=0;m<e.length;m++)a.push(callWithAsyncErrorHandling(e[m],t,r,n));return a}function handleError(e,t,r,n=!0){const a=t?t.vnode:null;if(t){let m=t.parent;const v=t.proxy,_=r;for(;m;){const u=m.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,v,_)===!1)return}m=m.parent}const w=t.appContext.config.errorHandler;if(w){callWithErrorHandling(w,null,10,[e,v,_]);return}}logError(e,r,a,n)}function logError(e,t,r,n=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,r=queue.length;for(;t<r;){const n=t+r>>>1;getId(queue[n])<e?t=n+1:r=n}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&e!==currentPreFlushParentJob&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queueCb(e,t,r,n){isArray(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),queueFlush()}function queuePreFlushCb(e){queueCb(e,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(e){queueCb(e,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(e,t=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=t,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(e,t)}}function flushPostFlushCbs(e){if(flushPreFlushCbs(),pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((r,n)=>getId(r)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id;function flushJobs(e){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(e),queue.sort((r,n)=>getId(r)-getId(n));const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(e)}}function emit$1(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let a=r;const m=t.startsWith("update:"),v=m&&t.slice(7);if(v&&v in n){const c=`${v==="modelValue"?"model":v}Modifiers`,{number:O,trim:k}=n[c]||EMPTY_OBJ;k&&(a=r.map(T=>T.trim())),O&&(a=r.map(toNumber))}let _,w=n[_=toHandlerKey(t)]||n[_=toHandlerKey(camelize(t))];!w&&m&&(w=n[_=toHandlerKey(hyphenate(t))]),w&&callWithAsyncErrorHandling(w,e,6,a);const u=n[_+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[_])return;e.emitted[_]=!0,callWithAsyncErrorHandling(u,e,6,a)}}function normalizeEmitsOptions(e,t,r=!1){const n=t.emitsCache,a=n.get(e);if(a!==void 0)return a;const m=e.emits;let v={},_=!1;if(!isFunction(e)){const w=u=>{const c=normalizeEmitsOptions(u,t,!0);c&&(_=!0,extend(v,c))};!r&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}return!m&&!_?(n.set(e,null),null):(isArray(m)?m.forEach(w=>v[w]=null):extend(v,m),n.set(e,v),v)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,r){if(!t||e._n)return e;const n=(...a)=>{n._d&&setBlockTracking(-1);const m=setCurrentRenderingInstance(t),v=e(...a);return setCurrentRenderingInstance(m),n._d&&setBlockTracking(1),v};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:r,proxy:n,withProxy:a,props:m,propsOptions:[v],slots:_,attrs:w,emit:u,render:c,renderCache:O,data:k,setupState:T,ctx:l,inheritAttrs:d}=e;let b,C;const y=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const S=a||n;b=normalizeVNode(c.call(S,S,O,m,T,k,l)),C=w}else{const S=t;b=normalizeVNode(S.length>1?S(m,{attrs:w,slots:_,emit:u}):S(m,null)),C=t.props?w:getFunctionalFallthrough(w)}}catch(S){blockStack.length=0,handleError(S,e,1),b=createVNode(Comment)}let g=b;if(C&&d!==!1){const S=Object.keys(C),{shapeFlag:M}=g;S.length&&M&7&&(v&&S.some(isModelListener)&&(C=filterModelListeners(C,v)),g=cloneVNode(g,C))}return r.dirs&&(g=cloneVNode(g),g.dirs=g.dirs?g.dirs.concat(r.dirs):r.dirs),r.transition&&(g.transition=r.transition),b=g,setCurrentRenderingInstance(y),b}function filterSingleRoot(e){let t;for(let r=0;r<e.length;r++){const n=e[r];if(isVNode(n)){if(n.type!==Comment||n.children==="v-if"){if(t)return;t=n}}else return}return t}const getFunctionalFallthrough=e=>{let t;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((t||(t={}))[r]=e[r]);return t},filterModelListeners=(e,t)=>{const r={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function shouldUpdateComponent(e,t,r){const{props:n,children:a,component:m}=e,{props:v,children:_,patchFlag:w}=t,u=m.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&w>=0){if(w&1024)return!0;if(w&16)return n?hasPropsChanged(n,v,u):!!v;if(w&8){const c=t.dynamicProps;for(let O=0;O<c.length;O++){const k=c[O];if(v[k]!==n[k]&&!isEmitListener(u,k))return!0}}}else return(a||_)&&(!_||!_.$stable)?!0:n===v?!1:n?v?hasPropsChanged(n,v,u):!0:!!v;return!1}function hasPropsChanged(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let a=0;a<n.length;a++){const m=n[a];if(t[m]!==e[m]&&!isEmitListener(r,m))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const isSuspense=e=>e.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(e,t,r,n,a,m,v,_,w,u){e==null?mountSuspense(t,r,n,a,m,v,_,w,u):patchSuspense(e,t,r,n,a,v,_,w,u)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(e,t){const r=e.props&&e.props[t];isFunction(r)&&r()}function mountSuspense(e,t,r,n,a,m,v,_,w){const{p:u,o:{createElement:c}}=w,O=c("div"),k=e.suspense=createSuspenseBoundary(e,a,n,t,O,r,m,v,_,w);u(null,k.pendingBranch=e.ssContent,O,null,n,k,m,v),k.deps>0?(triggerEvent(e,"onPending"),triggerEvent(e,"onFallback"),u(null,e.ssFallback,t,r,n,null,m,v),setActiveBranch(k,e.ssFallback)):k.resolve()}function patchSuspense(e,t,r,n,a,m,v,_,{p:w,um:u,o:{createElement:c}}){const O=t.suspense=e.suspense;O.vnode=t,t.el=e.el;const k=t.ssContent,T=t.ssFallback,{activeBranch:l,pendingBranch:d,isInFallback:b,isHydrating:C}=O;if(d)O.pendingBranch=k,isSameVNodeType(k,d)?(w(d,k,O.hiddenContainer,null,a,O,m,v,_),O.deps<=0?O.resolve():b&&(w(l,T,r,n,a,null,m,v,_),setActiveBranch(O,T))):(O.pendingId++,C?(O.isHydrating=!1,O.activeBranch=d):u(d,a,O),O.deps=0,O.effects.length=0,O.hiddenContainer=c("div"),b?(w(null,k,O.hiddenContainer,null,a,O,m,v,_),O.deps<=0?O.resolve():(w(l,T,r,n,a,null,m,v,_),setActiveBranch(O,T))):l&&isSameVNodeType(k,l)?(w(l,k,r,n,a,O,m,v,_),O.resolve(!0)):(w(null,k,O.hiddenContainer,null,a,O,m,v,_),O.deps<=0&&O.resolve()));else if(l&&isSameVNodeType(k,l))w(l,k,r,n,a,O,m,v,_),setActiveBranch(O,k);else if(triggerEvent(t,"onPending"),O.pendingBranch=k,O.pendingId++,w(null,k,O.hiddenContainer,null,a,O,m,v,_),O.deps<=0)O.resolve();else{const{timeout:y,pendingId:g}=O;y>0?setTimeout(()=>{O.pendingId===g&&O.fallback(T)},y):y===0&&O.fallback(T)}}function createSuspenseBoundary(e,t,r,n,a,m,v,_,w,u,c=!1){const{p:O,m:k,um:T,n:l,o:{parentNode:d,remove:b}}=u,C=toNumber(e.props&&e.props.timeout),y={vnode:e,parent:t,parentComponent:r,isSVG:v,container:n,hiddenContainer:a,anchor:m,deps:0,pendingId:0,timeout:typeof C=="number"?C:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(g=!1){const{vnode:S,activeBranch:M,pendingBranch:P,pendingId:R,effects:s,parentComponent:h,container:I}=y;if(y.isHydrating)y.isHydrating=!1;else if(!g){const q=M&&P.transition&&P.transition.mode==="out-in";q&&(M.transition.afterLeave=()=>{R===y.pendingId&&k(P,I,G,0)});let{anchor:G}=y;M&&(G=l(M),T(M,h,y,!0)),q||k(P,I,G,0)}setActiveBranch(y,P),y.pendingBranch=null,y.isInFallback=!1;let f=y.parent,B=!1;for(;f;){if(f.pendingBranch){f.effects.push(...s),B=!0;break}f=f.parent}B||queuePostFlushCb(s),y.effects=[],triggerEvent(S,"onResolve")},fallback(g){if(!y.pendingBranch)return;const{vnode:S,activeBranch:M,parentComponent:P,container:R,isSVG:s}=y;triggerEvent(S,"onFallback");const h=l(M),I=()=>{!y.isInFallback||(O(null,g,R,h,P,null,s,_,w),setActiveBranch(y,g))},f=g.transition&&g.transition.mode==="out-in";f&&(M.transition.afterLeave=I),y.isInFallback=!0,T(M,P,null,!0),f||I()},move(g,S,M){y.activeBranch&&k(y.activeBranch,g,S,M),y.container=g},next(){return y.activeBranch&&l(y.activeBranch)},registerDep(g,S){const M=!!y.pendingBranch;M&&y.deps++;const P=g.vnode.el;g.asyncDep.catch(R=>{handleError(R,g,0)}).then(R=>{if(g.isUnmounted||y.isUnmounted||y.pendingId!==g.suspenseId)return;g.asyncResolved=!0;const{vnode:s}=g;handleSetupResult(g,R,!1),P&&(s.el=P);const h=!P&&g.subTree.el;S(g,s,d(P||g.subTree.el),P?null:l(g.subTree),y,v,w),h&&b(h),updateHOCHostEl(g,s.el),M&&--y.deps===0&&y.resolve()})},unmount(g,S){y.isUnmounted=!0,y.activeBranch&&T(y.activeBranch,r,g,S),y.pendingBranch&&T(y.pendingBranch,r,g,S)}};return y}function hydrateSuspense(e,t,r,n,a,m,v,_,w){const u=t.suspense=createSuspenseBoundary(t,n,r,e.parentNode,document.createElement("div"),null,a,m,v,_,!0),c=w(e,u.pendingBranch=t.ssContent,r,u,m,v);return u.deps===0&&u.resolve(),c}function normalizeSuspenseChildren(e){const{shapeFlag:t,children:r}=e,n=t&32;e.ssContent=normalizeSuspenseSlot(n?r.default:r),e.ssFallback=n?normalizeSuspenseSlot(r.fallback):createVNode(Comment)}function normalizeSuspenseSlot(e){let t;if(isFunction(e)){const r=isBlockTreeEnabled&&e._c;r&&(e._d=!1,openBlock()),e=e(),r&&(e._d=!0,t=currentBlock,closeBlock())}return isArray(e)&&(e=filterSingleRoot(e)),e=normalizeVNode(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function setActiveBranch(e,t){e.activeBranch=t;const{vnode:r,parentComponent:n}=e,a=r.el=t.el;n&&n.subTree===r&&(n.vnode.el=a,updateHOCHostEl(n,a))}function provide(e,t){if(currentInstance){let r=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===r&&(r=currentInstance.provides=Object.create(n)),r[e]=t}}function inject(e,t,r=!1){const n=currentInstance||currentRenderingInstance;if(n){const a=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(a&&e in a)return a[e];if(arguments.length>1)return r&&isFunction(t)?t.call(n.proxy):t}}const INITIAL_WATCHER_VALUE={};function watch(e,t,r){return doWatch(e,t,r)}function doWatch(e,t,{immediate:r,deep:n,flush:a,onTrack:m,onTrigger:v}=EMPTY_OBJ){const _=currentInstance;let w,u=!1,c=!1;if(isRef(e)?(w=()=>e.value,u=isShallow(e)):isReactive(e)?(w=()=>e,n=!0):isArray(e)?(c=!0,u=e.some(C=>isReactive(C)||isShallow(C)),w=()=>e.map(C=>{if(isRef(C))return C.value;if(isReactive(C))return traverse(C);if(isFunction(C))return callWithErrorHandling(C,_,2)})):isFunction(e)?t?w=()=>callWithErrorHandling(e,_,2):w=()=>{if(!(_&&_.isUnmounted))return O&&O(),callWithAsyncErrorHandling(e,_,3,[k])}:w=NOOP,t&&n){const C=w;w=()=>traverse(C())}let O,k=C=>{O=b.onStop=()=>{callWithErrorHandling(C,_,4)}};if(isInSSRComponentSetup)return k=NOOP,t?r&&callWithAsyncErrorHandling(t,_,3,[w(),c?[]:void 0,k]):w(),NOOP;let T=c?[]:INITIAL_WATCHER_VALUE;const l=()=>{if(!!b.active)if(t){const C=b.run();(n||u||(c?C.some((y,g)=>hasChanged(y,T[g])):hasChanged(C,T)))&&(O&&O(),callWithAsyncErrorHandling(t,_,3,[C,T===INITIAL_WATCHER_VALUE?void 0:T,k]),T=C)}else b.run()};l.allowRecurse=!!t;let d;a==="sync"?d=l:a==="post"?d=()=>queuePostRenderEffect(l,_&&_.suspense):d=()=>queuePreFlushCb(l);const b=new ReactiveEffect(w,d);return t?r?l():T=b.run():a==="post"?queuePostRenderEffect(b.run.bind(b),_&&_.suspense):b.run(),()=>{b.stop(),_&&_.scope&&remove(_.scope.effects,b)}}function instanceWatch(e,t,r){const n=this.proxy,a=isString(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let m;isFunction(t)?m=t:(m=t.handler,r=t);const v=currentInstance;setCurrentInstance(this);const _=doWatch(a,m.bind(n),r);return v?setCurrentInstance(v):unsetCurrentInstance(),_}function createPathGetter(e,t){const r=t.split(".");return()=>{let n=e;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray(e))for(let r=0;r<e.length;r++)traverse(e[r],t);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t)});else if(isPlainObject(e))for(const r in e)traverse(e[r],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const r=getCurrentInstance(),n=useTransitionState();let a;return()=>{const m=t.default&&getTransitionRawChildren(t.default(),!0);if(!m||!m.length)return;let v=m[0];if(m.length>1){for(const d of m)if(d.type!==Comment){v=d;break}}const _=toRaw(e),{mode:w}=_;if(n.isLeaving)return emptyPlaceholder(v);const u=getKeepAliveChild(v);if(!u)return emptyPlaceholder(v);const c=resolveTransitionHooks(u,_,n,r);setTransitionHooks(u,c);const O=r.subTree,k=O&&getKeepAliveChild(O);let T=!1;const{getTransitionKey:l}=u.type;if(l){const d=l();a===void 0?a=d:d!==a&&(a=d,T=!0)}if(k&&k.type!==Comment&&(!isSameVNodeType(u,k)||T)){const d=resolveTransitionHooks(k,_,n,r);if(setTransitionHooks(k,d),w==="out-in")return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.update()},emptyPlaceholder(v);w==="in-out"&&u.type!==Comment&&(d.delayLeave=(b,C,y)=>{const g=getLeavingNodesForType(n,k);g[String(k.key)]=k,b._leaveCb=()=>{C(),b._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=y})}return v}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function resolveTransitionHooks(e,t,r,n){const{appear:a,mode:m,persisted:v=!1,onBeforeEnter:_,onEnter:w,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:O,onLeave:k,onAfterLeave:T,onLeaveCancelled:l,onBeforeAppear:d,onAppear:b,onAfterAppear:C,onAppearCancelled:y}=t,g=String(e.key),S=getLeavingNodesForType(r,e),M=(s,h)=>{s&&callWithAsyncErrorHandling(s,n,9,h)},P=(s,h)=>{const I=h[1];M(s,h),isArray(s)?s.every(f=>f.length<=1)&&I():s.length<=1&&I()},R={mode:m,persisted:v,beforeEnter(s){let h=_;if(!r.isMounted)if(a)h=d||_;else return;s._leaveCb&&s._leaveCb(!0);const I=S[g];I&&isSameVNodeType(e,I)&&I.el._leaveCb&&I.el._leaveCb(),M(h,[s])},enter(s){let h=w,I=u,f=c;if(!r.isMounted)if(a)h=b||w,I=C||u,f=y||c;else return;let B=!1;const q=s._enterCb=G=>{B||(B=!0,G?M(f,[s]):M(I,[s]),R.delayedLeave&&R.delayedLeave(),s._enterCb=void 0)};h?P(h,[s,q]):q()},leave(s,h){const I=String(e.key);if(s._enterCb&&s._enterCb(!0),r.isUnmounting)return h();M(O,[s]);let f=!1;const B=s._leaveCb=q=>{f||(f=!0,h(),q?M(l,[s]):M(T,[s]),s._leaveCb=void 0,S[I]===e&&delete S[I])};S[I]=e,k?P(k,[s,B]):B()},clone(s){return resolveTransitionHooks(s,t,r,n)}};return R}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,r){let n=[],a=0;for(let m=0;m<e.length;m++){let v=e[m];const _=r==null?v.key:String(r)+String(v.key!=null?v.key:m);v.type===Fragment?(v.patchFlag&128&&a++,n=n.concat(getTransitionRawChildren(v.children,t,_))):(t||v.type!==Comment)&&n.push(_!=null?cloneVNode(v,{key:_}):v)}if(a>1)for(let m=0;m<n.length;m++)n[m].patchFlag=-2;return n}function defineComponent(e){return isFunction(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,r=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(injectHook(t,n,r),r){let a=r.parent;for(;a&&a.parent;)isKeepAlive(a.parent.vnode)&&injectToKeepAliveRoot(n,t,r,a),a=a.parent}}function injectToKeepAliveRoot(e,t,r,n){const a=injectHook(t,e,n,!0);onUnmounted(()=>{remove(n[t],a)},r)}function injectHook(e,t,r=currentInstance,n=!1){if(r){const a=r[e]||(r[e]=[]),m=t.__weh||(t.__weh=(...v)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const _=callWithAsyncErrorHandling(t,r,e,v);return unsetCurrentInstance(),resetTracking(),_});return n?a.unshift(m):a.push(m),m}}const createHook=e=>(t,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,t,r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function withDirectives(e,t){const r=currentRenderingInstance;if(r===null)return e;const n=getExposeProxy(r)||r.proxy,a=e.dirs||(e.dirs=[]);for(let m=0;m<t.length;m++){let[v,_,w,u=EMPTY_OBJ]=t[m];isFunction(v)&&(v={mounted:v,updated:v}),v.deep&&traverse(_),a.push({dir:v,instance:n,value:_,oldValue:void 0,arg:w,modifiers:u})}return e}function invokeDirectiveHook(e,t,r,n){const a=e.dirs,m=t&&t.dirs;for(let v=0;v<a.length;v++){const _=a[v];m&&(_.oldValue=m[v].value);let w=_.dir[n];w&&(pauseTracking(),callWithAsyncErrorHandling(w,r,8,[e.el,_,e,t]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol();function renderList(e,t,r,n){let a;const m=r&&r[n];if(isArray(e)||isString(e)){a=new Array(e.length);for(let v=0,_=e.length;v<_;v++)a[v]=t(e[v],v,void 0,m&&m[v])}else if(typeof e=="number"){a=new Array(e);for(let v=0;v<e;v++)a[v]=t(v+1,v,void 0,m&&m[v])}else if(isObject(e))if(e[Symbol.iterator])a=Array.from(e,(v,_)=>t(v,_,void 0,m&&m[_]));else{const v=Object.keys(e);a=new Array(v.length);for(let _=0,w=v.length;_<w;_++){const u=v[_];a[_]=t(e[u],u,_,m&&m[_])}}else a=[];return r&&(r[n]=a),a}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:r,setupState:n,data:a,props:m,accessCache:v,type:_,appContext:w}=e;let u;if(t[0]!=="$"){const T=v[t];if(T!==void 0)switch(T){case 1:return n[t];case 2:return a[t];case 4:return r[t];case 3:return m[t]}else{if(n!==EMPTY_OBJ&&hasOwn(n,t))return v[t]=1,n[t];if(a!==EMPTY_OBJ&&hasOwn(a,t))return v[t]=2,a[t];if((u=e.propsOptions[0])&&hasOwn(u,t))return v[t]=3,m[t];if(r!==EMPTY_OBJ&&hasOwn(r,t))return v[t]=4,r[t];shouldCacheAccess&&(v[t]=0)}}const c=publicPropertiesMap[t];let O,k;if(c)return t==="$attrs"&&track(e,"get",t),c(e);if((O=_.__cssModules)&&(O=O[t]))return O;if(r!==EMPTY_OBJ&&hasOwn(r,t))return v[t]=4,r[t];if(k=w.config.globalProperties,hasOwn(k,t))return k[t]},set({_:e},t,r){const{data:n,setupState:a,ctx:m}=e;return a!==EMPTY_OBJ&&hasOwn(a,t)?(a[t]=r,!0):n!==EMPTY_OBJ&&hasOwn(n,t)?(n[t]=r,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(m[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:a,propsOptions:m}},v){let _;return!!r[v]||e!==EMPTY_OBJ&&hasOwn(e,v)||t!==EMPTY_OBJ&&hasOwn(t,v)||(_=m[0])&&hasOwn(_,v)||hasOwn(n,v)||hasOwn(publicPropertiesMap,v)||hasOwn(a.config.globalProperties,v)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:hasOwn(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),r=e.proxy,n=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:a,computed:m,methods:v,watch:_,provide:w,inject:u,created:c,beforeMount:O,mounted:k,beforeUpdate:T,updated:l,activated:d,deactivated:b,beforeDestroy:C,beforeUnmount:y,destroyed:g,unmounted:S,render:M,renderTracked:P,renderTriggered:R,errorCaptured:s,serverPrefetch:h,expose:I,inheritAttrs:f,components:B,directives:q,filters:G}=t;if(u&&resolveInjections(u,n,null,e.appContext.config.unwrapInjectedRef),v)for(const ae in v){const le=v[ae];isFunction(le)&&(n[ae]=le.bind(r))}if(a){const ae=a.call(r,r);isObject(ae)&&(e.data=reactive(ae))}if(shouldCacheAccess=!0,m)for(const ae in m){const le=m[ae],_e=isFunction(le)?le.bind(r,r):isFunction(le.get)?le.get.bind(r,r):NOOP,Ae=!isFunction(le)&&isFunction(le.set)?le.set.bind(r):NOOP,X=computed({get:_e,set:Ae});Object.defineProperty(n,ae,{enumerable:!0,configurable:!0,get:()=>X.value,set:Ee=>X.value=Ee})}if(_)for(const ae in _)createWatcher(_[ae],n,r,ae);if(w){const ae=isFunction(w)?w.call(r):w;Reflect.ownKeys(ae).forEach(le=>{provide(le,ae[le])})}c&&callHook(c,e,"c");function ue(ae,le){isArray(le)?le.forEach(_e=>ae(_e.bind(r))):le&&ae(le.bind(r))}if(ue(onBeforeMount,O),ue(onMounted,k),ue(onBeforeUpdate,T),ue(onUpdated,l),ue(onActivated,d),ue(onDeactivated,b),ue(onErrorCaptured,s),ue(onRenderTracked,P),ue(onRenderTriggered,R),ue(onBeforeUnmount,y),ue(onUnmounted,S),ue(onServerPrefetch,h),isArray(I))if(I.length){const ae=e.exposed||(e.exposed={});I.forEach(le=>{Object.defineProperty(ae,le,{get:()=>r[le],set:_e=>r[le]=_e})})}else e.exposed||(e.exposed={});M&&e.render===NOOP&&(e.render=M),f!=null&&(e.inheritAttrs=f),B&&(e.components=B),q&&(e.directives=q)}function resolveInjections(e,t,r=NOOP,n=!1){isArray(e)&&(e=normalizeInject(e));for(const a in e){const m=e[a];let v;isObject(m)?"default"in m?v=inject(m.from||a,m.default,!0):v=inject(m.from||a):v=inject(m),isRef(v)&&n?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>v.value,set:_=>v.value=_}):t[a]=v}}function callHook(e,t,r){callWithAsyncErrorHandling(isArray(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function createWatcher(e,t,r,n){const a=n.includes(".")?createPathGetter(r,n):()=>r[n];if(isString(e)){const m=t[e];isFunction(m)&&watch(a,m)}else if(isFunction(e))watch(a,e.bind(r));else if(isObject(e))if(isArray(e))e.forEach(m=>createWatcher(m,t,r,n));else{const m=isFunction(e.handler)?e.handler.bind(r):t[e.handler];isFunction(m)&&watch(a,m,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:a,optionsCache:m,config:{optionMergeStrategies:v}}=e.appContext,_=m.get(t);let w;return _?w=_:!a.length&&!r&&!n?w=t:(w={},a.length&&a.forEach(u=>mergeOptions(w,u,v,!0)),mergeOptions(w,t,v)),m.set(t,w),w}function mergeOptions(e,t,r,n=!1){const{mixins:a,extends:m}=t;m&&mergeOptions(e,m,r,!0),a&&a.forEach(v=>mergeOptions(e,v,r,!0));for(const v in t)if(!(n&&v==="expose")){const _=internalOptionMergeStrats[v]||r&&r[v];e[v]=_?_(e[v],t[v]):t[v]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(extend(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const r=extend(Object.create(null),e);for(const n in t)r[n]=mergeAsArray(e[n],t[n]);return r}function initProps(e,t,r,n=!1){const a={},m={};def(m,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,a,m);for(const v in e.propsOptions[0])v in a||(a[v]=void 0);r?e.props=n?a:shallowReactive(a):e.type.props?e.props=a:e.props=m,e.attrs=m}function updateProps(e,t,r,n){const{props:a,attrs:m,vnode:{patchFlag:v}}=e,_=toRaw(a),[w]=e.propsOptions;let u=!1;if((n||v>0)&&!(v&16)){if(v&8){const c=e.vnode.dynamicProps;for(let O=0;O<c.length;O++){let k=c[O];if(isEmitListener(e.emitsOptions,k))continue;const T=t[k];if(w)if(hasOwn(m,k))T!==m[k]&&(m[k]=T,u=!0);else{const l=camelize(k);a[l]=resolvePropValue(w,_,l,T,e,!1)}else T!==m[k]&&(m[k]=T,u=!0)}}}else{setFullProps(e,t,a,m)&&(u=!0);let c;for(const O in _)(!t||!hasOwn(t,O)&&((c=hyphenate(O))===O||!hasOwn(t,c)))&&(w?r&&(r[O]!==void 0||r[c]!==void 0)&&(a[O]=resolvePropValue(w,_,O,void 0,e,!0)):delete a[O]);if(m!==_)for(const O in m)(!t||!hasOwn(t,O)&&!0)&&(delete m[O],u=!0)}u&&trigger(e,"set","$attrs")}function setFullProps(e,t,r,n){const[a,m]=e.propsOptions;let v=!1,_;if(t)for(let w in t){if(isReservedProp(w))continue;const u=t[w];let c;a&&hasOwn(a,c=camelize(w))?!m||!m.includes(c)?r[c]=u:(_||(_={}))[c]=u:isEmitListener(e.emitsOptions,w)||(!(w in n)||u!==n[w])&&(n[w]=u,v=!0)}if(m){const w=toRaw(r),u=_||EMPTY_OBJ;for(let c=0;c<m.length;c++){const O=m[c];r[O]=resolvePropValue(a,w,O,u[O],e,!hasOwn(u,O))}}return v}function resolvePropValue(e,t,r,n,a,m){const v=e[r];if(v!=null){const _=hasOwn(v,"default");if(_&&n===void 0){const w=v.default;if(v.type!==Function&&isFunction(w)){const{propsDefaults:u}=a;r in u?n=u[r]:(setCurrentInstance(a),n=u[r]=w.call(null,t),unsetCurrentInstance())}else n=w}v[0]&&(m&&!_?n=!1:v[1]&&(n===""||n===hyphenate(r))&&(n=!0))}return n}function normalizePropsOptions(e,t,r=!1){const n=t.propsCache,a=n.get(e);if(a)return a;const m=e.props,v={},_=[];let w=!1;if(!isFunction(e)){const c=O=>{w=!0;const[k,T]=normalizePropsOptions(O,t,!0);extend(v,k),T&&_.push(...T)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!m&&!w)return n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(m))for(let c=0;c<m.length;c++){const O=camelize(m[c]);validatePropName(O)&&(v[O]=EMPTY_OBJ)}else if(m)for(const c in m){const O=camelize(c);if(validatePropName(O)){const k=m[c],T=v[O]=isArray(k)||isFunction(k)?{type:k}:k;if(T){const l=getTypeIndex(Boolean,T.type),d=getTypeIndex(String,T.type);T[0]=l>-1,T[1]=d<0||l<d,(l>-1||hasOwn(T,"default"))&&_.push(O)}}}const u=[v,_];return n.set(e,u),u}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray(t)?t.findIndex(r=>isSameType(r,e)):isFunction(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,r)=>{if(t._n)return t;const n=withCtx((...a)=>normalizeSlotValue(t(...a)),r);return n._c=!1,n},normalizeObjectSlots=(e,t,r)=>{const n=e._ctx;for(const a in e){if(isInternalKey(a))continue;const m=e[a];if(isFunction(m))t[a]=normalizeSlot(a,m,n);else if(m!=null){const v=normalizeSlotValue(m);t[a]=()=>v}}},normalizeVNodeSlots=(e,t)=>{const r=normalizeSlotValue(t);e.slots.default=()=>r},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=toRaw(t),def(t,"_",r)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,r)=>{const{vnode:n,slots:a}=e;let m=!0,v=EMPTY_OBJ;if(n.shapeFlag&32){const _=t._;_?r&&_===1?m=!1:(extend(a,t),!r&&_===1&&delete a._):(m=!t.$stable,normalizeObjectSlots(t,a)),v=t}else t&&(normalizeVNodeSlots(e,t),v={default:1});if(m)for(const _ in a)!isInternalKey(_)&&!(_ in v)&&delete a[_]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(e,t){return function(n,a=null){isFunction(n)||(n=Object.assign({},n)),a!=null&&!isObject(a)&&(a=null);const m=createAppContext(),v=new Set;let _=!1;const w=m.app={_uid:uid++,_component:n,_props:a,_container:null,_context:m,_instance:null,version,get config(){return m.config},set config(u){},use(u,...c){return v.has(u)||(u&&isFunction(u.install)?(v.add(u),u.install(w,...c)):isFunction(u)&&(v.add(u),u(w,...c))),w},mixin(u){return m.mixins.includes(u)||m.mixins.push(u),w},component(u,c){return c?(m.components[u]=c,w):m.components[u]},directive(u,c){return c?(m.directives[u]=c,w):m.directives[u]},mount(u,c,O){if(!_){const k=createVNode(n,a);return k.appContext=m,c&&t?t(k,u):e(k,u,O),_=!0,w._container=u,u.__vue_app__=w,getExposeProxy(k.component)||k.component.proxy}},unmount(){_&&(e(null,w._container),delete w._container.__vue_app__)},provide(u,c){return m.provides[u]=c,w}};return w}}function setRef(e,t,r,n,a=!1){if(isArray(e)){e.forEach((k,T)=>setRef(k,t&&(isArray(t)?t[T]:t),r,n,a));return}if(isAsyncWrapper(n)&&!a)return;const m=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,v=a?null:m,{i:_,r:w}=e,u=t&&t.r,c=_.refs===EMPTY_OBJ?_.refs={}:_.refs,O=_.setupState;if(u!=null&&u!==w&&(isString(u)?(c[u]=null,hasOwn(O,u)&&(O[u]=null)):isRef(u)&&(u.value=null)),isFunction(w))callWithErrorHandling(w,_,12,[v,c]);else{const k=isString(w),T=isRef(w);if(k||T){const l=()=>{if(e.f){const d=k?c[w]:w.value;a?isArray(d)&&remove(d,m):isArray(d)?d.includes(m)||d.push(m):k?(c[w]=[m],hasOwn(O,w)&&(O[w]=c[w])):(w.value=[m],e.k&&(c[e.k]=w.value))}else k?(c[w]=v,hasOwn(O,w)&&(O[w]=v)):T&&(w.value=v,e.k&&(c[e.k]=v))};v?(l.id=-1,queuePostRenderEffect(l,r)):l()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const r=getGlobalThis();r.__VUE__=!0;const{insert:n,remove:a,patchProp:m,createElement:v,createText:_,createComment:w,setText:u,setElementText:c,parentNode:O,nextSibling:k,setScopeId:T=NOOP,cloneNode:l,insertStaticContent:d}=e,b=(x,i,o,E=null,L=null,D=null,z=!1,ie=null,j=!!i.dynamicChildren)=>{if(x===i)return;x&&!isSameVNodeType(x,i)&&(E=ne(x),Se(x,L,D,!0),x=null),i.patchFlag===-2&&(j=!1,i.dynamicChildren=null);const{type:$,ref:se,shapeFlag:Y}=i;switch($){case Text:C(x,i,o,E);break;case Comment:y(x,i,o,E);break;case Static:x==null&&g(i,o,E,z);break;case Fragment:q(x,i,o,E,L,D,z,ie,j);break;default:Y&1?P(x,i,o,E,L,D,z,ie,j):Y&6?G(x,i,o,E,L,D,z,ie,j):(Y&64||Y&128)&&$.process(x,i,o,E,L,D,z,ie,j,he)}se!=null&&L&&setRef(se,x&&x.ref,D,i||x,!i)},C=(x,i,o,E)=>{if(x==null)n(i.el=_(i.children),o,E);else{const L=i.el=x.el;i.children!==x.children&&u(L,i.children)}},y=(x,i,o,E)=>{x==null?n(i.el=w(i.children||""),o,E):i.el=x.el},g=(x,i,o,E)=>{[x.el,x.anchor]=d(x.children,i,o,E,x.el,x.anchor)},S=({el:x,anchor:i},o,E)=>{let L;for(;x&&x!==i;)L=k(x),n(x,o,E),x=L;n(i,o,E)},M=({el:x,anchor:i})=>{let o;for(;x&&x!==i;)o=k(x),a(x),x=o;a(i)},P=(x,i,o,E,L,D,z,ie,j)=>{z=z||i.type==="svg",x==null?R(i,o,E,L,D,z,ie,j):I(x,i,L,D,z,ie,j)},R=(x,i,o,E,L,D,z,ie)=>{let j,$;const{type:se,props:Y,shapeFlag:re,transition:pe,patchFlag:ve,dirs:Ce}=x;if(x.el&&l!==void 0&&ve===-1)j=x.el=l(x.el);else{if(j=x.el=v(x.type,D,Y&&Y.is,Y),re&8?c(j,x.children):re&16&&h(x.children,j,null,E,L,D&&se!=="foreignObject",z,ie),Ce&&invokeDirectiveHook(x,null,E,"created"),Y){for(const ke in Y)ke!=="value"&&!isReservedProp(ke)&&m(j,ke,null,Y[ke],D,x.children,E,L,W);"value"in Y&&m(j,"value",null,Y.value),($=Y.onVnodeBeforeMount)&&invokeVNodeHook($,E,x)}s(j,x,x.scopeId,z,E)}Ce&&invokeDirectiveHook(x,null,E,"beforeMount");const Pe=(!L||L&&!L.pendingBranch)&&pe&&!pe.persisted;Pe&&pe.beforeEnter(j),n(j,i,o),(($=Y&&Y.onVnodeMounted)||Pe||Ce)&&queuePostRenderEffect(()=>{$&&invokeVNodeHook($,E,x),Pe&&pe.enter(j),Ce&&invokeDirectiveHook(x,null,E,"mounted")},L)},s=(x,i,o,E,L)=>{if(o&&T(x,o),E)for(let D=0;D<E.length;D++)T(x,E[D]);if(L){let D=L.subTree;if(i===D){const z=L.vnode;s(x,z,z.scopeId,z.slotScopeIds,L.parent)}}},h=(x,i,o,E,L,D,z,ie,j=0)=>{for(let $=j;$<x.length;$++){const se=x[$]=ie?cloneIfMounted(x[$]):normalizeVNode(x[$]);b(null,se,i,o,E,L,D,z,ie)}},I=(x,i,o,E,L,D,z)=>{const ie=i.el=x.el;let{patchFlag:j,dynamicChildren:$,dirs:se}=i;j|=x.patchFlag&16;const Y=x.props||EMPTY_OBJ,re=i.props||EMPTY_OBJ;let pe;o&&toggleRecurse(o,!1),(pe=re.onVnodeBeforeUpdate)&&invokeVNodeHook(pe,o,i,x),se&&invokeDirectiveHook(i,x,o,"beforeUpdate"),o&&toggleRecurse(o,!0);const ve=L&&i.type!=="foreignObject";if($?f(x.dynamicChildren,$,ie,o,E,ve,D):z||_e(x,i,ie,null,o,E,ve,D,!1),j>0){if(j&16)B(ie,i,Y,re,o,E,L);else if(j&2&&Y.class!==re.class&&m(ie,"class",null,re.class,L),j&4&&m(ie,"style",Y.style,re.style,L),j&8){const Ce=i.dynamicProps;for(let Pe=0;Pe<Ce.length;Pe++){const ke=Ce[Pe],de=Y[ke],xe=re[ke];(xe!==de||ke==="value")&&m(ie,ke,de,xe,L,x.children,o,E,W)}}j&1&&x.children!==i.children&&c(ie,i.children)}else!z&&$==null&&B(ie,i,Y,re,o,E,L);((pe=re.onVnodeUpdated)||se)&&queuePostRenderEffect(()=>{pe&&invokeVNodeHook(pe,o,i,x),se&&invokeDirectiveHook(i,x,o,"updated")},E)},f=(x,i,o,E,L,D,z)=>{for(let ie=0;ie<i.length;ie++){const j=x[ie],$=i[ie],se=j.el&&(j.type===Fragment||!isSameVNodeType(j,$)||j.shapeFlag&70)?O(j.el):o;b(j,$,se,null,E,L,D,z,!0)}},B=(x,i,o,E,L,D,z)=>{if(o!==E){for(const ie in E){if(isReservedProp(ie))continue;const j=E[ie],$=o[ie];j!==$&&ie!=="value"&&m(x,ie,$,j,z,i.children,L,D,W)}if(o!==EMPTY_OBJ)for(const ie in o)!isReservedProp(ie)&&!(ie in E)&&m(x,ie,o[ie],null,z,i.children,L,D,W);"value"in E&&m(x,"value",o.value,E.value)}},q=(x,i,o,E,L,D,z,ie,j)=>{const $=i.el=x?x.el:_(""),se=i.anchor=x?x.anchor:_("");let{patchFlag:Y,dynamicChildren:re,slotScopeIds:pe}=i;pe&&(ie=ie?ie.concat(pe):pe),x==null?(n($,o,E),n(se,o,E),h(i.children,o,se,L,D,z,ie,j)):Y>0&&Y&64&&re&&x.dynamicChildren?(f(x.dynamicChildren,re,o,L,D,z,ie),(i.key!=null||L&&i===L.subTree)&&traverseStaticChildren(x,i,!0)):_e(x,i,o,se,L,D,z,ie,j)},G=(x,i,o,E,L,D,z,ie,j)=>{i.slotScopeIds=ie,x==null?i.shapeFlag&512?L.ctx.activate(i,o,E,z,j):Q(i,o,E,L,D,z,j):ue(x,i,j)},Q=(x,i,o,E,L,D,z)=>{const ie=x.component=createComponentInstance(x,E,L);if(isKeepAlive(x)&&(ie.ctx.renderer=he),setupComponent(ie),ie.asyncDep){if(L&&L.registerDep(ie,ae),!x.el){const j=ie.subTree=createVNode(Comment);y(null,j,i,o)}return}ae(ie,x,i,o,L,D,z)},ue=(x,i,o)=>{const E=i.component=x.component;if(shouldUpdateComponent(x,i,o))if(E.asyncDep&&!E.asyncResolved){le(E,i,o);return}else E.next=i,invalidateJob(E.update),E.update();else i.el=x.el,E.vnode=i},ae=(x,i,o,E,L,D,z)=>{const ie=()=>{if(x.isMounted){let{next:se,bu:Y,u:re,parent:pe,vnode:ve}=x,Ce=se,Pe;toggleRecurse(x,!1),se?(se.el=ve.el,le(x,se,z)):se=ve,Y&&invokeArrayFns(Y),(Pe=se.props&&se.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Pe,pe,se,ve),toggleRecurse(x,!0);const ke=renderComponentRoot(x),de=x.subTree;x.subTree=ke,b(de,ke,O(de.el),ne(de),x,L,D),se.el=ke.el,Ce===null&&updateHOCHostEl(x,ke.el),re&&queuePostRenderEffect(re,L),(Pe=se.props&&se.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Pe,pe,se,ve),L)}else{let se;const{el:Y,props:re}=i,{bm:pe,m:ve,parent:Ce}=x,Pe=isAsyncWrapper(i);if(toggleRecurse(x,!1),pe&&invokeArrayFns(pe),!Pe&&(se=re&&re.onVnodeBeforeMount)&&invokeVNodeHook(se,Ce,i),toggleRecurse(x,!0),Y&&K){const ke=()=>{x.subTree=renderComponentRoot(x),K(Y,x.subTree,x,L,null)};Pe?i.type.__asyncLoader().then(()=>!x.isUnmounted&&ke()):ke()}else{const ke=x.subTree=renderComponentRoot(x);b(null,ke,o,E,x,L,D),i.el=ke.el}if(ve&&queuePostRenderEffect(ve,L),!Pe&&(se=re&&re.onVnodeMounted)){const ke=i;queuePostRenderEffect(()=>invokeVNodeHook(se,Ce,ke),L)}(i.shapeFlag&256||Ce&&isAsyncWrapper(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&x.a&&queuePostRenderEffect(x.a,L),x.isMounted=!0,i=o=E=null}},j=x.effect=new ReactiveEffect(ie,()=>queueJob($),x.scope),$=x.update=()=>j.run();$.id=x.uid,toggleRecurse(x,!0),$()},le=(x,i,o)=>{i.component=x;const E=x.vnode.props;x.vnode=i,x.next=null,updateProps(x,i.props,E,o),updateSlots(x,i.children,o),pauseTracking(),flushPreFlushCbs(void 0,x.update),resetTracking()},_e=(x,i,o,E,L,D,z,ie,j=!1)=>{const $=x&&x.children,se=x?x.shapeFlag:0,Y=i.children,{patchFlag:re,shapeFlag:pe}=i;if(re>0){if(re&128){X($,Y,o,E,L,D,z,ie,j);return}else if(re&256){Ae($,Y,o,E,L,D,z,ie,j);return}}pe&8?(se&16&&W($,L,D),Y!==$&&c(o,Y)):se&16?pe&16?X($,Y,o,E,L,D,z,ie,j):W($,L,D,!0):(se&8&&c(o,""),pe&16&&h(Y,o,E,L,D,z,ie,j))},Ae=(x,i,o,E,L,D,z,ie,j)=>{x=x||EMPTY_ARR,i=i||EMPTY_ARR;const $=x.length,se=i.length,Y=Math.min($,se);let re;for(re=0;re<Y;re++){const pe=i[re]=j?cloneIfMounted(i[re]):normalizeVNode(i[re]);b(x[re],pe,o,null,L,D,z,ie,j)}$>se?W(x,L,D,!0,!1,Y):h(i,o,E,L,D,z,ie,j,Y)},X=(x,i,o,E,L,D,z,ie,j)=>{let $=0;const se=i.length;let Y=x.length-1,re=se-1;for(;$<=Y&&$<=re;){const pe=x[$],ve=i[$]=j?cloneIfMounted(i[$]):normalizeVNode(i[$]);if(isSameVNodeType(pe,ve))b(pe,ve,o,null,L,D,z,ie,j);else break;$++}for(;$<=Y&&$<=re;){const pe=x[Y],ve=i[re]=j?cloneIfMounted(i[re]):normalizeVNode(i[re]);if(isSameVNodeType(pe,ve))b(pe,ve,o,null,L,D,z,ie,j);else break;Y--,re--}if($>Y){if($<=re){const pe=re+1,ve=pe<se?i[pe].el:E;for(;$<=re;)b(null,i[$]=j?cloneIfMounted(i[$]):normalizeVNode(i[$]),o,ve,L,D,z,ie,j),$++}}else if($>re)for(;$<=Y;)Se(x[$],L,D,!0),$++;else{const pe=$,ve=$,Ce=new Map;for($=ve;$<=re;$++){const F=i[$]=j?cloneIfMounted(i[$]):normalizeVNode(i[$]);F.key!=null&&Ce.set(F.key,$)}let Pe,ke=0;const de=re-ve+1;let xe=!1,Me=0;const De=new Array(de);for($=0;$<de;$++)De[$]=0;for($=pe;$<=Y;$++){const F=x[$];if(ke>=de){Se(F,L,D,!0);continue}let U;if(F.key!=null)U=Ce.get(F.key);else for(Pe=ve;Pe<=re;Pe++)if(De[Pe-ve]===0&&isSameVNodeType(F,i[Pe])){U=Pe;break}U===void 0?Se(F,L,D,!0):(De[U-ve]=$+1,U>=Me?Me=U:xe=!0,b(F,i[U],o,null,L,D,z,ie,j),ke++)}const V=xe?getSequence(De):EMPTY_ARR;for(Pe=V.length-1,$=de-1;$>=0;$--){const F=ve+$,U=i[F],ce=F+1<se?i[F+1].el:E;De[$]===0?b(null,U,o,ce,L,D,z,ie,j):xe&&(Pe<0||$!==V[Pe]?Ee(U,o,ce,2):Pe--)}}},Ee=(x,i,o,E,L=null)=>{const{el:D,type:z,transition:ie,children:j,shapeFlag:$}=x;if($&6){Ee(x.component.subTree,i,o,E);return}if($&128){x.suspense.move(i,o,E);return}if($&64){z.move(x,i,o,he);return}if(z===Fragment){n(D,i,o);for(let Y=0;Y<j.length;Y++)Ee(j[Y],i,o,E);n(x.anchor,i,o);return}if(z===Static){S(x,i,o);return}if(E!==2&&$&1&&ie)if(E===0)ie.beforeEnter(D),n(D,i,o),queuePostRenderEffect(()=>ie.enter(D),L);else{const{leave:Y,delayLeave:re,afterLeave:pe}=ie,ve=()=>n(D,i,o),Ce=()=>{Y(D,()=>{ve(),pe&&pe()})};re?re(D,ve,Ce):Ce()}else n(D,i,o)},Se=(x,i,o,E=!1,L=!1)=>{const{type:D,props:z,ref:ie,children:j,dynamicChildren:$,shapeFlag:se,patchFlag:Y,dirs:re}=x;if(ie!=null&&setRef(ie,null,o,x,!0),se&256){i.ctx.deactivate(x);return}const pe=se&1&&re,ve=!isAsyncWrapper(x);let Ce;if(ve&&(Ce=z&&z.onVnodeBeforeUnmount)&&invokeVNodeHook(Ce,i,x),se&6)H(x.component,o,E);else{if(se&128){x.suspense.unmount(o,E);return}pe&&invokeDirectiveHook(x,null,i,"beforeUnmount"),se&64?x.type.remove(x,i,o,L,he,E):$&&(D!==Fragment||Y>0&&Y&64)?W($,i,o,!1,!0):(D===Fragment&&Y&384||!L&&se&16)&&W(j,i,o),E&&ee(x)}(ve&&(Ce=z&&z.onVnodeUnmounted)||pe)&&queuePostRenderEffect(()=>{Ce&&invokeVNodeHook(Ce,i,x),pe&&invokeDirectiveHook(x,null,i,"unmounted")},o)},ee=x=>{const{type:i,el:o,anchor:E,transition:L}=x;if(i===Fragment){N(o,E);return}if(i===Static){M(x);return}const D=()=>{a(o),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(x.shapeFlag&1&&L&&!L.persisted){const{leave:z,delayLeave:ie}=L,j=()=>z(o,D);ie?ie(x.el,D,j):j()}else D()},N=(x,i)=>{let o;for(;x!==i;)o=k(x),a(x),x=o;a(i)},H=(x,i,o)=>{const{bum:E,scope:L,update:D,subTree:z,um:ie}=x;E&&invokeArrayFns(E),L.stop(),D&&(D.active=!1,Se(z,x,i,o)),ie&&queuePostRenderEffect(ie,i),queuePostRenderEffect(()=>{x.isUnmounted=!0},i),i&&i.pendingBranch&&!i.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===i.pendingId&&(i.deps--,i.deps===0&&i.resolve())},W=(x,i,o,E=!1,L=!1,D=0)=>{for(let z=D;z<x.length;z++)Se(x[z],i,o,E,L)},ne=x=>x.shapeFlag&6?ne(x.component.subTree):x.shapeFlag&128?x.suspense.next():k(x.anchor||x.el),J=(x,i,o)=>{x==null?i._vnode&&Se(i._vnode,null,null,!0):b(i._vnode||null,x,i,null,null,null,o),flushPostFlushCbs(),i._vnode=x},he={p:b,um:Se,m:Ee,r:ee,mt:Q,mc:h,pc:_e,pbc:f,n:ne,o:e};let Z,K;return t&&([Z,K]=t(he)),{render:J,hydrate:Z,createApp:createAppAPI(J,Z)}}function toggleRecurse({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function traverseStaticChildren(e,t,r=!1){const n=e.children,a=t.children;if(isArray(n)&&isArray(a))for(let m=0;m<n.length;m++){const v=n[m];let _=a[m];_.shapeFlag&1&&!_.dynamicChildren&&((_.patchFlag<=0||_.patchFlag===32)&&(_=a[m]=cloneIfMounted(a[m]),_.el=v.el),r||traverseStaticChildren(v,_))}}function getSequence(e){const t=e.slice(),r=[0];let n,a,m,v,_;const w=e.length;for(n=0;n<w;n++){const u=e[n];if(u!==0){if(a=r[r.length-1],e[a]<u){t[n]=a,r.push(n);continue}for(m=0,v=r.length-1;m<v;)_=m+v>>1,e[r[_]]<u?m=_+1:v=_;u<e[r[m]]&&(m>0&&(t[n]=r[m-1]),r[m]=n)}}for(m=r.length,v=r[m-1];m-- >0;)r[m]=v,v=t[v];return r}const isTeleport=e=>e.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,r,n,a,m){return setupBlock(createBaseVNode(e,t,r,n,a,m,!0))}function createBlock(e,t,r,n,a){return setupBlock(createVNode(e,t,r,n,a,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:r})=>e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!r}:e:null;function createBaseVNode(e,t=null,r=null,n=0,a=null,m=e===Fragment?0:1,v=!1,_=!1){const w={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null};return _?(normalizeChildren(w,r),m&128&&e.normalize(w)):r&&(w.shapeFlag|=isString(r)?8:16),isBlockTreeEnabled>0&&!v&&currentBlock&&(w.patchFlag>0||m&6)&&w.patchFlag!==32&&currentBlock.push(w),w}const createVNode=_createVNode;function _createVNode(e,t=null,r=null,n=0,a=null,m=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const _=cloneVNode(e,t,!0);return r&&normalizeChildren(_,r),isBlockTreeEnabled>0&&!m&&currentBlock&&(_.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=_:currentBlock.push(_)),_.patchFlag|=-2,_}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:_,style:w}=t;_&&!isString(_)&&(t.class=normalizeClass(_)),isObject(w)&&(isProxy(w)&&!isArray(w)&&(w=extend({},w)),t.style=normalizeStyle(w))}const v=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,r,n,a,v,m,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,t,r=!1){const{props:n,ref:a,patchFlag:m,children:v}=e,_=t?mergeProps(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&normalizeKey(_),ref:t&&t.ref?r&&a?isArray(a)?a.concat(normalizeRef(t)):[a,normalizeRef(t)]:normalizeRef(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:v,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?m===-1?16:m|16:m,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(isArray(t))r=16;else if(typeof t=="object")if(n&65){const a=t.default;a&&(a._c&&(a._d=!1),normalizeChildren(e,a()),a._c&&(a._d=!0));return}else{r=32;const a=t._;!a&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:a===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},r=32):(t=String(t),n&64?(r=16,t=[createTextVNode(t)]):r=8);e.children=t,e.shapeFlag|=r}function mergeProps(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const a in n)if(a==="class")t.class!==n.class&&(t.class=normalizeClass([t.class,n.class]));else if(a==="style")t.style=normalizeStyle([t.style,n.style]);else if(isOn(a)){const m=t[a],v=n[a];v&&m!==v&&!(isArray(m)&&m.includes(v))&&(t[a]=m?[].concat(m,v):v)}else a!==""&&(t[a]=n[a])}return t}function invokeVNodeHook(e,t,r,n=null){callWithAsyncErrorHandling(e,t,7,[r,n])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(e,t,r){const n=e.type,a=(t?t.appContext:e.appContext)||emptyAppContext,m={uid:uid$1++,vnode:e,type:n,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,a),emitsOptions:normalizeEmitsOptions(n,a),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=t?t.root:m,m.emit=emit$1.bind(null,m),e.ce&&e.ce(m),m}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:r,children:n}=e.vnode,a=isStatefulComponent(e);initProps(e,r,a,t),initSlots(e,n);const m=a?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,m}function setupStatefulComponent(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:n}=r;if(n){const a=e.setupContext=n.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const m=callWithErrorHandling(n,e,0,[e.props,a]);if(resetTracking(),unsetCurrentInstance(),isPromise(m)){if(m.then(unsetCurrentInstance,unsetCurrentInstance),t)return m.then(v=>{handleSetupResult(e,v,t)}).catch(v=>{handleError(v,e,0)});e.asyncDep=m}else handleSetupResult(e,m,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,r){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,r)}let compile;function finishComponentSetup(e,t,r){const n=e.type;if(!e.render){if(!t&&compile&&!n.render){const a=n.template;if(a){const{isCustomElement:m,compilerOptions:v}=e.appContext.config,{delimiters:_,compilerOptions:w}=n,u=extend(extend({isCustomElement:m,delimiters:_},v),w);n.render=compile(a,u)}}e.render=n.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(t,r){return track(e,"get","$attrs"),t[r]}})}function createSetupContext(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)}}))}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function withAsyncContext(e){const t=getCurrentInstance();let r=e();return unsetCurrentInstance(),isPromise(r)&&(r=r.catch(n=>{throw setCurrentInstance(t),n})),[r,()=>setCurrentInstance(t)]}const version="3.2.37",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const a=t?doc.createElementNS(svgNS,e):doc.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,a,m){const v=r?r.previousSibling:t.lastChild;if(a&&(a===m||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),r),!(a===m||!(a=a.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${e}</svg>`:e;const _=templateContainer.content;if(n){const w=_.firstChild;for(;w.firstChild;)_.appendChild(w.firstChild);_.removeChild(w)}t.insertBefore(_,r)}return[v?v.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function patchClass(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,r){const n=e.style,a=isString(r);if(r&&!a){for(const m in r)setStyle(n,m,r[m]);if(t&&!isString(t))for(const m in t)r[m]==null&&setStyle(n,m,"")}else{const m=n.display;a?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=m)}}const importantRE=/\s*!important$/;function setStyle(e,t,r){if(isArray(r))r.forEach(n=>setStyle(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=autoPrefix(e,t);importantRE.test(r)?e.setProperty(hyphenate(n),r.replace(importantRE,""),"important"):e[n]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const r=prefixCache[t];if(r)return r;let n=camelize(t);if(n!=="filter"&&n in e)return prefixCache[t]=n;n=capitalize(n);for(let a=0;a<prefixes.length;a++){const m=prefixes[a]+n;if(m in e)return prefixCache[t]=m}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,r,n,a){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,r);else{const m=isSpecialBooleanAttr(t);r==null||m&&!includeBooleanAttr(r)?e.removeAttribute(t):e.setAttribute(t,m?"":r)}}function patchDOMProp(e,t,r,n,a,m,v){if(t==="innerHTML"||t==="textContent"){n&&v(n,a,m),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const w=r==null?"":r;(e.value!==w||e.tagName==="OPTION")&&(e.value=w),r==null&&e.removeAttribute(t);return}let _=!1;if(r===""||r==null){const w=typeof e[t];w==="boolean"?r=includeBooleanAttr(r):r==null&&w==="string"?(r="",_=!0):w==="number"&&(r=0,_=!0)}try{e[t]=r}catch{}_&&e.removeAttribute(t)}const[_getNow,skipTimestampCheck]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let cachedNow=0;const p=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p.then(reset),cachedNow=_getNow());function addEventListener(e,t,r,n){e.addEventListener(t,r,n)}function removeEventListener(e,t,r,n){e.removeEventListener(t,r,n)}function patchEvent(e,t,r,n,a=null){const m=e._vei||(e._vei={}),v=m[t];if(n&&v)v.value=n;else{const[_,w]=parseName(t);if(n){const u=m[t]=createInvoker(n,a);addEventListener(e,_,u,w)}else v&&(removeEventListener(e,_,v,w),m[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let r;for(;r=e.match(optionsModifierRE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[hyphenate(e.slice(2)),t]}function createInvoker(e,t){const r=n=>{const a=n.timeStamp||_getNow();(skipTimestampCheck||a>=r.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(n,r.value),t,5,[n])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,t){if(isArray(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>a=>!a._stopped&&n&&n(a))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,r,n,a=!1,m,v,_,w)=>{t==="class"?patchClass(e,n,a):t==="style"?patchStyle(e,r,n):isOn(t)?isModelListener(t)||patchEvent(e,t,r,n,v):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,n,a))?patchDOMProp(e,t,n,m,v,_,w):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),patchAttr(e,t,n,a))};function shouldSetAsProp(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString(r)?!1:t in e}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray(t)?r=>invokeArrayFns(t,r):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:r,number:n}},a){e._assign=getModelAssigner(a);const m=n||a.props&&a.props.type==="number";addEventListener(e,t?"change":"input",v=>{if(v.target.composing)return;let _=e.value;r&&(_=_.trim()),m&&(_=toNumber(_)),e._assign(_)}),r&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:a}},m){if(e._assign=getModelAssigner(m),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(a||e.type==="number")&&toNumber(e.value)===t))return;const v=t==null?"":t;e.value!==v&&(e.value=v)}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(r=>e[`${r}Key`]&&!t.includes(r))},withModifiers=(e,t)=>(r,...n)=>{for(let a=0;a<t.length;a++){const m=modifierGuards[t[a]];if(m&&m(r,t))return}return e(r,...n)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>r=>{if(!("key"in r))return;const n=hyphenate(r.key);if(t.some(a=>a===n||keyNames[a]===n))return e(r)},vShow={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),setDisplay(e,!0),n.enter(e)):n.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:r}=t;return t.mount=n=>{const a=normalizeContainer(n);if(!a)return;const m=t._component;!isFunction(m)&&!m.render&&!m.template&&(m.template=a.innerHTML),a.innerHTML="";const v=r(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),v},t};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const style$1="",style="",VideoComponent_vue_vue_type_style_index_0_lang="",_export_sfc=(e,t)=>{const r=e.__vccOpts||e;for(const[n,a]of t)r[n]=a;return r},_sfc_main$8={name:"VideoComponent",props:["setIsOpen","isBlackTheme","url","top","right","type","typeOfContent","width","height","videoWidth","videoHeight"],data(){return{isActive:!1,isPlayBtn:!0,speedValue:1,handleId:"handle-id"}},computed:{player(){return this.$refs.videoElem},progressBar(){return this.$refs.progressBar}},mounted(){["timeupdate","volumechange","seeked","loadedmetadata"].map(t=>{this.$refs.videoElem.addEventListener(t,()=>{this.$forceUpdate()})}),this.$refs.videoElem.addEventListener("loadedmetadata",()=>{this.$refs.videoElem.volume=0,this.$forceUpdate()})},methods:{playPauseVideo(){this.player.paused||this.player.ended?(this.isPlayBtn=!1,this.player.play()):(this.player.pause(),this.isPlayBtn=!0)},endedVideo(){this.isPlayBtn=!0},progressPercentage(){return this.currentTime()/this.duration()*100},skipVideo(e){const t=e.currentTarget.getBoundingClientRect().left,n=(e.clientX-t)/e.currentTarget.getBoundingClientRect().width*100,a=this.duration()/100*n;this.$refs.videoElem.currentTime=a},updateProgressBar(){const e=Math.floor(100/this.player.duration*this.player.currentTime);this.progressBar.value=e,this.progressBar.innerHTML=`${e}% played`},resetPlayer(){this.player.currentTime=0},toEndVideo(){this.player.currentTime=this.player.duration},toPreviousFrame(){this.player.currentTime=this.player.currentTime-1},toNextFrame(){this.player.currentTime=this.player.currentTime+1},replayVideo(){this.isActive=!this.isActive,this.isActive?this.player.loop=!0:this.player.loop=!1},currentTime(){var e;return((e=this.$refs.videoElem)==null?void 0:e.currentTime)||0},duration(){var e;return((e=this.$refs.videoElem)==null?void 0:e.duration)||0},formatTime(e){if(!e||!parseInt(e))return"00:00";let t,r,n;return r=Math.floor(e/60%60),n=Math.floor(e%60),t=Math.floor(e/60/60),r<10&&(r=`0${r}`),n<10&&(n=`0${n}`),`${t?`${t}:`:""}${r}:${n}`},speedUp(e){e===.5&&(this.player.playbackRate=.5),e===1&&(this.player.playbackRate=1),e===2&&(this.player.playbackRate=2),e===4&&(this.player.playbackRate=4),e>4&&(this.player.playbackRate=.5)},changeSpeed(){this.speedValue<4?(this.speedValue*=2,this.speedUp(this.speedValue)):(this.speedValue=.5,this.speedUp(this.speedValue))}}},_hoisted_1$g={class:"video-box"},_hoisted_2$f=["src","type"],_hoisted_3$e={id:"controls"},_hoisted_4$5={class:"counters"},_hoisted_5$1={class:"currentTime"},_hoisted_6$1={class:"totalTime"},_hoisted_7$1={id:"progress-bar",ref:"progressBar",class:"progressBar",max:"100",min:"0",value:"0"},_hoisted_8$1={class:"row"},_hoisted_9$1={class:"wrap"},_hoisted_10$1={class:"buttons"};function _sfc_render(e,t,r,n,a,m){return openBlock(),createElementBlock("div",{id:"player",ref:a.handleId},[createBaseVNode("div",_hoisted_1$g,[createBaseVNode("video",{id:"video-element",ref:"videoElem",class:"videoContainer",onEnded:t[0]||(t[0]=v=>m.endedVideo()),onTimeupdate:t[1]||(t[1]=v=>m.updateProgressBar())},[createBaseVNode("source",{src:r.url,type:r.type},null,8,_hoisted_2$f)],544)]),createBaseVNode("div",_hoisted_3$e,[createBaseVNode("div",_hoisted_4$5,[createBaseVNode("div",_hoisted_5$1,toDisplayString(m.formatTime(m.currentTime())),1),createBaseVNode("div",_hoisted_6$1,toDisplayString(m.formatTime(m.duration())),1)]),createBaseVNode("div",{class:"wrapperProgressbar",onClick:t[2]||(t[2]=v=>m.skipVideo(v))},[createBaseVNode("progress",_hoisted_7$1," 0% played ",512)]),createBaseVNode("div",_hoisted_8$1,[createBaseVNode("div",_hoisted_9$1,[createBaseVNode("button",{id:"btnReplay",class:normalizeClass([{active:a.isActive},"icon-dl-replay btnReplay"]),onClick:t[3]||(t[3]=v=>m.replayVideo())},null,2),createBaseVNode("span",{onClick:t[4]||(t[4]=v=>m.changeSpeed())},"x"+toDisplayString(a.speedValue),1)]),createBaseVNode("div",_hoisted_10$1,[createBaseVNode("button",{id:"btnStart",class:"icon-dl-back",onClick:t[5]||(t[5]=v=>m.resetPlayer())}),createBaseVNode("button",{id:"btnPrevious",class:"icon-dl-back-frame",onClick:t[6]||(t[6]=v=>m.toPreviousFrame())}),a.isPlayBtn?(openBlock(),createElementBlock("button",{key:0,id:"btnPlay",class:"icon-dl-play",onClick:t[7]||(t[7]=v=>m.playPauseVideo())})):(openBlock(),createElementBlock("button",{key:1,id:"btnPause",class:"icon-dl-pause",onClick:t[8]||(t[8]=v=>m.playPauseVideo())})),createBaseVNode("button",{id:"btnNext",class:"icon-dl-next-frame",onClick:t[9]||(t[9]=v=>m.toNextFrame())}),createBaseVNode("button",{id:"btnEnd",class:"icon-dl-next",onClick:t[10]||(t[10]=v=>m.toEndVideo())})])])])],512)}const VideoComponent=_export_sfc(_sfc_main$8,[["render",_sfc_render]]),_hoisted_1$f={key:0,class:"imageContainer"},_hoisted_2$e=["src"],_hoisted_3$d={key:1,class:"content"},_sfc_main$7=defineComponent({__name:"ImageComponent",props:["setIsOpen","isBlackTheme","url","loading","top","right","width","height","imgWidth","imgHeight"],setup(e){return(t,r)=>(openBlock(),createElementBlock(Fragment,null,[!e.loading&&e.url.length?(openBlock(),createElementBlock("div",_hoisted_1$f,[createBaseVNode("img",{ref:"imgElem",src:e.url},null,8,_hoisted_2$e)])):createCommentVNode("",!0),e.url.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_3$d,"No media found"))],64))}}),ImageComponent_vue_vue_type_style_index_0_lang="",_hoisted_1$e={class:"w-32 p-2 space-y-1"},_hoisted_2$d=["data-page","onClick"],_hoisted_3$c={class:"title text-xs font-medium text-gray-400"},_sfc_main$6=defineComponent({__name:"PDFSidebar",async setup(e){let t,r;const n="123px",a=inject("pdfLinkService"),m=inject("pdf"),v=inject("eventBus"),_=toRaw(m.value).getPage(1),w=ref(null);[t,r]=withAsyncContext(()=>_.then(y=>{w.value=y.getViewport({scale:1})})),await t,r();const u=ref((a==null?void 0:a.page)||1),c=ref(null),O=ref(null),k=ref(null),T=async y=>{const{dataset:{page:g}}=y.target,S=await toRaw(m.value).getPage(parseInt(g)),M=document.createElement("canvas"),R={canvasContext:M.getContext("2d",{alpha:!1}),viewport:toRaw(w.value)};M.height=toRaw(w.value).height,M.width=toRaw(w.value).width,S.render(R).promise.then(()=>{const h=M.toDataURL(),I=document.createElement("img");I.src=h,O.value[parseInt(g)-1].firstChild.src=h,M.width=0,M.height=0})},l=(y,g)=>{y.forEach(S=>{if(S.isIntersecting){const{dataset:{pageLoaded:M}}=S.target;JSON.parse(M)||(S.target.setAttribute("data-page-loaded","true"),T(S))}})},d=()=>{const y={root:c.value,rootMargin:"0px",threshold:0};k.value=new IntersectionObserver(l,y);for(let g=0;g<m.value.numPages;g++)k.value.observe(toRaw(O.value[g]))},b=y=>{a.goToPage(y),u.value=y},C=y=>{O.value[y].scrollIntoView()};return onMounted(()=>{d(),v.on("pagechanging",async({pageNumber:y})=>{await nextTick(),y!==u.value&&(u.value=y,C(y-1))})}),(y,g)=>{var S;return openBlock(),createElementBlock("aside",{ref_key:"sidebarRef",ref:c,class:"pdf__sidebar bg-[#f9fbfc] overflow-auto"},[createBaseVNode("div",_hoisted_1$e,[(openBlock(!0),createElementBlock(Fragment,null,renderList((S=unref(m))==null?void 0:S.numPages,M=>(openBlock(),createElementBlock("button",{ref_for:!0,ref_key:"thumbsRef",ref:O,key:M,"data-page":M,"data-page-loaded":!1,class:normalizeClass(["w-full rounded p-2 thumbWrapper",[M===u.value?"active":""]]),onClick:withModifiers(P=>b(M),["stop","prevent"])},[createBaseVNode("img",{class:"w-full thumb-img border border-gray-200 rounded my-1",style:normalizeStyle({minHeight:n})},null,4),createBaseVNode("p",_hoisted_3$c,"Page "+toDisplayString(M),1)],10,_hoisted_2$d))),128))])],512)}}}),PDFSidebar_vue_vue_type_style_index_0_scoped_4395eca9_lang="",__unplugin_components_0$2=_export_sfc(_sfc_main$6,[["__scopeId","data-v-4395eca9"]]);function getAugmentedNamespace(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var pdf_viewer={exports:{}};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(t,r){module.exports=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var De;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=X,t.bytesToString=x,t.createValidAbsoluteUrl=Se,t.getModificationDate=Pe,t.getVerbosityLevel=ae,t.info=le,t.isArrayBuffer=ve,t.isArrayEqual=Ce,t.normalizeUnicode=Me,t.objectFromMap=L,t.objectSize=E,t.setVerbosityLevel=ue,t.shadow=ee,t.string32=o,t.stringToBytes=i,t.stringToPDFString=Y,t.stringToUTF8String=re,t.unreachable=Ae,t.utf8StringToString=pe,t.warn=_e;const r=[1,0,0,1,0,0];t.IDENTITY_MATRIX=r;const n=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=n;const a=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=a;const m=1.35;t.LINE_FACTOR=m;const v=.35;t.LINE_DESCENT_FACTOR=v;const _=v/m;t.BASELINE_FACTOR=_;const w={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=w;const u={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=u;const c="pdfjs_internal_editor_";t.AnnotationEditorPrefix=c;const O={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=O;const k={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=k;const T={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=T;const l={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=l;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=d;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=b;const C={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=C;const y={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=y;const g={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=g;const S={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=S;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=M;const P={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=P;const R={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=R;const s={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=s;const h={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=h;const I={O:"PageOpen",C:"PageClose"};t.PageActionEventType=I;const f={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=f;const B={NONE:0,BINARY:1};t.CMapCompressionType=B;const q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=q;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=G;let Q=f.WARNINGS;function ue(V){Number.isInteger(V)&&(Q=V)}function ae(){return Q}function le(V){Q>=f.INFOS&&console.log(`Info: ${V}`)}function _e(V){Q>=f.WARNINGS&&console.log(`Warning: ${V}`)}function Ae(V){throw new Error(V)}function X(V,F){V||Ae(F)}function Ee(V){switch(V==null?void 0:V.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Se(V,F=null,U=null){if(!V)return null;try{if(U&&typeof V=="string"){if(U.addDefaultProtocol&&V.startsWith("www.")){const me=V.match(/\./g);(me==null?void 0:me.length)>=2&&(V=`http://${V}`)}if(U.tryConvertEncoding)try{V=re(V)}catch{}}const ce=F?new URL(V,F):new URL(V);if(Ee(ce))return ce}catch{}return null}function ee(V,F,U,ce=!1){return Object.defineProperty(V,F,{value:U,enumerable:!ce,configurable:!0,writable:!1}),U}const N=function(){function F(U,ce){this.constructor===F&&Ae("Cannot initialize BaseException."),this.message=U,this.name=ce}return F.prototype=new Error,F.constructor=F,F}();t.BaseException=N;class H extends N{constructor(F,U){super(F,"PasswordException"),this.code=U}}t.PasswordException=H;class W extends N{constructor(F,U){super(F,"UnknownErrorException"),this.details=U}}t.UnknownErrorException=W;class ne extends N{constructor(F){super(F,"InvalidPDFException")}}t.InvalidPDFException=ne;class J extends N{constructor(F){super(F,"MissingPDFException")}}t.MissingPDFException=J;class he extends N{constructor(F,U){super(F,"UnexpectedResponseException"),this.status=U}}t.UnexpectedResponseException=he;class Z extends N{constructor(F){super(F,"FormatError")}}t.FormatError=Z;class K extends N{constructor(F){super(F,"AbortException")}}t.AbortException=K;function x(V){(typeof V!="object"||(V==null?void 0:V.length)===void 0)&&Ae("Invalid argument for bytesToString");const F=V.length,U=8192;if(F<U)return String.fromCharCode.apply(null,V);const ce=[];for(let me=0;me<F;me+=U){const fe=Math.min(me+U,F),ge=V.subarray(me,fe);ce.push(String.fromCharCode.apply(null,ge))}return ce.join("")}function i(V){typeof V!="string"&&Ae("Invalid argument for stringToBytes");const F=V.length,U=new Uint8Array(F);for(let ce=0;ce<F;++ce)U[ce]=V.charCodeAt(ce)&255;return U}function o(V){return String.fromCharCode(V>>24&255,V>>16&255,V>>8&255,V&255)}function E(V){return Object.keys(V).length}function L(V){const F=Object.create(null);for(const[U,ce]of V)F[U]=ce;return F}function D(){const V=new Uint8Array(4);return V[0]=1,new Uint32Array(V.buffer,0,1)[0]===1}function z(){try{return new Function(""),!0}catch{return!1}}class ie{static get isLittleEndian(){return ee(this,"isLittleEndian",D())}static get isEvalSupported(){return ee(this,"isEvalSupported",z())}static get isOffscreenCanvasSupported(){return ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?ee(this,"platform",{isWin:!1,isMac:!1}):ee(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=ie;const j=[...Array(256).keys()].map(V=>V.toString(16).padStart(2,"0"));class ${static makeHexColor(F,U,ce){return`#${j[F]}${j[U]}${j[ce]}`}static scaleMinMax(F,U){let ce;F[0]?(F[0]<0&&(ce=U[0],U[0]=U[1],U[1]=ce),U[0]*=F[0],U[1]*=F[0],F[3]<0&&(ce=U[2],U[2]=U[3],U[3]=ce),U[2]*=F[3],U[3]*=F[3]):(ce=U[0],U[0]=U[2],U[2]=ce,ce=U[1],U[1]=U[3],U[3]=ce,F[1]<0&&(ce=U[2],U[2]=U[3],U[3]=ce),U[2]*=F[1],U[3]*=F[1],F[2]<0&&(ce=U[0],U[0]=U[1],U[1]=ce),U[0]*=F[2],U[1]*=F[2]),U[0]+=F[4],U[1]+=F[4],U[2]+=F[5],U[3]+=F[5]}static transform(F,U){return[F[0]*U[0]+F[2]*U[1],F[1]*U[0]+F[3]*U[1],F[0]*U[2]+F[2]*U[3],F[1]*U[2]+F[3]*U[3],F[0]*U[4]+F[2]*U[5]+F[4],F[1]*U[4]+F[3]*U[5]+F[5]]}static applyTransform(F,U){const ce=F[0]*U[0]+F[1]*U[2]+U[4],me=F[0]*U[1]+F[1]*U[3]+U[5];return[ce,me]}static applyInverseTransform(F,U){const ce=U[0]*U[3]-U[1]*U[2],me=(F[0]*U[3]-F[1]*U[2]+U[2]*U[5]-U[4]*U[3])/ce,fe=(-F[0]*U[1]+F[1]*U[0]+U[4]*U[1]-U[5]*U[0])/ce;return[me,fe]}static getAxialAlignedBoundingBox(F,U){const ce=$.applyTransform(F,U),me=$.applyTransform(F.slice(2,4),U),fe=$.applyTransform([F[0],F[3]],U),ge=$.applyTransform([F[2],F[1]],U);return[Math.min(ce[0],me[0],fe[0],ge[0]),Math.min(ce[1],me[1],fe[1],ge[1]),Math.max(ce[0],me[0],fe[0],ge[0]),Math.max(ce[1],me[1],fe[1],ge[1])]}static inverseTransform(F){const U=F[0]*F[3]-F[1]*F[2];return[F[3]/U,-F[1]/U,-F[2]/U,F[0]/U,(F[2]*F[5]-F[4]*F[3])/U,(F[4]*F[1]-F[5]*F[0])/U]}static singularValueDecompose2dScale(F){const U=[F[0],F[2],F[1],F[3]],ce=F[0]*U[0]+F[1]*U[2],me=F[0]*U[1]+F[1]*U[3],fe=F[2]*U[0]+F[3]*U[2],ge=F[2]*U[1]+F[3]*U[3],be=(ce+ge)/2,we=Math.sqrt((ce+ge)**2-4*(ce*ge-fe*me))/2,Re=be+we||1,Te=be-we||1;return[Math.sqrt(Re),Math.sqrt(Te)]}static normalizeRect(F){const U=F.slice(0);return F[0]>F[2]&&(U[0]=F[2],U[2]=F[0]),F[1]>F[3]&&(U[1]=F[3],U[3]=F[1]),U}static intersect(F,U){const ce=Math.max(Math.min(F[0],F[2]),Math.min(U[0],U[2])),me=Math.min(Math.max(F[0],F[2]),Math.max(U[0],U[2]));if(ce>me)return null;const fe=Math.max(Math.min(F[1],F[3]),Math.min(U[1],U[3])),ge=Math.min(Math.max(F[1],F[3]),Math.max(U[1],U[3]));return fe>ge?null:[ce,fe,me,ge]}static bezierBoundingBox(F,U,ce,me,fe,ge,be,we){const Re=[],Te=[[],[]];let Le,Oe,Ie,Fe,Be,He,Ne,je;for(let Ge=0;Ge<2;++Ge){if(Ge===0?(Oe=6*F-12*ce+6*fe,Le=-3*F+9*ce-9*fe+3*be,Ie=3*ce-3*F):(Oe=6*U-12*me+6*ge,Le=-3*U+9*me-9*ge+3*we,Ie=3*me-3*U),Math.abs(Le)<1e-12){if(Math.abs(Oe)<1e-12)continue;Fe=-Ie/Oe,0<Fe&&Fe<1&&Re.push(Fe);continue}Ne=Oe*Oe-4*Ie*Le,je=Math.sqrt(Ne),!(Ne<0)&&(Be=(-Oe+je)/(2*Le),0<Be&&Be<1&&Re.push(Be),He=(-Oe-je)/(2*Le),0<He&&He<1&&Re.push(He))}let Ve=Re.length,Ue;const We=Ve;for(;Ve--;)Fe=Re[Ve],Ue=1-Fe,Te[0][Ve]=Ue*Ue*Ue*F+3*Ue*Ue*Fe*ce+3*Ue*Fe*Fe*fe+Fe*Fe*Fe*be,Te[1][Ve]=Ue*Ue*Ue*U+3*Ue*Ue*Fe*me+3*Ue*Fe*Fe*ge+Fe*Fe*Fe*we;return Te[0][We]=F,Te[1][We]=U,Te[0][We+1]=be,Te[1][We+1]=we,Te[0].length=Te[1].length=We+2,[Math.min(...Te[0]),Math.min(...Te[1]),Math.max(...Te[0]),Math.max(...Te[1])]}}t.Util=$;const se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Y(V){if(V[0]>="\xEF"){let U;if(V[0]==="\xFE"&&V[1]==="\xFF"?U="utf-16be":V[0]==="\xFF"&&V[1]==="\xFE"?U="utf-16le":V[0]==="\xEF"&&V[1]==="\xBB"&&V[2]==="\xBF"&&(U="utf-8"),U)try{const ce=new TextDecoder(U,{fatal:!0}),me=i(V);return ce.decode(me)}catch(ce){_e(`stringToPDFString: "${ce}".`)}}const F=[];for(let U=0,ce=V.length;U<ce;U++){const me=se[V.charCodeAt(U)];F.push(me?String.fromCharCode(me):V.charAt(U))}return F.join("")}function re(V){return decodeURIComponent(escape(V))}function pe(V){return unescape(encodeURIComponent(V))}function ve(V){return typeof V=="object"&&(V==null?void 0:V.byteLength)!==void 0}function Ce(V,F){if(V.length!==F.length)return!1;for(let U=0,ce=V.length;U<ce;U++)if(V[U]!==F[U])return!1;return!0}function Pe(V=new Date){return[V.getUTCFullYear().toString(),(V.getUTCMonth()+1).toString().padStart(2,"0"),V.getUTCDate().toString().padStart(2,"0"),V.getUTCHours().toString().padStart(2,"0"),V.getUTCMinutes().toString().padStart(2,"0"),V.getUTCSeconds().toString().padStart(2,"0")].join("")}class ke{constructor(){te(this,De,!1);this.promise=new Promise((F,U)=>{this.resolve=ce=>{ye(this,De,!0),F(ce)},this.reject=ce=>{ye(this,De,!0),U(ce)}})}get settled(){return A(this,De)}}De=new WeakMap,t.PromiseCapability=ke;let de=null,xe=null;function Me(V){return de||(de=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xe=new Map([["\uFB05","\u017Ft"]])),V.replaceAll(de,(F,U,ce)=>U?U.normalize("NFKC"):xe.get(ce))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,r,n,a,st,v,_t,w,u,c,O,k,T,l,d,kt,C,y,Rt,S,M;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:R,NodeCMapReaderFactory:s,NodeFilterFactory:h,NodeStandardFontDataFactory:I}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=R,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultFilterFactory=DefaultFilterFactory=h,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=I}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:R}=__w_pdfjs_require__(21);createPDFNetworkStream=s=>new R(s)}else{const{PDFNetworkStream:R}=__w_pdfjs_require__(24),{PDFFetchStream:s}=__w_pdfjs_require__(25);createPDFNetworkStream=h=>(0,_display_utils.isValidFetchUrl)(h.url)?new s(h):new R(h)}function getDocument(R){var ve,Ce;if(typeof R=="string"||R instanceof URL?R={url:R}:(0,_util.isArrayBuffer)(R)&&(R={data:R}),typeof R!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!R.url&&!R.data&&!R.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:h}=s,I=R.url?getUrlProp(R.url):null,f=R.data?getDataProp(R.data):null,B=R.httpHeaders||null,q=R.withCredentials===!0,G=(ve=R.password)!=null?ve:null,Q=R.range instanceof PDFDataRangeTransport?R.range:null,ue=Number.isInteger(R.rangeChunkSize)&&R.rangeChunkSize>0?R.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let ae=R.worker instanceof PDFWorker?R.worker:null;const le=R.verbosity,_e=typeof R.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(R.docBaseUrl)?R.docBaseUrl:null,Ae=typeof R.cMapUrl=="string"?R.cMapUrl:null,X=R.cMapPacked!==!1,Ee=R.CMapReaderFactory||DefaultCMapReaderFactory,Se=typeof R.standardFontDataUrl=="string"?R.standardFontDataUrl:null,ee=R.StandardFontDataFactory||DefaultStandardFontDataFactory,N=R.stopAtErrors!==!0,H=Number.isInteger(R.maxImageSize)&&R.maxImageSize>-1?R.maxImageSize:-1,W=R.isEvalSupported!==!1,ne=typeof R.isOffscreenCanvasSupported=="boolean"?R.isOffscreenCanvasSupported:!_is_node.isNodeJS,J=Number.isInteger(R.canvasMaxAreaInBytes)?R.canvasMaxAreaInBytes:-1,he=typeof R.disableFontFace=="boolean"?R.disableFontFace:_is_node.isNodeJS,Z=R.fontExtraProperties===!0,K=R.enableXfa===!0,x=R.ownerDocument||globalThis.document,i=R.disableRange===!0,o=R.disableStream===!0,E=R.disableAutoFetch===!0,L=R.pdfBug===!0,D=Q?Q.length:(Ce=R.length)!=null?Ce:NaN,z=typeof R.useSystemFonts=="boolean"?R.useSystemFonts:!_is_node.isNodeJS&&!he,ie=typeof R.useWorkerFetch=="boolean"?R.useWorkerFetch:Ee===_display_utils.DOMCMapReaderFactory&&ee===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(Ae,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Se,document.baseURI),j=R.canvasFactory||new DefaultCanvasFactory({ownerDocument:x}),$=R.filterFactory||new DefaultFilterFactory({docId:h,ownerDocument:x}),se=null;(0,_util.setVerbosityLevel)(le);const Y={canvasFactory:j,filterFactory:$};if(ie||(Y.cMapReaderFactory=new Ee({baseUrl:Ae,isCompressed:X}),Y.standardFontDataFactory=new ee({baseUrl:Se})),!ae){const Pe={verbosity:le,port:_worker_options.GlobalWorkerOptions.workerPort};ae=Pe.port?PDFWorker.fromPort(Pe):new PDFWorker(Pe),s._worker=ae}const re={docId:h,apiVersion:"3.6.172",data:f,password:G,disableAutoFetch:E,rangeChunkSize:ue,length:D,docBaseUrl:_e,enableXfa:K,evaluatorOptions:{maxImageSize:H,disableFontFace:he,ignoreErrors:N,isEvalSupported:W,isOffscreenCanvasSupported:ne,canvasMaxAreaInBytes:J,fontExtraProperties:Z,useSystemFonts:z,cMapUrl:ie?Ae:null,standardFontDataUrl:ie?Se:null}},pe={ignoreErrors:N,isEvalSupported:W,disableFontFace:he,fontExtraProperties:Z,enableXfa:K,ownerDocument:x,disableAutoFetch:E,pdfBug:L,styleElement:se};return ae.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const Pe=_fetchDocument(ae,re),ke=new Promise(function(de){let xe;Q?xe=new _transport_stream.PDFDataTransportStream({length:D,initialData:Q.initialData,progressiveDone:Q.progressiveDone,contentDispositionFilename:Q.contentDispositionFilename,disableRange:i,disableStream:o},Q):f||(xe=createPDFNetworkStream({url:I,length:D,httpHeaders:B,withCredentials:q,rangeChunkSize:ue,disableRange:i,disableStream:o})),de(xe)});return Promise.all([Pe,ke]).then(function([de,xe]){if(s.destroyed)throw new Error("Loading aborted");const Me=new _message_handler.MessageHandler(h,de,ae.port),De=new WorkerTransport(Me,s,xe,pe,Y);s._transport=De,Me.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(R,s){if(R.destroyed)throw new Error("Worker was destroyed");const h=await R.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(R.destroyed)throw new Error("Worker was destroyed");return h}function getUrlProp(R){if(R instanceof URL)return R.href;try{return new URL(R,window.location).href}catch{if(_is_node.isNodeJS&&typeof R=="string")return R}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(R){if(_is_node.isNodeJS&&typeof Buffer<"u"&&R instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(R);if(R instanceof Uint8Array&&R.byteLength===R.buffer.byteLength)return R;if(typeof R=="string")return(0,_util.stringToBytes)(R);if(typeof R=="object"&&!isNaN(R==null?void 0:R.length)||(0,_util.isArrayBuffer)(R))return new Uint8Array(R);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ct(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;e=new WeakMap,te(PDFDocumentLoadingTask,e,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,h,I=!1,f=null){this.length=s,this.initialData=h,this.progressiveDone=I,this.contentDispositionFilename=f,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,h){for(const I of this._rangeListeners)I(s,h)}onDataProgress(s,h){this._readyCapability.promise.then(()=>{for(const I of this._progressListeners)I(s,h)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const h of this._progressiveReadListeners)h(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,h){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,h){this._pdfInfo=s,this._transport=h}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,h,I,f=!1){te(this,a);te(this,v);te(this,r,null);te(this,n,!1);this._pageIndex=s,this._pageInfo=h,this._transport=I,this._stats=f?new _display_utils.StatTimer:null,this._pdfBug=f,this.commonObjs=I.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:h=this.rotate,offsetX:I=0,offsetY:f=0,dontFlip:B=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:h,offsetX:I,offsetY:f,dontFlip:B})}getAnnotations({intent:s="display"}={}){const h=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,h.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:h,intent:I="display",annotationMode:f=_util.AnnotationMode.ENABLE,transform:B=null,background:q=null,optionalContentConfigPromise:G=null,annotationCanvasMap:Q=null,pageColors:ue=null,printAnnotationStorage:ae=null}){var ee,N,H;if((ee=arguments[0])!=null&&ee.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(N=this._stats)==null||N.time("Overall");const le=this._transport.getRenderingIntent(I,f,ae);ye(this,n,!1),oe(this,v,_t).call(this),G||(G=this._transport.getOptionalContentConfig());let _e=this._intentStates.get(le.cacheKey);_e||(_e=Object.create(null),this._intentStates.set(le.cacheKey,_e)),_e.streamReaderCancelTimeout&&(clearTimeout(_e.streamReaderCancelTimeout),_e.streamReaderCancelTimeout=null);const Ae=!!(le.renderingIntent&_util.RenderingIntentFlag.PRINT);_e.displayReadyCapability||(_e.displayReadyCapability=new _util.PromiseCapability,_e.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(H=this._stats)==null||H.time("Page Request"),this._pumpOperatorList(le));const X=W=>{var ne,J;_e.renderTasks.delete(Ee),(this._maybeCleanupAfterRender||Ae)&&ye(this,n,!0),oe(this,a,st).call(this,!Ae),W?(Ee.capability.reject(W),this._abortOperatorList({intentState:_e,reason:W instanceof Error?W:new Error(W)})):Ee.capability.resolve(),(ne=this._stats)==null||ne.timeEnd("Rendering"),(J=this._stats)==null||J.timeEnd("Overall")},Ee=new InternalRenderTask({callback:X,params:{canvasContext:s,viewport:h,transform:B,background:q},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Q,operatorList:_e.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ae,pdfBug:this._pdfBug,pageColors:ue});(_e.renderTasks||(_e.renderTasks=new Set)).add(Ee);const Se=Ee.task;return Promise.all([_e.displayReadyCapability.promise,G]).then(([W,ne])=>{var J;if(A(this,n)){X();return}(J=this._stats)==null||J.time("Rendering"),Ee.initializeGraphics({transparency:W,optionalContentConfig:ne}),Ee.operatorListChanged()}).catch(X),Se}getOperatorList({intent:s="display",annotationMode:h=_util.AnnotationMode.ENABLE,printAnnotationStorage:I=null}={}){var Q;function f(){q.operatorList.lastChunk&&(q.opListReadCapability.resolve(q.operatorList),q.renderTasks.delete(G))}const B=this._transport.getRenderingIntent(s,h,I,!0);let q=this._intentStates.get(B.cacheKey);q||(q=Object.create(null),this._intentStates.set(B.cacheKey,q));let G;return q.opListReadCapability||(G=Object.create(null),G.operatorListChanged=f,q.opListReadCapability=new _util.PromiseCapability,(q.renderTasks||(q.renderTasks=new Set)).add(G),q.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Q=this._stats)==null||Q.time("Page Request"),this._pumpOperatorList(B)),q.opListReadCapability.promise}streamTextContent({includeMarkedContent:s=!1,disableNormalization:h=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0,disableNormalization:h===!0},{highWaterMark:100,size(f){return f.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(I=>_xfa_text.XfaText.textContent(I));const h=this.streamTextContent(s);return new Promise(function(I,f){function B(){q.read().then(function({value:Q,done:ue}){if(ue){I(G);return}Object.assign(G.styles,Q.styles),G.items.push(...Q.items),B()},f)}const q=h.getReader(),G={items:[],styles:Object.create(null)};B()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const h of this._intentStates.values())if(this._abortOperatorList({intentState:h,reason:new Error("Page was destroyed."),force:!0}),!h.opListReadCapability)for(const I of h.renderTasks)s.push(I.completed),I.cancel();return this.objs.clear(),ye(this,n,!1),oe(this,v,_t).call(this),Promise.all(s)}cleanup(s=!1){ye(this,n,!0);const h=oe(this,a,st).call(this,!1);return s&&h&&this._stats&&(this._stats=new _display_utils.StatTimer),h}_startRenderPage(s,h){var f,B;const I=this._intentStates.get(h);!I||((f=this._stats)==null||f.timeEnd("Page Request"),(B=I.displayReadyCapability)==null||B.resolve(s))}_renderPageChunk(s,h){for(let I=0,f=s.length;I<f;I++)h.operatorList.fnArray.push(s.fnArray[I]),h.operatorList.argsArray.push(s.argsArray[I]);h.operatorList.lastChunk=s.lastChunk,h.operatorList.separateAnnots=s.separateAnnots;for(const I of h.renderTasks)I.operatorListChanged();s.lastChunk&&oe(this,a,st).call(this,!0)}_pumpOperatorList({renderingIntent:s,cacheKey:h,annotationStorageMap:I}){const B=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:h,annotationStorage:I}).getReader(),q=this._intentStates.get(h);q.streamReader=B;const G=()=>{B.read().then(({value:Q,done:ue})=>{if(ue){q.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Q,q),G())},Q=>{if(q.streamReader=null,!this._transport.destroyed){if(q.operatorList){q.operatorList.lastChunk=!0;for(const ue of q.renderTasks)ue.operatorListChanged();oe(this,a,st).call(this,!0)}if(q.displayReadyCapability)q.displayReadyCapability.reject(Q);else if(q.opListReadCapability)q.opListReadCapability.reject(Q);else throw Q}})};G()}_abortOperatorList({intentState:s,reason:h,force:I=!1}){if(!!s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!I){if(s.renderTasks.size>0)return;if(h instanceof _display_utils.RenderingCancelledException){let f=RENDERING_CANCELLED_TIMEOUT;h.extraDelay>0&&h.extraDelay<1e3&&(f+=h.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:h,force:!0})},f);return}}if(s.streamReader.cancel(new _util.AbortException(h.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[f,B]of this._intentStates)if(B===s){this._intentStates.delete(f);break}this.cleanup()}}}get stats(){return this._stats}}r=new WeakMap,n=new WeakMap,a=new WeakSet,st=function(s=!1){if(oe(this,v,_t).call(this),!A(this,n))return!1;if(s)return ye(this,r,setTimeout(()=>{ye(this,r,null),oe(this,a,st).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:h,operatorList:I}of this._intentStates.values())if(h.size>0||!I.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ye(this,n,!1),!0},v=new WeakSet,_t=function(){A(this,r)&&(clearTimeout(A(this,r)),ye(this,r,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){te(this,w,new Set);te(this,u,Promise.resolve())}postMessage(s,h){const I={data:structuredClone(s,h?{transfer:h}:null)};A(this,u).then(()=>{for(const f of A(this,w))f.call(this,I)})}addEventListener(s,h){A(this,w).add(h)}removeEventListener(s,h){A(this,w).delete(h)}terminate(){A(this,w).clear()}}w=new WeakMap,u=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const R=(c=document==null?void 0:document.currentScript)==null?void 0:c.src;R&&(PDFWorkerUtil.fallbackWorkerSrc=R.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(R,s){let h;try{if(h=new URL(R),!h.origin||h.origin==="null")return!1}catch{return!1}const I=new URL(s,h);return h.origin===I.origin},PDFWorkerUtil.createCDNWrapper=function(R){const s=`importScripts("${R}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class{constructor({name:R=null,port:s=null,verbosity:h=(0,_util.getVerbosityLevel)()}={}){if(s&&A(_PDFWorker,O).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=R,this.destroyed=!1,this.verbosity=h,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,s){A(_PDFWorker,O).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(R){this._port=R,this._messageHandler=new _message_handler.MessageHandler("main","worker",R),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:R}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,R)||(R=PDFWorkerUtil.createCDNWrapper(new URL(R,window.location).href));const s=new Worker(R),h=new _message_handler.MessageHandler("main","worker",s),I=()=>{s.removeEventListener("error",f),h.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},f=()=>{this._webWorker||I()};s.addEventListener("error",f),h.on("test",q=>{if(s.removeEventListener("error",f),this.destroyed){I();return}q?(this._messageHandler=h,this._port=s,this._webWorker=s,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),h.destroy(),s.terminate())}),h.on("ready",q=>{if(s.removeEventListener("error",f),this.destroyed){I();return}try{B()}catch{this._setupFakeWorker()}});const B=()=>{const q=new Uint8Array;h.send("test",q,[q.buffer])};B();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(R=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const h=`fake${PDFWorkerUtil.fakeWorkerId++}`,I=new _message_handler.MessageHandler(h+"_worker",h,s);R.setup(I,s);const f=new _message_handler.MessageHandler(h,h+"_worker",s);this._messageHandler=f,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})}).catch(R=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${R.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),A(_PDFWorker,O).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(R){if(!(R!=null&&R.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return A(this,O).has(R.port)?A(this,O).get(R.port):new _PDFWorker(R)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var R;try{return((R=globalThis.pdfjsWorker)==null?void 0:R.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;O=new WeakMap,te(PDFWorker,O,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,h,I,f,B){te(this,d);te(this,k,new Map);te(this,T,new Map);te(this,l,new Map);this.messageHandler=s,this.loadingTask=h,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:f.ownerDocument,styleElement:f.styleElement}),this._params=f,this.canvasFactory=B.canvasFactory,this.filterFactory=B.filterFactory,this.cMapReaderFactory=B.cMapReaderFactory,this.standardFontDataFactory=B.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=I,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,h=_util.AnnotationMode.ENABLE,I=null,f=!1){let B=_util.RenderingIntentFlag.DISPLAY,q=null;switch(s){case"any":B=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":B=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(h){case _util.AnnotationMode.DISABLE:B+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:B+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:B+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,q=(B&_util.RenderingIntentFlag.PRINT&&I instanceof _annotation_storage.PrintAnnotationStorage?I:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${h}`)}return f&&(B+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:B,cacheKey:`${B}_${_annotation_storage.AnnotationStorage.getHash(q)}`,annotationStorageMap:q}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const I of A(this,T).values())s.push(I._destroy());A(this,T).clear(),A(this,l).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const h=this.messageHandler.sendWithPromise("Terminate",null);return s.push(h),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),A(this,k).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:h}=this;s.on("GetReader",(I,f)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=B=>{this._lastProgress={loaded:B.loaded,total:B.total}},f.onPull=()=>{this._fullReader.read().then(function({value:B,done:q}){if(q){f.close();return}(0,_util.assert)(B instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(B),1,[B])}).catch(B=>{f.error(B)})},f.onCancel=B=>{this._fullReader.cancel(B),f.ready.catch(q=>{if(!this.destroyed)throw q})}}),s.on("ReaderHeadersReady",I=>{const f=new _util.PromiseCapability,B=this._fullReader;return B.headersReady.then(()=>{var q;(!B.isStreamingSupported||!B.isRangeSupported)&&(this._lastProgress&&((q=h.onProgress)==null||q.call(h,this._lastProgress)),B.onProgress=G=>{var Q;(Q=h.onProgress)==null||Q.call(h,{loaded:G.loaded,total:G.total})}),f.resolve({isStreamingSupported:B.isStreamingSupported,isRangeSupported:B.isRangeSupported,contentLength:B.contentLength})},f.reject),f.promise}),s.on("GetRangeReader",(I,f)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const B=this._networkStream.getRangeReader(I.begin,I.end);if(!B){f.close();return}f.onPull=()=>{B.read().then(function({value:q,done:G}){if(G){f.close();return}(0,_util.assert)(q instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(q),1,[q])}).catch(q=>{f.error(q)})},f.onCancel=q=>{B.cancel(q),f.ready.catch(G=>{if(!this.destroyed)throw G})}}),s.on("GetDoc",({pdfInfo:I})=>{this._numPages=I.numPages,this._htmlForXfa=I.htmlForXfa,delete I.htmlForXfa,h._capability.resolve(new PDFDocumentProxy(I,this))}),s.on("DocException",function(I){let f;switch(I.name){case"PasswordException":f=new _util.PasswordException(I.message,I.code);break;case"InvalidPDFException":f=new _util.InvalidPDFException(I.message);break;case"MissingPDFException":f=new _util.MissingPDFException(I.message);break;case"UnexpectedResponseException":f=new _util.UnexpectedResponseException(I.message,I.status);break;case"UnknownErrorException":f=new _util.UnknownErrorException(I.message,I.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}h._capability.reject(f)}),s.on("PasswordRequest",I=>{if(this._passwordCapability=new _util.PromiseCapability,h.onPassword){const f=B=>{B instanceof Error?this._passwordCapability.reject(B):this._passwordCapability.resolve({password:B})};try{h.onPassword(f,I.code)}catch(B){this._passwordCapability.reject(B)}}else this._passwordCapability.reject(new _util.PasswordException(I.message,I.code));return this._passwordCapability.promise}),s.on("DataLoaded",I=>{var f;(f=h.onProgress)==null||f.call(h,{loaded:I.length,total:I.length}),this.downloadInfoCapability.resolve(I)}),s.on("StartRenderPage",I=>{if(this.destroyed)return;A(this,T).get(I.pageIndex)._startRenderPage(I.transparency,I.cacheKey)}),s.on("commonobj",([I,f,B])=>{var q;if(!this.destroyed&&!this.commonObjs.has(I))switch(f){case"Font":const G=this._params;if("error"in B){const ae=B.error;(0,_util.warn)(`Error during font loading: ${ae}`),this.commonObjs.resolve(I,ae);break}const Q=G.pdfBug&&((q=globalThis.FontInspector)==null?void 0:q.enabled)?(ae,le)=>globalThis.FontInspector.fontAdded(ae,le):null,ue=new _font_loader.FontFaceObject(B,{isEvalSupported:G.isEvalSupported,disableFontFace:G.disableFontFace,ignoreErrors:G.ignoreErrors,inspectFont:Q});this.fontLoader.bind(ue).catch(ae=>s.sendWithPromise("FontFallback",{id:I})).finally(()=>{!G.fontExtraProperties&&ue.data&&(ue.data=null),this.commonObjs.resolve(I,ue)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(I,B);break;default:throw new Error(`Got unknown common object type ${f}`)}}),s.on("obj",([I,f,B,q])=>{var Q;if(this.destroyed)return;const G=A(this,T).get(f);if(!G.objs.has(I))switch(B){case"Image":if(G.objs.resolve(I,q),q){let ue;if(q.bitmap){const{width:ae,height:le}=q;ue=ae*le*4}else ue=((Q=q.data)==null?void 0:Q.length)||0;ue>_util.MAX_IMAGE_SIZE_TO_CACHE&&(G._maybeCleanupAfterRender=!0)}break;case"Pattern":G.objs.resolve(I,q);break;default:throw new Error(`Got unknown object type ${B}`)}}),s.on("DocProgress",I=>{var f;this.destroyed||(f=h.onProgress)==null||f.call(h,{loaded:I.loaded,total:I.total})}),s.on("FetchBuiltInCMap",I=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(I):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",I=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(I):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s,h;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(h=(s=this._fullReader)==null?void 0:s.filename)!=null?h:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const h=s-1,I=A(this,l).get(h);if(I)return I;const f=this.messageHandler.sendWithPromise("GetPage",{pageIndex:h}).then(B=>{if(this.destroyed)throw new Error("Transport destroyed");const q=new PDFPageProxy(h,B,this,this._params.pdfBug);return A(this,T).set(h,q),q});return A(this,l).set(h,f),f}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,h){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:h})}getFieldObjects(){return oe(this,d,kt).call(this,"GetFieldObjects")}hasJSActions(){return oe(this,d,kt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",h=A(this,k).get(s);if(h)return h;const I=this.messageHandler.sendWithPromise(s,null).then(f=>{var B,q,G,Q;return{info:f[0],metadata:f[1]?new _metadata.Metadata(f[1]):null,contentDispositionFilename:(q=(B=this._fullReader)==null?void 0:B.filename)!=null?q:null,contentLength:(Q=(G=this._fullReader)==null?void 0:G.contentLength)!=null?Q:null}});return A(this,k).set(s,I),I}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const h of A(this,T).values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),A(this,k).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:h}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:h})}}k=new WeakMap,T=new WeakMap,l=new WeakMap,d=new WeakSet,kt=function(s,h=null){const I=A(this,k).get(s);if(I)return I;const f=this.messageHandler.sendWithPromise(s,h);return A(this,k).set(s,f),f};class PDFObjects{constructor(){te(this,y);te(this,C,Object.create(null))}get(s,h=null){if(h){const f=oe(this,y,Rt).call(this,s);return f.capability.promise.then(()=>h(f.data)),null}const I=A(this,C)[s];if(!(I!=null&&I.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return I.data}has(s){const h=A(this,C)[s];return(h==null?void 0:h.capability.settled)||!1}resolve(s,h=null){const I=oe(this,y,Rt).call(this,s);I.data=h,I.capability.resolve()}clear(){var s;for(const h in A(this,C)){const{data:I}=A(this,C)[h];(s=I==null?void 0:I.bitmap)==null||s.close()}ye(this,C,Object.create(null))}}C=new WeakMap,y=new WeakSet,Rt=function(s){const h=A(this,C)[s];return h||(A(this,C)[s]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(s){te(this,S,null);ye(this,S,s),this.onContinue=null}get promise(){return A(this,S).capability.promise}cancel(s=0){A(this,S).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=A(this,S).operatorList;if(!s)return!1;const{annotationCanvasMap:h}=A(this,S);return s.form||s.canvas&&(h==null?void 0:h.size)>0}}S=new WeakMap,exports.RenderTask=RenderTask;const P=class{constructor({callback:s,params:h,objs:I,commonObjs:f,annotationCanvasMap:B,operatorList:q,pageIndex:G,canvasFactory:Q,filterFactory:ue,useRequestAnimationFrame:ae=!1,pdfBug:le=!1,pageColors:_e=null}){this.callback=s,this.params=h,this.objs=I,this.commonObjs=f,this.annotationCanvasMap=B,this.operatorListIdx=null,this.operatorList=q,this._pageIndex=G,this.canvasFactory=Q,this.filterFactory=ue,this._pdfBug=le,this.pageColors=_e,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ae===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=h.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:h}){var G,Q;if(this.cancelled)return;if(this._canvas){if(A(P,M).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");A(P,M).add(this._canvas)}this._pdfBug&&((G=globalThis.StepperManager)==null?void 0:G.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:I,viewport:f,transform:B,background:q}=this.params;this.gfx=new _canvas.CanvasGraphics(I,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:h},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:B,viewport:f,transparency:s,background:q}),this.operatorListIdx=0,this.graphicsReady=!0,(Q=this.graphicsReadyCallback)==null||Q.call(this)}cancel(s=null,h=0){var I;this.running=!1,this.cancelled=!0,(I=this.gfx)==null||I.endDrawing(),this._canvas&&A(P,M).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",h))}operatorListChanged(){var s;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(s=this.stepper)==null||s.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&A(P,M).delete(this._canvas),this.callback())))}};let InternalRenderTask=P;M=new WeakMap,te(InternalRenderTask,M,new WeakSet);const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,r)=>{var w,u,c,yn,k;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=r(1),a=r(4),m=r(8);class v{constructor(){te(this,c);te(this,w,!1);te(this,u,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(l,d){const b=A(this,u).get(l);return b===void 0?d:Object.assign(d,b)}getRawValue(l){return A(this,u).get(l)}remove(l){if(A(this,u).delete(l),A(this,u).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of A(this,u).values())if(d instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(l,d){const b=A(this,u).get(l);let C=!1;if(b!==void 0)for(const[y,g]of Object.entries(d))b[y]!==g&&(C=!0,b[y]=g);else C=!0,A(this,u).set(l,d);C&&oe(this,c,yn).call(this),d instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(l){return A(this,u).has(l)}getAll(){return A(this,u).size>0?(0,n.objectFromMap)(A(this,u)):null}setAll(l){for(const[d,b]of Object.entries(l))this.setValue(d,b)}get size(){return A(this,u).size}resetModified(){A(this,w)&&(ye(this,w,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _(this)}get serializable(){if(A(this,u).size===0)return null;const l=new Map;for(const[d,b]of A(this,u)){const C=b instanceof a.AnnotationEditor?b.serialize():b;C&&l.set(d,C)}return l}static getHash(l){if(!l)return"";const d=new m.MurmurHash3_64;for(const[b,C]of l)d.update(`${b}:${JSON.stringify(C)}`);return d.hexdigest()}}w=new WeakMap,u=new WeakMap,c=new WeakSet,yn=function(){A(this,w)||(ye(this,w,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=v;class _ extends v{constructor(d){super();te(this,k,null);ye(this,k,structuredClone(d.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return A(this,k)}}k=new WeakMap,t.PrintAnnotationStorage=_},(e,t,r)=>{var v,_,w,u,c,O;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=r(5),a=r(1);const k=class{constructor(l){te(this,v,this.focusin.bind(this));te(this,_,this.focusout.bind(this));te(this,w,!1);te(this,u,!1);te(this,c,!1);$e(this,"_uiManager",null);te(this,O,k._zIndex++);this.constructor===k&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=l.parent,this.id=l.id,this.width=this.height=null,this.pageIndex=l.parent.pageIndex,this.name=l.name,this.div=null,this._uiManager=l.uiManager;const{rotation:d,rawDims:{pageWidth:b,pageHeight:C,pageX:y,pageY:g}}=this.parent.viewport;this.rotation=d,this.pageRotation=(360+d-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[b,C],this.pageTranslation=[y,g];const[S,M]=this.parentDimensions;this.x=l.x/S,this.y=l.y/M,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(l){this._uiManager.addCommands(l)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=A(this,O)}setParent(l){l!==null&&(this.pageIndex=l.pageIndex,this.pageDimensions=l.pageDimensions),this.parent=l}focusin(l){A(this,w)?ye(this,w,!1):this.parent.setSelected(this)}focusout(l){var b;if(!this.isAttachedToDOM)return;const d=l.relatedTarget;d!=null&&d.closest(`#${this.id}`)||(l.preventDefault(),(b=this.parent)!=null&&b.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(l){const d=this.parent.div.getBoundingClientRect();this.startX=l.clientX-d.x,this.startY=l.clientY-d.y,l.dataTransfer.setData("text/plain",this.id),l.dataTransfer.effectAllowed="move"}setAt(l,d,b,C){const[y,g]=this.parentDimensions;[b,C]=this.screenToPageTranslation(b,C),this.x=(l+b)/y,this.y=(d+C)/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(l,d){const[b,C]=this.parentDimensions;[l,d]=this.screenToPageTranslation(l,d),this.x+=l/b,this.y+=d/C,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(l,d){switch(this.parentRotation){case 90:return[d,-l];case 180:return[-l,-d];case 270:return[-d,l];default:return[l,d]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:l}=this._uiManager.viewParameters,[d,b]=this.pageDimensions;return[d*l,b*l]}setDims(l,d){const[b,C]=this.parentDimensions;this.div.style.width=`${100*l/b}%`,this.div.style.height=`${100*d/C}%`}fixDims(){const{style:l}=this.div,{height:d,width:b}=l,C=b.endsWith("%"),y=d.endsWith("%");if(C&&y)return;const[g,S]=this.parentDimensions;C||(l.width=`${100*parseFloat(b)/g}%`),y||(l.height=`${100*parseFloat(d)/S}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",A(this,v)),this.div.addEventListener("focusout",A(this,_));const[l,d]=this.getInitialTranslation();return this.translate(l,d),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(l){const{isMac:d}=a.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&d){l.preventDefault();return}l.ctrlKey&&!d||l.shiftKey||l.metaKey&&d?this.parent.toggleSelected(this):this.parent.setSelected(this),ye(this,w,!0)}getRect(l,d){const b=this.parentScale,[C,y]=this.pageDimensions,[g,S]=this.pageTranslation,M=l/b,P=d/b,R=this.x*C,s=this.y*y,h=this.width*C,I=this.height*y;switch(this.rotation){case 0:return[R+M+g,y-s-P-I+S,R+M+h+g,y-s-P+S];case 90:return[R+P+g,y-s+M+S,R+P+I+g,y-s+M+h+S];case 180:return[R-M-h+g,y-s+P+S,R-M+g,y-s+P+I+S];case 270:return[R-P-I+g,y-s-M-h+S,R-P+g,y-s-M+S];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(l,d){const[b,C,y,g]=l,S=y-b,M=g-C;switch(this.rotation){case 0:return[b,d-g,S,M];case 90:return[b,d-C,M,S];case 180:return[y,d-C,S,M];case 270:return[y,d-g,M,S];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ye(this,c,!0)}disableEditMode(){ye(this,c,!1)}isInEditMode(){return A(this,c)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var l;(l=this.div)==null||l.addEventListener("focusin",A(this,v))}serialize(){(0,a.unreachable)("An editor must be serializable")}static deserialize(l,d,b){const C=new this.prototype.constructor({parent:d,id:d.getNextId(),uiManager:b});C.rotation=l.rotation;const[y,g]=C.pageDimensions,[S,M,P,R]=C.getRectInCurrentCoords(l.rect,g);return C.x=S/y,C.y=M/g,C.width=P/y,C.height=R/g,C}remove(){this.div.removeEventListener("focusin",A(this,v)),this.div.removeEventListener("focusout",A(this,_)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var l;(l=this.div)==null||l.classList.add("selectedEditor")}unselect(){var l;(l=this.div)==null||l.classList.remove("selectedEditor")}updateParams(l,d){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return A(this,u)}set isEditing(l){ye(this,u,l),l?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let m=k;v=new WeakMap,_=new WeakMap,w=new WeakMap,u=new WeakMap,c=new WeakMap,O=new WeakMap,$e(m,"_colorManager",new n.ColorManager),$e(m,"_zIndex",1),t.AnnotationEditor=m},(e,t,r)=>{var k,T,l,d,b,C,An,S,M,P,R,s,h,I,f,B,q,G,Q,ue,ae,le,_e,Ae,X,Ee,Se,ee,N,H,W,Sn,J,Mt,Z,En,x,Pn,o,Ye,L,ut,z,wn,j,Cn,se,Ft,re,ht,ve,It;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=m,t.opacityToHex=v;var n=r(1),a=r(6);function m(ke,de,xe){for(const Me of xe)de.addEventListener(Me,ke[Me].bind(ke))}function v(ke){return Math.round(Math.min(255,Math.max(1,255*ke))).toString(16).padStart(2,"0")}class _{constructor(){te(this,k,0)}getId(){return`${n.AnnotationEditorPrefix}${ct(this,k)._++}`}}k=new WeakMap;class w{constructor(de=128){te(this,T,[]);te(this,l,!1);te(this,d,void 0);te(this,b,-1);ye(this,d,de)}add({cmd:de,undo:xe,mustExec:Me,type:De=NaN,overwriteIfSameType:V=!1,keepUndo:F=!1}){if(Me&&de(),A(this,l))return;const U={cmd:de,undo:xe,type:De};if(A(this,b)===-1){A(this,T).length>0&&(A(this,T).length=0),ye(this,b,0),A(this,T).push(U);return}if(V&&A(this,T)[A(this,b)].type===De){F&&(U.undo=A(this,T)[A(this,b)].undo),A(this,T)[A(this,b)]=U;return}const ce=A(this,b)+1;ce===A(this,d)?A(this,T).splice(0,1):(ye(this,b,ce),ce<A(this,T).length&&A(this,T).splice(ce)),A(this,T).push(U)}undo(){A(this,b)!==-1&&(ye(this,l,!0),A(this,T)[A(this,b)].undo(),ye(this,l,!1),ye(this,b,A(this,b)-1))}redo(){A(this,b)<A(this,T).length-1&&(ye(this,b,A(this,b)+1),ye(this,l,!0),A(this,T)[A(this,b)].cmd(),ye(this,l,!1))}hasSomethingToUndo(){return A(this,b)!==-1}hasSomethingToRedo(){return A(this,b)<A(this,T).length-1}destroy(){ye(this,T,null)}}T=new WeakMap,l=new WeakMap,d=new WeakMap,b=new WeakMap,t.CommandManager=w;class u{constructor(de){te(this,C);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:xe}=n.FeatureTest.platform;for(const[Me,De]of de)for(const V of Me){const F=V.startsWith("mac+");xe&&F?(this.callbacks.set(V.slice(4),De),this.allKeys.add(V.split("+").at(-1))):!xe&&!F&&(this.callbacks.set(V,De),this.allKeys.add(V.split("+").at(-1)))}}exec(de,xe){if(!this.allKeys.has(xe.key))return;const Me=this.callbacks.get(oe(this,C,An).call(this,xe));!Me||(Me.bind(de)(),xe.stopPropagation(),xe.preventDefault())}}C=new WeakSet,An=function(de){de.altKey&&this.buffer.push("alt"),de.ctrlKey&&this.buffer.push("ctrl"),de.metaKey&&this.buffer.push("meta"),de.shiftKey&&this.buffer.push("shift"),this.buffer.push(de.key);const xe=this.buffer.join("+");return this.buffer.length=0,xe},t.KeyboardManager=u;const g=class{get _colors(){const de=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(de),(0,n.shadow)(this,"_colors",de)}convert(de){const xe=(0,a.getRGB)(de);if(!window.matchMedia("(forced-colors: active)").matches)return xe;for(const[Me,De]of this._colors)if(De.every((V,F)=>V===xe[F]))return g._colorsMapping.get(Me);return xe}getHexCode(de){const xe=this._colors.get(de);return xe?n.Util.makeHexColor(...xe):de}};let c=g;$e(c,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=c;const Pe=class{constructor(de,xe,Me){te(this,W);te(this,J);te(this,Z);te(this,x);te(this,o);te(this,L);te(this,z);te(this,j);te(this,se);te(this,re);te(this,ve);te(this,S,null);te(this,M,new Map);te(this,P,new Map);te(this,R,null);te(this,s,new w);te(this,h,0);te(this,I,null);te(this,f,new Set);te(this,B,null);te(this,q,new _);te(this,G,!1);te(this,Q,n.AnnotationEditorType.NONE);te(this,ue,new Set);te(this,ae,this.copy.bind(this));te(this,le,this.cut.bind(this));te(this,_e,this.paste.bind(this));te(this,Ae,this.keydown.bind(this));te(this,X,this.onEditingAction.bind(this));te(this,Ee,this.onPageChanging.bind(this));te(this,Se,this.onScaleChanging.bind(this));te(this,ee,this.onRotationChanging.bind(this));te(this,N,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});te(this,H,null);ye(this,H,de),ye(this,B,xe),A(this,B)._on("editingaction",A(this,X)),A(this,B)._on("pagechanging",A(this,Ee)),A(this,B)._on("scalechanging",A(this,Se)),A(this,B)._on("rotationchanging",A(this,ee)),ye(this,R,Me),this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){oe(this,J,Mt).call(this),A(this,B)._off("editingaction",A(this,X)),A(this,B)._off("pagechanging",A(this,Ee)),A(this,B)._off("scalechanging",A(this,Se)),A(this,B)._off("rotationchanging",A(this,ee));for(const de of A(this,P).values())de.destroy();A(this,P).clear(),A(this,M).clear(),A(this,f).clear(),ye(this,S,null),A(this,ue).clear(),A(this,s).destroy()}onPageChanging({pageNumber:de}){ye(this,h,de-1)}focusMainContainer(){A(this,H).focus()}addShouldRescale(de){A(this,f).add(de)}removeShouldRescale(de){A(this,f).delete(de)}onScaleChanging({scale:de}){this.commitOrRemove(),this.viewParameters.realScale=de*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const xe of A(this,f))xe.onScaleChanging()}onRotationChanging({pagesRotation:de}){this.commitOrRemove(),this.viewParameters.rotation=de}addToAnnotationStorage(de){!de.isEmpty()&&A(this,R)&&!A(this,R).has(de.id)&&A(this,R).setValue(de.id,de)}copy(de){if(de.preventDefault(),A(this,S)&&A(this,S).commitOrRemove(),!this.hasSelection)return;const xe=[];for(const Me of A(this,ue))Me.isEmpty()||xe.push(Me.serialize());xe.length!==0&&de.clipboardData.setData("application/pdfjs",JSON.stringify(xe))}cut(de){this.copy(de),this.delete()}paste(de){de.preventDefault();let xe=de.clipboardData.getData("application/pdfjs");if(!xe)return;try{xe=JSON.parse(xe)}catch(De){(0,n.warn)(`paste: "${De.message}".`);return}if(!Array.isArray(xe))return;this.unselectAll();const Me=A(this,P).get(A(this,h));try{const De=[];for(const U of xe){const ce=Me.deserialize(U);if(!ce)return;De.push(ce)}const V=()=>{for(const U of De)oe(this,se,Ft).call(this,U);oe(this,ve,It).call(this,De)},F=()=>{for(const U of De)U.remove()};this.addCommands({cmd:V,undo:F,mustExec:!0})}catch(De){(0,n.warn)(`paste: "${De.message}".`)}}keydown(de){var xe;(xe=this.getActive())!=null&&xe.shouldGetKeyboardEvents()||Pe._keyboardManager.exec(this,de)}onEditingAction(de){["undo","redo","delete","selectAll"].includes(de.name)&&this[de.name]()}setEditingState(de){de?(oe(this,W,Sn).call(this),oe(this,Z,En).call(this),oe(this,o,Ye).call(this,{isEditing:A(this,Q)!==n.AnnotationEditorType.NONE,isEmpty:oe(this,re,ht).call(this),hasSomethingToUndo:A(this,s).hasSomethingToUndo(),hasSomethingToRedo:A(this,s).hasSomethingToRedo(),hasSelectedEditor:!1})):(oe(this,J,Mt).call(this),oe(this,x,Pn).call(this),oe(this,o,Ye).call(this,{isEditing:!1}))}registerEditorTypes(de){if(!A(this,I)){ye(this,I,de);for(const xe of A(this,I))oe(this,L,ut).call(this,xe.defaultPropertiesToUpdate)}}getId(){return A(this,q).getId()}get currentLayer(){return A(this,P).get(A(this,h))}get currentPageIndex(){return A(this,h)}addLayer(de){A(this,P).set(de.pageIndex,de),A(this,G)?de.enable():de.disable()}removeLayer(de){A(this,P).delete(de.pageIndex)}updateMode(de){if(ye(this,Q,de),de===n.AnnotationEditorType.NONE)this.setEditingState(!1),oe(this,j,Cn).call(this);else{this.setEditingState(!0),oe(this,z,wn).call(this);for(const xe of A(this,P).values())xe.updateMode(de)}}updateToolbar(de){de!==A(this,Q)&&A(this,B).dispatch("switchannotationeditormode",{source:this,mode:de})}updateParams(de,xe){if(!!A(this,I)){for(const Me of A(this,ue))Me.updateParams(de,xe);for(const Me of A(this,I))Me.updateDefaultParams(de,xe)}}getEditors(de){const xe=[];for(const Me of A(this,M).values())Me.pageIndex===de&&xe.push(Me);return xe}getEditor(de){return A(this,M).get(de)}addEditor(de){A(this,M).set(de.id,de)}removeEditor(de){var xe;A(this,M).delete(de.id),this.unselect(de),(xe=A(this,R))==null||xe.remove(de.id)}setActiveEditor(de){A(this,S)!==de&&(ye(this,S,de),de&&oe(this,L,ut).call(this,de.propertiesToUpdate))}toggleSelected(de){if(A(this,ue).has(de)){A(this,ue).delete(de),de.unselect(),oe(this,o,Ye).call(this,{hasSelectedEditor:this.hasSelection});return}A(this,ue).add(de),de.select(),oe(this,L,ut).call(this,de.propertiesToUpdate),oe(this,o,Ye).call(this,{hasSelectedEditor:!0})}setSelected(de){for(const xe of A(this,ue))xe!==de&&xe.unselect();A(this,ue).clear(),A(this,ue).add(de),de.select(),oe(this,L,ut).call(this,de.propertiesToUpdate),oe(this,o,Ye).call(this,{hasSelectedEditor:!0})}isSelected(de){return A(this,ue).has(de)}unselect(de){de.unselect(),A(this,ue).delete(de),oe(this,o,Ye).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return A(this,ue).size!==0}undo(){A(this,s).undo(),oe(this,o,Ye).call(this,{hasSomethingToUndo:A(this,s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:oe(this,re,ht).call(this)})}redo(){A(this,s).redo(),oe(this,o,Ye).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:A(this,s).hasSomethingToRedo(),isEmpty:oe(this,re,ht).call(this)})}addCommands(de){A(this,s).add(de),oe(this,o,Ye).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:oe(this,re,ht).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const de=[...A(this,ue)],xe=()=>{for(const De of de)De.remove()},Me=()=>{for(const De of de)oe(this,se,Ft).call(this,De)};this.addCommands({cmd:xe,undo:Me,mustExec:!0})}commitOrRemove(){var de;(de=A(this,S))==null||de.commitOrRemove()}selectAll(){for(const de of A(this,ue))de.commit();oe(this,ve,It).call(this,A(this,M).values())}unselectAll(){if(A(this,S)){A(this,S).commitOrRemove();return}if(A(this,ue).size!==0){for(const de of A(this,ue))de.unselect();A(this,ue).clear(),oe(this,o,Ye).call(this,{hasSelectedEditor:!1})}}isActive(de){return A(this,S)===de}getActive(){return A(this,S)}getMode(){return A(this,Q)}};let O=Pe;S=new WeakMap,M=new WeakMap,P=new WeakMap,R=new WeakMap,s=new WeakMap,h=new WeakMap,I=new WeakMap,f=new WeakMap,B=new WeakMap,q=new WeakMap,G=new WeakMap,Q=new WeakMap,ue=new WeakMap,ae=new WeakMap,le=new WeakMap,_e=new WeakMap,Ae=new WeakMap,X=new WeakMap,Ee=new WeakMap,Se=new WeakMap,ee=new WeakMap,N=new WeakMap,H=new WeakMap,W=new WeakSet,Sn=function(){A(this,H).addEventListener("keydown",A(this,Ae))},J=new WeakSet,Mt=function(){A(this,H).removeEventListener("keydown",A(this,Ae))},Z=new WeakSet,En=function(){document.addEventListener("copy",A(this,ae)),document.addEventListener("cut",A(this,le)),document.addEventListener("paste",A(this,_e))},x=new WeakSet,Pn=function(){document.removeEventListener("copy",A(this,ae)),document.removeEventListener("cut",A(this,le)),document.removeEventListener("paste",A(this,_e))},o=new WeakSet,Ye=function(de){Object.entries(de).some(([Me,De])=>A(this,N)[Me]!==De)&&A(this,B).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(A(this,N),de)})},L=new WeakSet,ut=function(de){A(this,B).dispatch("annotationeditorparamschanged",{source:this,details:de})},z=new WeakSet,wn=function(){if(!A(this,G)){ye(this,G,!0);for(const de of A(this,P).values())de.enable()}},j=new WeakSet,Cn=function(){if(this.unselectAll(),A(this,G)){ye(this,G,!1);for(const de of A(this,P).values())de.disable()}},se=new WeakSet,Ft=function(de){const xe=A(this,P).get(de.pageIndex);xe?xe.addOrRebuild(de):this.addEditor(de)},re=new WeakSet,ht=function(){if(A(this,M).size===0)return!0;if(A(this,M).size===1)for(const de of A(this,M).values())return de.isEmpty();return!1},ve=new WeakSet,It=function(de){A(this,ue).clear();for(const xe of de)xe.isEmpty()||(A(this,ue).add(xe),xe.select());oe(this,o,Ye).call(this,{hasSelectedEditor:!0})},$e(O,"_keyboardManager",new u([[["ctrl+a","mac+meta+a"],Pe.prototype.selectAll],[["ctrl+z","mac+meta+z"],Pe.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Pe.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Pe.prototype.delete],[["Escape","mac+Escape"],Pe.prototype.unselectAll]])),t.AnnotationEditorUIManager=O},(e,t,r)=>{var ae,le,_e,Ae,X,Ee,Se,ee,N,rt,W,tt,J,Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=R,t.getColorValues=B,t.getCurrentTransform=q,t.getCurrentTransformInverse=G,t.getFilenameFromUrl=y,t.getPdfFilenameFromUrl=g,t.getRGB=f,t.getXfaPageViewport=I,t.isDataScheme=b,t.isPdfFile=C,t.isValidFetchUrl=M,t.loadScript=P,t.setLayerDimensions=Q;var n=r(7),a=r(1);const m="http://www.w3.org/2000/svg",v="pdfjs_internal_id_";t.AnnotationPrefix=v;const ue=class{};let _=ue;$e(_,"CSS",96),$e(_,"PDF",72),$e(_,"PDF_TO_CSS_UNITS",ue.CSS/ue.PDF),t.PixelsPerInch=_;class w extends n.BaseFilterFactory{constructor({docId:x,ownerDocument:i=globalThis.document}={}){super();te(this,N);te(this,W);te(this,J);te(this,ae,void 0);te(this,le,void 0);te(this,_e,void 0);te(this,Ae,void 0);te(this,X,void 0);te(this,Ee,void 0);te(this,Se,void 0);te(this,ee,0);ye(this,_e,x),ye(this,Ae,i)}addFilter(x){if(!x)return"none";let i=A(this,N,rt).get(x);if(i)return i;let o,E,L,D;if(x.length===1){const se=x[0],Y=new Array(256);for(let re=0;re<256;re++)Y[re]=se[re]/255;D=o=E=L=Y.join(",")}else{const[se,Y,re]=x,pe=new Array(256),ve=new Array(256),Ce=new Array(256);for(let Pe=0;Pe<256;Pe++)pe[Pe]=se[Pe]/255,ve[Pe]=Y[Pe]/255,Ce[Pe]=re[Pe]/255;o=pe.join(","),E=ve.join(","),L=Ce.join(","),D=`${o}${E}${L}`}if(i=A(this,N,rt).get(D),i)return A(this,N,rt).set(x,i),i;const z=`g_${A(this,_e)}_transfer_map_${ct(this,ee)._++}`,ie=`url(#${z})`;A(this,N,rt).set(x,ie),A(this,N,rt).set(D,ie);const j=A(this,Ae).createElementNS(m,"filter",m);j.setAttribute("id",z),j.setAttribute("color-interpolation-filters","sRGB");const $=A(this,Ae).createElementNS(m,"feComponentTransfer");return j.append($),oe(this,J,Ze).call(this,$,"feFuncR",o),oe(this,J,Ze).call(this,$,"feFuncG",E),oe(this,J,Ze).call(this,$,"feFuncB",L),A(this,W,tt).append(j),ie}addHCMFilter(x,i){var re;const o=`${x}-${i}`;if(A(this,Ee)===o)return A(this,Se);if(ye(this,Ee,o),ye(this,Se,"none"),(re=A(this,X))==null||re.remove(),!x||!i)return A(this,Se);A(this,W,tt).style.color=x,x=getComputedStyle(A(this,W,tt)).getPropertyValue("color");const E=f(x);x=a.Util.makeHexColor(...E),A(this,W,tt).style.color=i,i=getComputedStyle(A(this,W,tt)).getPropertyValue("color");const L=f(i);if(i=a.Util.makeHexColor(...L),A(this,W,tt).style.color="",x==="#000000"&&i==="#ffffff"||x===i)return A(this,Se);const D=new Array(256);for(let pe=0;pe<=255;pe++){const ve=pe/255;D[pe]=ve<=.03928?ve/12.92:((ve+.055)/1.055)**2.4}const z=D.join(","),ie=`g_${A(this,_e)}_hcm_filter`,j=ye(this,X,A(this,Ae).createElementNS(m,"filter",m));j.setAttribute("id",ie),j.setAttribute("color-interpolation-filters","sRGB");let $=A(this,Ae).createElementNS(m,"feComponentTransfer");j.append($),oe(this,J,Ze).call(this,$,"feFuncR",z),oe(this,J,Ze).call(this,$,"feFuncG",z),oe(this,J,Ze).call(this,$,"feFuncB",z);const se=A(this,Ae).createElementNS(m,"feColorMatrix");se.setAttribute("type","matrix"),se.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),j.append(se),$=A(this,Ae).createElementNS(m,"feComponentTransfer"),j.append($);const Y=(pe,ve)=>{const Ce=E[pe]/255,Pe=L[pe]/255,ke=new Array(ve+1);for(let de=0;de<=ve;de++)ke[de]=Ce+de/ve*(Pe-Ce);return ke.join(",")};return oe(this,J,Ze).call(this,$,"feFuncR",Y(0,5)),oe(this,J,Ze).call(this,$,"feFuncG",Y(1,5)),oe(this,J,Ze).call(this,$,"feFuncB",Y(2,5)),A(this,W,tt).append(j),ye(this,Se,`url(#${ie})`),A(this,Se)}destroy(x=!1){x&&A(this,Se)||(A(this,le)&&(A(this,le).parentNode.parentNode.remove(),ye(this,le,null)),A(this,ae)&&(A(this,ae).clear(),ye(this,ae,null)),ye(this,ee,0))}}ae=new WeakMap,le=new WeakMap,_e=new WeakMap,Ae=new WeakMap,X=new WeakMap,Ee=new WeakMap,Se=new WeakMap,ee=new WeakMap,N=new WeakSet,rt=function(){return A(this,ae)||ye(this,ae,new Map)},W=new WeakSet,tt=function(){if(!A(this,le)){const x=A(this,Ae).createElement("div"),{style:i}=x;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const o=A(this,Ae).createElementNS(m,"svg");o.setAttribute("width",0),o.setAttribute("height",0),ye(this,le,A(this,Ae).createElementNS(m,"defs")),x.append(o),o.append(A(this,le)),A(this,Ae).body.append(x)}return A(this,le)},J=new WeakSet,Ze=function(x,i,o){const E=A(this,Ae).createElementNS(m,i);E.setAttribute("type","discrete"),E.setAttribute("tableValues",o),x.append(E)},t.DOMFilterFactory=w;class u extends n.BaseCanvasFactory{constructor({ownerDocument:K=globalThis.document}={}){super(),this._document=K}_createCanvas(K,x){const i=this._document.createElement("canvas");return i.width=K,i.height=x,i}}t.DOMCanvasFactory=u;async function c(Z,K=!1){if(M(Z,document.baseURI)){const x=await fetch(Z);if(!x.ok)throw new Error(x.statusText);return K?new Uint8Array(await x.arrayBuffer()):(0,a.stringToBytes)(await x.text())}return new Promise((x,i)=>{const o=new XMLHttpRequest;o.open("GET",Z,!0),K&&(o.responseType="arraybuffer"),o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(o.status===200||o.status===0){let E;if(K&&o.response?E=new Uint8Array(o.response):!K&&o.responseText&&(E=(0,a.stringToBytes)(o.responseText)),E){x(E);return}}i(new Error(o.statusText))}},o.send(null)})}class O extends n.BaseCMapReaderFactory{_fetchData(K,x){return c(K,this.isCompressed).then(i=>({cMapData:i,compressionType:x}))}}t.DOMCMapReaderFactory=O;class k extends n.BaseStandardFontDataFactory{_fetchData(K){return c(K,!0)}}t.DOMStandardFontDataFactory=k;class T extends n.BaseSVGFactory{_createSVG(K){return document.createElementNS(m,K)}}t.DOMSVGFactory=T;class l{constructor({viewBox:K,scale:x,rotation:i,offsetX:o=0,offsetY:E=0,dontFlip:L=!1}){this.viewBox=K,this.scale=x,this.rotation=i,this.offsetX=o,this.offsetY=E;const D=(K[2]+K[0])/2,z=(K[3]+K[1])/2;let ie,j,$,se;switch(i%=360,i<0&&(i+=360),i){case 180:ie=-1,j=0,$=0,se=1;break;case 90:ie=0,j=1,$=1,se=0;break;case 270:ie=0,j=-1,$=-1,se=0;break;case 0:ie=1,j=0,$=0,se=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}L&&($=-$,se=-se);let Y,re,pe,ve;ie===0?(Y=Math.abs(z-K[1])*x+o,re=Math.abs(D-K[0])*x+E,pe=(K[3]-K[1])*x,ve=(K[2]-K[0])*x):(Y=Math.abs(D-K[0])*x+o,re=Math.abs(z-K[1])*x+E,pe=(K[2]-K[0])*x,ve=(K[3]-K[1])*x),this.transform=[ie*x,j*x,$*x,se*x,Y-ie*x*D-$*x*z,re-j*x*D-se*x*z],this.width=pe,this.height=ve}get rawDims(){const{viewBox:K}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:K[2]-K[0],pageHeight:K[3]-K[1],pageX:K[0],pageY:K[1]})}clone({scale:K=this.scale,rotation:x=this.rotation,offsetX:i=this.offsetX,offsetY:o=this.offsetY,dontFlip:E=!1}={}){return new l({viewBox:this.viewBox.slice(),scale:K,rotation:x,offsetX:i,offsetY:o,dontFlip:E})}convertToViewportPoint(K,x){return a.Util.applyTransform([K,x],this.transform)}convertToViewportRectangle(K){const x=a.Util.applyTransform([K[0],K[1]],this.transform),i=a.Util.applyTransform([K[2],K[3]],this.transform);return[x[0],x[1],i[0],i[1]]}convertToPdfPoint(K,x){return a.Util.applyInverseTransform([K,x],this.transform)}}t.PageViewport=l;class d extends a.BaseException{constructor(K,x,i=0){super(K,"RenderingCancelledException"),this.type=x,this.extraDelay=i}}t.RenderingCancelledException=d;function b(Z){const K=Z.length;let x=0;for(;x<K&&Z[x].trim()==="";)x++;return Z.substring(x,x+5).toLowerCase()==="data:"}function C(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function y(Z,K=!1){return K||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function g(Z,K="document.pdf"){if(typeof Z!="string")return K;if(b(Z))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),K;const x=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=x.exec(Z);let E=i.exec(o[1])||i.exec(o[2])||i.exec(o[3]);if(E&&(E=E[0],E.includes("%")))try{E=i.exec(decodeURIComponent(E))[0]}catch{}return E||K}class S{constructor(){$e(this,"started",Object.create(null));$e(this,"times",[])}time(K){K in this.started&&(0,a.warn)(`Timer is already running for ${K}`),this.started[K]=Date.now()}timeEnd(K){K in this.started||(0,a.warn)(`Timer has not been started for ${K}`),this.times.push({name:K,start:this.started[K],end:Date.now()}),delete this.started[K]}toString(){const K=[];let x=0;for(const{name:i}of this.times)x=Math.max(i.length,x);for(const{name:i,start:o,end:E}of this.times)K.push(`${i.padEnd(x)} ${E-o}ms
`);return K.join("")}}t.StatTimer=S;function M(Z,K){try{const{protocol:x}=K?new URL(Z,K):new URL(Z);return x==="http:"||x==="https:"}catch{return!1}}function P(Z,K=!1){return new Promise((x,i)=>{const o=document.createElement("script");o.src=Z,o.onload=function(E){K&&o.remove(),x(E)},o.onerror=function(){i(new Error(`Cannot load script at: ${o.src}`))},(document.head||document.documentElement).append(o)})}function R(Z){console.log("Deprecated API usage: "+Z)}let s;class h{static toDateObject(K){if(!K||typeof K!="string")return null;s||(s=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const x=s.exec(K);if(!x)return null;const i=parseInt(x[1],10);let o=parseInt(x[2],10);o=o>=1&&o<=12?o-1:0;let E=parseInt(x[3],10);E=E>=1&&E<=31?E:1;let L=parseInt(x[4],10);L=L>=0&&L<=23?L:0;let D=parseInt(x[5],10);D=D>=0&&D<=59?D:0;let z=parseInt(x[6],10);z=z>=0&&z<=59?z:0;const ie=x[7]||"Z";let j=parseInt(x[8],10);j=j>=0&&j<=23?j:0;let $=parseInt(x[9],10)||0;return $=$>=0&&$<=59?$:0,ie==="-"?(L+=j,D+=$):ie==="+"&&(L-=j,D-=$),new Date(Date.UTC(i,o,E,L,D,z))}}t.PDFDateString=h;function I(Z,{scale:K=1,rotation:x=0}){const{width:i,height:o}=Z.attributes.style,E=[0,0,parseInt(i),parseInt(o)];return new l({viewBox:E,scale:K,rotation:x})}function f(Z){if(Z.startsWith("#")){const K=parseInt(Z.slice(1),16);return[(K&16711680)>>16,(K&65280)>>8,K&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(K=>parseInt(K)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(K=>parseInt(K)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function B(Z){const K=document.createElement("span");K.style.visibility="hidden",document.body.append(K);for(const x of Z.keys()){K.style.color=x;const i=window.getComputedStyle(K).color;Z.set(x,f(i))}K.remove()}function q(Z){const{a:K,b:x,c:i,d:o,e:E,f:L}=Z.getTransform();return[K,x,i,o,E,L]}function G(Z){const{a:K,b:x,c:i,d:o,e:E,f:L}=Z.getTransform().invertSelf();return[K,x,i,o,E,L]}function Q(Z,K,x=!1,i=!0){if(K instanceof l){const{pageWidth:o,pageHeight:E}=K.rawDims,{style:L}=Z,D=`calc(var(--scale-factor) * ${o}px)`,z=`calc(var(--scale-factor) * ${E}px)`;!x||K.rotation%180===0?(L.width=D,L.height=z):(L.width=z,L.height=D)}i&&Z.setAttribute("data-main-rotation",K.rotation)}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=r(1);class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,O){return"none"}destroy(c=!1){}}t.BaseFilterFactory=a;class m{constructor(){this.constructor===m&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,O){if(c<=0||O<=0)throw new Error("Invalid canvas size");const k=this._createCanvas(c,O);return{canvas:k,context:k.getContext("2d")}}reset(c,O,k){if(!c.canvas)throw new Error("Canvas is not specified");if(O<=0||k<=0)throw new Error("Invalid canvas size");c.canvas.width=O,c.canvas.height=k}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,O){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=m;class v{constructor({baseUrl:c=null,isCompressed:O=!0}){this.constructor===v&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=O}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const O=this.baseUrl+c+(this.isCompressed?".bcmap":""),k=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(O,k).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${O}`)})}_fetchData(c,O){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=v;class _{constructor({baseUrl:c=null}){this.constructor===_&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const O=`${this.baseUrl}${c}`;return this._fetchData(O).catch(k=>{throw new Error(`Unable to load font data at: ${O}`)})}_fetchData(c){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=_;class w{constructor(){this.constructor===w&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,O,k=!1){if(c<=0||O<=0)throw new Error("Invalid SVG dimensions");const T=this._createSVG("svg:svg");return T.setAttribute("version","1.1"),k||(T.setAttribute("width",`${c}px`),T.setAttribute("height",`${O}px`)),T.setAttribute("preserveAspectRatio","none"),T.setAttribute("viewBox",`0 0 ${c} ${O}`),T}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=w},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=r(1);const a=3285377520,m=4294901760,v=65535;class _{constructor(u){this.h1=u?u&4294967295:a,this.h2=u?u&4294967295:a}update(u){let c,O;if(typeof u=="string"){c=new Uint8Array(u.length*2),O=0;for(let R=0,s=u.length;R<s;R++){const h=u.charCodeAt(R);h<=255?c[O++]=h:(c[O++]=h>>>8,c[O++]=h&255)}}else if((0,n.isArrayBuffer)(u))c=u.slice(),O=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const k=O>>2,T=O-k*4,l=new Uint32Array(c.buffer,0,k);let d=0,b=0,C=this.h1,y=this.h2;const g=3432918353,S=461845907,M=g&v,P=S&v;for(let R=0;R<k;R++)R&1?(d=l[R],d=d*g&m|d*M&v,d=d<<15|d>>>17,d=d*S&m|d*P&v,C^=d,C=C<<13|C>>>19,C=C*5+3864292196):(b=l[R],b=b*g&m|b*M&v,b=b<<15|b>>>17,b=b*S&m|b*P&v,y^=b,y=y<<13|y>>>19,y=y*5+3864292196);switch(d=0,T){case 3:d^=c[k*4+2]<<16;case 2:d^=c[k*4+1]<<8;case 1:d^=c[k*4],d=d*g&m|d*M&v,d=d<<15|d>>>17,d=d*S&m|d*P&v,k&1?C^=d:y^=d}this.h1=C,this.h2=y}hexdigest(){let u=this.h1,c=this.h2;return u^=c>>>1,u=u*3981806797&m|u*36045&v,c=c*4283543511&m|((c<<16|u>>>16)*2950163797&m)>>>16,u^=c>>>1,u=u*444984403&m|u*60499&v,c=c*3301882366&m|((c<<16|u>>>16)*3120437893&m)>>>16,u^=c>>>1,(u>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=_},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=r(1),a=r(10);class m{constructor({ownerDocument:w=globalThis.document,styleElement:u=null}){this._document=w,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(w){this.nativeFontFaces.push(w),this._document.fonts.add(w)}insertRule(w){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const u=this.styleElement.sheet;u.insertRule(w,u.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(w){if(w.attached||w.missingFile)return;if(w.attached=!0,this.isFontLoadingAPISupported){const c=w.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(O){throw(0,n.warn)(`Failed to load font '${c.family}': '${O}'.`),w.disableFontFace=!0,O}}return}const u=w.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const O=this._queueLoadingCallback(c);this._prepareFontLoadEvent(w,O)})}}get isFontLoadingAPISupported(){var u;const w=!!((u=this._document)!=null&&u.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",w)}get isSyncFontLoadingSupported(){let w=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(w=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){function u(){for((0,n.assert)(!O.done,"completeRequest() cannot be called twice."),O.done=!0;c.length>0&&c[0].done;){const k=c.shift();setTimeout(k.callback,0)}}const{loadingRequests:c}=this,O={done:!1,complete:u,callback:w};return c.push(O),O}get _loadTestFont(){const w=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",w)}_prepareFontLoadEvent(w,u){function c(f,B){return f.charCodeAt(B)<<24|f.charCodeAt(B+1)<<16|f.charCodeAt(B+2)<<8|f.charCodeAt(B+3)&255}function O(f,B,q,G){const Q=f.substring(0,B),ue=f.substring(B+q);return Q+G+ue}let k,T;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let b=0;function C(f,B){if(++b>30){(0,n.warn)("Load test font never loaded."),B();return}if(d.font="30px "+f,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(C.bind(null,f,B))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=O(g,976,y.length,y);const M=16,P=1482184792;let R=c(g,M);for(k=0,T=y.length-3;k<T;k+=4)R=R-P+c(y,k)|0;k<y.length&&(R=R-P+c(y+"XXX",k)|0),g=O(g,M,4,(0,n.string32)(R));const s=`url(data:font/opentype;base64,${btoa(g)});`,h=`@font-face {font-family:"${y}";src:${s}}`;this.insertRule(h);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const f of[w.loadedName,y]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=f,I.append(B)}this._document.body.append(I),C(y,()=>{I.remove(),u.complete()})}}t.FontLoader=m;class v{constructor(w,{isEvalSupported:u=!0,disableFontFace:c=!1,ignoreErrors:O=!1,inspectFont:k=null}){this.compiledGlyphs=Object.create(null);for(const T in w)this[T]=w[T];this.isEvalSupported=u!==!1,this.disableFontFace=c===!0,this.ignoreErrors=O===!0,this._inspectFont=k}createNativeFontFace(){var u;if(!this.data||this.disableFontFace)return null;let w;if(!this.cssFontInfo)w=new FontFace(this.loadedName,this.data,{});else{const c={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(c.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,c)}return(u=this._inspectFont)==null||u.call(this,this),w}createFontFaceRule(){var O;if(!this.data||this.disableFontFace)return null;const w=(0,n.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(w)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let k=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(k+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${k}src:${u}}`}return(O=this._inspectFont)==null||O.call(this,this,u),c}getPathGenerator(w,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let c;try{c=w.get(this.loadedName+"_path_"+u)}catch(O){if(!this.ignoreErrors)throw O;return(0,n.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[u]=function(k,T){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const O=[];for(const k of c){const T=k.args!==void 0?k.args.join(","):"";O.push("c.",k.cmd,"(",T,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",O.join(""))}return this.compiledGlyphs[u]=function(O,k){for(const T of c)T.cmd==="scale"&&(T.args=[k,-k]),O[T.cmd].apply(O,T.args)}}}t.FontFaceObject=v},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=r},(e,t,r)=>{var _e,Lt,X,Ot;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=r(1),a=r(6),m=r(12),v=r(13),_=r(10);const w=16,u=100,c=4096,O=15,k=10,T=1e3,l=16;function d(ee,N){if(ee._removeMirroring)throw new Error("Context is already forwarding operations.");ee.__originalSave=ee.save,ee.__originalRestore=ee.restore,ee.__originalRotate=ee.rotate,ee.__originalScale=ee.scale,ee.__originalTranslate=ee.translate,ee.__originalTransform=ee.transform,ee.__originalSetTransform=ee.setTransform,ee.__originalResetTransform=ee.resetTransform,ee.__originalClip=ee.clip,ee.__originalMoveTo=ee.moveTo,ee.__originalLineTo=ee.lineTo,ee.__originalBezierCurveTo=ee.bezierCurveTo,ee.__originalRect=ee.rect,ee.__originalClosePath=ee.closePath,ee.__originalBeginPath=ee.beginPath,ee._removeMirroring=()=>{ee.save=ee.__originalSave,ee.restore=ee.__originalRestore,ee.rotate=ee.__originalRotate,ee.scale=ee.__originalScale,ee.translate=ee.__originalTranslate,ee.transform=ee.__originalTransform,ee.setTransform=ee.__originalSetTransform,ee.resetTransform=ee.__originalResetTransform,ee.clip=ee.__originalClip,ee.moveTo=ee.__originalMoveTo,ee.lineTo=ee.__originalLineTo,ee.bezierCurveTo=ee.__originalBezierCurveTo,ee.rect=ee.__originalRect,ee.closePath=ee.__originalClosePath,ee.beginPath=ee.__originalBeginPath,delete ee._removeMirroring},ee.save=function(){N.save(),this.__originalSave()},ee.restore=function(){N.restore(),this.__originalRestore()},ee.translate=function(W,ne){N.translate(W,ne),this.__originalTranslate(W,ne)},ee.scale=function(W,ne){N.scale(W,ne),this.__originalScale(W,ne)},ee.transform=function(W,ne,J,he,Z,K){N.transform(W,ne,J,he,Z,K),this.__originalTransform(W,ne,J,he,Z,K)},ee.setTransform=function(W,ne,J,he,Z,K){N.setTransform(W,ne,J,he,Z,K),this.__originalSetTransform(W,ne,J,he,Z,K)},ee.resetTransform=function(){N.resetTransform(),this.__originalResetTransform()},ee.rotate=function(W){N.rotate(W),this.__originalRotate(W)},ee.clip=function(W){N.clip(W),this.__originalClip(W)},ee.moveTo=function(H,W){N.moveTo(H,W),this.__originalMoveTo(H,W)},ee.lineTo=function(H,W){N.lineTo(H,W),this.__originalLineTo(H,W)},ee.bezierCurveTo=function(H,W,ne,J,he,Z){N.bezierCurveTo(H,W,ne,J,he,Z),this.__originalBezierCurveTo(H,W,ne,J,he,Z)},ee.rect=function(H,W,ne,J){N.rect(H,W,ne,J),this.__originalRect(H,W,ne,J)},ee.closePath=function(){N.closePath(),this.__originalClosePath()},ee.beginPath=function(){N.beginPath(),this.__originalBeginPath()}}class b{constructor(N){this.canvasFactory=N,this.cache=Object.create(null)}getCanvas(N,H,W){let ne;return this.cache[N]!==void 0?(ne=this.cache[N],this.canvasFactory.reset(ne,H,W)):(ne=this.canvasFactory.create(H,W),this.cache[N]=ne),ne}delete(N){delete this.cache[N]}clear(){for(const N in this.cache){const H=this.cache[N];this.canvasFactory.destroy(H),delete this.cache[N]}}}function C(ee,N,H,W,ne,J,he,Z,K,x){const[i,o,E,L,D,z]=(0,a.getCurrentTransform)(ee);if(o===0&&E===0){const $=he*i+D,se=Math.round($),Y=Z*L+z,re=Math.round(Y),pe=(he+K)*i+D,ve=Math.abs(Math.round(pe)-se)||1,Ce=(Z+x)*L+z,Pe=Math.abs(Math.round(Ce)-re)||1;return ee.setTransform(Math.sign(i),0,0,Math.sign(L),se,re),ee.drawImage(N,H,W,ne,J,0,0,ve,Pe),ee.setTransform(i,o,E,L,D,z),[ve,Pe]}if(i===0&&L===0){const $=Z*E+D,se=Math.round($),Y=he*o+z,re=Math.round(Y),pe=(Z+x)*E+D,ve=Math.abs(Math.round(pe)-se)||1,Ce=(he+K)*o+z,Pe=Math.abs(Math.round(Ce)-re)||1;return ee.setTransform(0,Math.sign(o),Math.sign(E),0,se,re),ee.drawImage(N,H,W,ne,J,0,0,Pe,ve),ee.setTransform(i,o,E,L,D,z),[Pe,ve]}ee.drawImage(N,H,W,ne,J,he,Z,K,x);const ie=Math.hypot(i,o),j=Math.hypot(E,L);return[ie*K,j*x]}function y(ee){const{width:N,height:H}=ee;if(N>T||H>T)return null;const W=1e3,ne=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),J=N+1;let he=new Uint8Array(J*(H+1)),Z,K,x;const i=N+7&-8;let o=new Uint8Array(i*H),E=0;for(const j of ee.data){let $=128;for(;$>0;)o[E++]=j&$?0:255,$>>=1}let L=0;for(E=0,o[E]!==0&&(he[0]=1,++L),K=1;K<N;K++)o[E]!==o[E+1]&&(he[K]=o[E]?2:1,++L),E++;for(o[E]!==0&&(he[K]=2,++L),Z=1;Z<H;Z++){E=Z*i,x=Z*J,o[E-i]!==o[E]&&(he[x]=o[E]?1:8,++L);let j=(o[E]?4:0)+(o[E-i]?8:0);for(K=1;K<N;K++)j=(j>>2)+(o[E+1]?4:0)+(o[E-i+1]?8:0),ne[j]&&(he[x+K]=ne[j],++L),E++;if(o[E-i]!==o[E]&&(he[x+K]=o[E]?2:4,++L),L>W)return null}for(E=i*(H-1),x=Z*J,o[E]!==0&&(he[x]=8,++L),K=1;K<N;K++)o[E]!==o[E+1]&&(he[x+K]=o[E]?4:8,++L),E++;if(o[E]!==0&&(he[x+K]=4,++L),L>W)return null;const D=new Int32Array([0,J,-1,0,-J,0,0,0,1]),z=new Path2D;for(Z=0;L&&Z<=H;Z++){let j=Z*J;const $=j+N;for(;j<$&&!he[j];)j++;if(j===$)continue;z.moveTo(j%J,Z);const se=j;let Y=he[j];do{const re=D[Y];do j+=re;while(!he[j]);const pe=he[j];pe!==5&&pe!==10?(Y=pe,he[j]=0):(Y=pe&51*Y>>4,he[j]&=Y>>2|Y<<2),z.lineTo(j%J,j/J|0),he[j]||--L}while(se!==j);--Z}return o=null,he=null,function(j){j.save(),j.scale(1/N,-1/H),j.translate(0,-H),j.fill(z),j.beginPath(),j.restore()}}class g{constructor(N,H){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,N,H])}clone(){const N=Object.create(this);return N.clipBox=this.clipBox.slice(),N}setCurrentPoint(N,H){this.x=N,this.y=H}updatePathMinMax(N,H,W){[H,W]=n.Util.applyTransform([H,W],N),this.minX=Math.min(this.minX,H),this.minY=Math.min(this.minY,W),this.maxX=Math.max(this.maxX,H),this.maxY=Math.max(this.maxY,W)}updateRectMinMax(N,H){const W=n.Util.applyTransform(H,N),ne=n.Util.applyTransform(H.slice(2),N);this.minX=Math.min(this.minX,W[0],ne[0]),this.minY=Math.min(this.minY,W[1],ne[1]),this.maxX=Math.max(this.maxX,W[0],ne[0]),this.maxY=Math.max(this.maxY,W[1],ne[1])}updateScalingPathMinMax(N,H){n.Util.scaleMinMax(N,H),this.minX=Math.min(this.minX,H[0]),this.maxX=Math.max(this.maxX,H[1]),this.minY=Math.min(this.minY,H[2]),this.maxY=Math.max(this.maxY,H[3])}updateCurvePathMinMax(N,H,W,ne,J,he,Z,K,x,i){const o=n.Util.bezierBoundingBox(H,W,ne,J,he,Z,K,x);if(i){i[0]=Math.min(i[0],o[0],o[2]),i[1]=Math.max(i[1],o[0],o[2]),i[2]=Math.min(i[2],o[1],o[3]),i[3]=Math.max(i[3],o[1],o[3]);return}this.updateRectMinMax(N,o)}getPathBoundingBox(N=m.PathType.FILL,H=null){const W=[this.minX,this.minY,this.maxX,this.maxY];if(N===m.PathType.STROKE){H||(0,n.unreachable)("Stroke bounding box must include transform.");const ne=n.Util.singularValueDecompose2dScale(H),J=ne[0]*this.lineWidth/2,he=ne[1]*this.lineWidth/2;W[0]-=J,W[1]-=he,W[2]+=J,W[3]+=he}return W}updateClipFromPath(){const N=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(N||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(N){this.clipBox=N,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(N=m.PathType.FILL,H=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(N,H))}}function S(ee,N){if(typeof ImageData<"u"&&N instanceof ImageData){ee.putImageData(N,0,0);return}const H=N.height,W=N.width,ne=H%l,J=(H-ne)/l,he=ne===0?J:J+1,Z=ee.createImageData(W,l);let K=0,x;const i=N.data,o=Z.data;let E,L,D,z;if(N.kind===n.ImageKind.GRAYSCALE_1BPP){const ie=i.byteLength,j=new Uint32Array(o.buffer,0,o.byteLength>>2),$=j.length,se=W+7>>3,Y=4294967295,re=n.FeatureTest.isLittleEndian?4278190080:255;for(E=0;E<he;E++){for(D=E<J?l:ne,x=0,L=0;L<D;L++){const pe=ie-K;let ve=0;const Ce=pe>se?W:pe*8-7,Pe=Ce&-8;let ke=0,de=0;for(;ve<Pe;ve+=8)de=i[K++],j[x++]=de&128?Y:re,j[x++]=de&64?Y:re,j[x++]=de&32?Y:re,j[x++]=de&16?Y:re,j[x++]=de&8?Y:re,j[x++]=de&4?Y:re,j[x++]=de&2?Y:re,j[x++]=de&1?Y:re;for(;ve<Ce;ve++)ke===0&&(de=i[K++],ke=128),j[x++]=de&ke?Y:re,ke>>=1}for(;x<$;)j[x++]=0;ee.putImageData(Z,0,E*l)}}else if(N.kind===n.ImageKind.RGBA_32BPP){for(L=0,z=W*l*4,E=0;E<J;E++)o.set(i.subarray(K,K+z)),K+=z,ee.putImageData(Z,0,L),L+=l;E<he&&(z=W*ne*4,o.set(i.subarray(K,K+z)),ee.putImageData(Z,0,L))}else if(N.kind===n.ImageKind.RGB_24BPP)for(D=l,z=W*D,E=0;E<he;E++){for(E>=J&&(D=ne,z=W*D),x=0,L=z;L--;)o[x++]=i[K++],o[x++]=i[K++],o[x++]=i[K++],o[x++]=255;ee.putImageData(Z,0,E*l)}else throw new Error(`bad image kind: ${N.kind}`)}function M(ee,N){if(N.bitmap){ee.drawImage(N.bitmap,0,0);return}const H=N.height,W=N.width,ne=H%l,J=(H-ne)/l,he=ne===0?J:J+1,Z=ee.createImageData(W,l);let K=0;const x=N.data,i=Z.data;for(let o=0;o<he;o++){const E=o<J?l:ne;({srcPos:K}=(0,v.convertBlackAndWhiteToRGBA)({src:x,srcPos:K,dest:i,width:W,height:E,nonBlackColor:0})),ee.putImageData(Z,0,o*l)}}function P(ee,N){const H=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const W of H)ee[W]!==void 0&&(N[W]=ee[W]);ee.setLineDash!==void 0&&(N.setLineDash(ee.getLineDash()),N.lineDashOffset=ee.lineDashOffset)}function R(ee){ee.strokeStyle=ee.fillStyle="#000000",ee.fillRule="nonzero",ee.globalAlpha=1,ee.lineWidth=1,ee.lineCap="butt",ee.lineJoin="miter",ee.miterLimit=10,ee.globalCompositeOperation="source-over",ee.font="10px sans-serif",ee.setLineDash!==void 0&&(ee.setLineDash([]),ee.lineDashOffset=0),_.isNodeJS||(ee.filter="none")}function s(ee,N,H,W){const ne=ee.length;for(let J=3;J<ne;J+=4){const he=ee[J];if(he===0)ee[J-3]=N,ee[J-2]=H,ee[J-1]=W;else if(he<255){const Z=255-he;ee[J-3]=ee[J-3]*he+N*Z>>8,ee[J-2]=ee[J-2]*he+H*Z>>8,ee[J-1]=ee[J-1]*he+W*Z>>8}}}function h(ee,N,H){const W=ee.length,ne=1/255;for(let J=3;J<W;J+=4){const he=H?H[ee[J]]:ee[J];N[J]=N[J]*he*ne|0}}function I(ee,N,H){const W=ee.length;for(let ne=3;ne<W;ne+=4){const J=ee[ne-3]*77+ee[ne-2]*152+ee[ne-1]*28;N[ne]=H?N[ne]*H[J>>8]>>8:N[ne]*J>>16}}function f(ee,N,H,W,ne,J,he,Z,K,x,i){const o=!!J,E=o?J[0]:0,L=o?J[1]:0,D=o?J[2]:0;let z;ne==="Luminosity"?z=I:z=h;const j=Math.min(W,Math.ceil(1048576/H));for(let $=0;$<W;$+=j){const se=Math.min(j,W-$),Y=ee.getImageData(Z-x,$+(K-i),H,se),re=N.getImageData(Z,$+K,H,se);o&&s(Y.data,E,L,D),z(Y.data,re.data,he),N.putImageData(re,Z,$+K)}}function B(ee,N,H,W){const ne=W[0],J=W[1],he=W[2]-ne,Z=W[3]-J;he===0||Z===0||(f(N.context,H,he,Z,N.subtype,N.backdrop,N.transferMap,ne,J,N.offsetX,N.offsetY),ee.save(),ee.globalAlpha=1,ee.globalCompositeOperation="source-over",ee.setTransform(1,0,0,1,0,0),ee.drawImage(H.canvas,0,0),ee.restore())}function q(ee,N){const H=n.Util.singularValueDecompose2dScale(ee);H[0]=Math.fround(H[0]),H[1]=Math.fround(H[1]);const W=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return N!==void 0?N:H[0]<=W||H[1]<=W}const G=["butt","round","square"],Q=["miter","round","bevel"],ue={},ae={},Se=class{constructor(N,H,W,ne,J,{optionalContentConfig:he,markedContentStack:Z=null},K,x){te(this,_e);te(this,X);this.ctx=N,this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=H,this.objs=W,this.canvasFactory=ne,this.filterFactory=J,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Z||[],this.optionalContentConfig=he,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=K,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=x,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(N,H=null){return typeof N=="string"?N.startsWith("g_")?this.commonObjs.get(N):this.objs.get(N):H}beginDrawing({transform:N,viewport:H,transparency:W=!1,background:ne=null}){const J=this.ctx.canvas.width,he=this.ctx.canvas.height,Z=this.ctx.fillStyle;if(this.ctx.fillStyle=ne||"#ffffff",this.ctx.fillRect(0,0,J,he),this.ctx.fillStyle=Z,W){const K=this.cachedCanvases.getCanvas("transparent",J,he);this.compositeCtx=this.ctx,this.transparentCanvas=K.canvas,this.ctx=K.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),R(this.ctx),N&&(this.ctx.transform(...N),this.outputScaleX=N[0],this.outputScaleY=N[0]),this.ctx.transform(...H.transform),this.viewportScale=H.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(N,H,W,ne){const J=N.argsArray,he=N.fnArray;let Z=H||0;const K=J.length;if(K===Z)return Z;const x=K-Z>k&&typeof W=="function",i=x?Date.now()+O:0;let o=0;const E=this.commonObjs,L=this.objs;let D;for(;;){if(ne!==void 0&&Z===ne.nextBreakPoint)return ne.breakIt(Z,W),Z;if(D=he[Z],D!==n.OPS.dependency)this[D].apply(this,J[Z]);else for(const z of J[Z]){const ie=z.startsWith("g_")?E:L;if(!ie.has(z))return ie.get(z,W),Z}if(Z++,Z===K)return Z;if(x&&++o>k){if(Date.now()>i)return W(),Z;o=0}}}endDrawing(){oe(this,_e,Lt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const N of this._cachedBitmapsMap.values()){for(const H of N.values())typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement&&(H.width=H.height=0);N.clear()}this._cachedBitmapsMap.clear(),oe(this,X,Ot).call(this)}_scaleImage(N,H){const W=N.width,ne=N.height;let J=Math.max(Math.hypot(H[0],H[1]),1),he=Math.max(Math.hypot(H[2],H[3]),1),Z=W,K=ne,x="prescale1",i,o;for(;J>2&&Z>1||he>2&&K>1;){let E=Z,L=K;J>2&&Z>1&&(E=Z>=16384?Math.floor(Z/2)-1||1:Math.ceil(Z/2),J/=Z/E),he>2&&K>1&&(L=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K)/2,he/=K/L),i=this.cachedCanvases.getCanvas(x,E,L),o=i.context,o.clearRect(0,0,E,L),o.drawImage(N,0,0,Z,K,0,0,E,L),N=i.canvas,Z=E,K=L,x=x==="prescale1"?"prescale2":"prescale1"}return{img:N,paintWidth:Z,paintHeight:K}}_createMaskCanvas(N){const H=this.ctx,{width:W,height:ne}=N,J=this.current.fillColor,he=this.current.patternFill,Z=(0,a.getCurrentTransform)(H);let K,x,i,o;if((N.bitmap||N.data)&&N.count>1){const ve=N.bitmap||N.data.buffer;x=JSON.stringify(he?Z:[Z.slice(0,4),J]),K=this._cachedBitmapsMap.get(ve),K||(K=new Map,this._cachedBitmapsMap.set(ve,K));const Ce=K.get(x);if(Ce&&!he){const Pe=Math.round(Math.min(Z[0],Z[2])+Z[4]),ke=Math.round(Math.min(Z[1],Z[3])+Z[5]);return{canvas:Ce,offsetX:Pe,offsetY:ke}}i=Ce}i||(o=this.cachedCanvases.getCanvas("maskCanvas",W,ne),M(o.context,N));let E=n.Util.transform(Z,[1/W,0,0,-1/ne,0,0]);E=n.Util.transform(E,[1,0,0,1,0,-ne]);const L=n.Util.applyTransform([0,0],E),D=n.Util.applyTransform([W,ne],E),z=n.Util.normalizeRect([L[0],L[1],D[0],D[1]]),ie=Math.round(z[2]-z[0])||1,j=Math.round(z[3]-z[1])||1,$=this.cachedCanvases.getCanvas("fillCanvas",ie,j),se=$.context,Y=Math.min(L[0],D[0]),re=Math.min(L[1],D[1]);se.translate(-Y,-re),se.transform(...E),i||(i=this._scaleImage(o.canvas,(0,a.getCurrentTransformInverse)(se)),i=i.img,K&&he&&K.set(x,i)),se.imageSmoothingEnabled=q((0,a.getCurrentTransform)(se),N.interpolate),C(se,i,0,0,i.width,i.height,0,0,W,ne),se.globalCompositeOperation="source-in";const pe=n.Util.transform((0,a.getCurrentTransformInverse)(se),[1,0,0,1,-Y,-re]);return se.fillStyle=he?J.getPattern(H,this,pe,m.PathType.FILL):J,se.fillRect(0,0,W,ne),K&&!he&&(this.cachedCanvases.delete("fillCanvas"),K.set(x,$.canvas)),{canvas:$.canvas,offsetX:Math.round(Y),offsetY:Math.round(re)}}setLineWidth(N){N!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=N,this.ctx.lineWidth=N}setLineCap(N){this.ctx.lineCap=G[N]}setLineJoin(N){this.ctx.lineJoin=Q[N]}setMiterLimit(N){this.ctx.miterLimit=N}setDash(N,H){const W=this.ctx;W.setLineDash!==void 0&&(W.setLineDash(N),W.lineDashOffset=H)}setRenderingIntent(N){}setFlatness(N){}setGState(N){for(const[H,W]of N)switch(H){case"LW":this.setLineWidth(W);break;case"LC":this.setLineCap(W);break;case"LJ":this.setLineJoin(W);break;case"ML":this.setMiterLimit(W);break;case"D":this.setDash(W[0],W[1]);break;case"RI":this.setRenderingIntent(W);break;case"FL":this.setFlatness(W);break;case"Font":this.setFont(W[0],W[1]);break;case"CA":this.current.strokeAlpha=W;break;case"ca":this.current.fillAlpha=W,this.ctx.globalAlpha=W;break;case"BM":this.ctx.globalCompositeOperation=W;break;case"SMask":this.current.activeSMask=W?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(W);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const N=this.inSMaskMode;this.current.activeSMask&&!N?this.beginSMaskMode():!this.current.activeSMask&&N&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const N=this.ctx.canvas.width,H=this.ctx.canvas.height,W="smaskGroupAt"+this.groupLevel,ne=this.cachedCanvases.getCanvas(W,N,H);this.suspendedCtx=this.ctx,this.ctx=ne.context;const J=this.ctx;J.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),P(this.suspendedCtx,J),d(J,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),P(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(N){if(!this.current.activeSMask)return;N?(N[0]=Math.floor(N[0]),N[1]=Math.floor(N[1]),N[2]=Math.ceil(N[2]),N[3]=Math.ceil(N[3])):N=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const H=this.current.activeSMask,W=this.suspendedCtx;B(W,H,this.ctx,N),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(P(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const N=this.current;this.stateStack.push(N),this.current=N.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),P(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(N,H,W,ne,J,he){this.ctx.transform(N,H,W,ne,J,he),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(N,H,W){const ne=this.ctx,J=this.current;let he=J.x,Z=J.y,K,x;const i=(0,a.getCurrentTransform)(ne),o=i[0]===0&&i[3]===0||i[1]===0&&i[2]===0,E=o?W.slice(0):null;for(let L=0,D=0,z=N.length;L<z;L++)switch(N[L]|0){case n.OPS.rectangle:he=H[D++],Z=H[D++];const ie=H[D++],j=H[D++],$=he+ie,se=Z+j;ne.moveTo(he,Z),ie===0||j===0?ne.lineTo($,se):(ne.lineTo($,Z),ne.lineTo($,se),ne.lineTo(he,se)),o||J.updateRectMinMax(i,[he,Z,$,se]),ne.closePath();break;case n.OPS.moveTo:he=H[D++],Z=H[D++],ne.moveTo(he,Z),o||J.updatePathMinMax(i,he,Z);break;case n.OPS.lineTo:he=H[D++],Z=H[D++],ne.lineTo(he,Z),o||J.updatePathMinMax(i,he,Z);break;case n.OPS.curveTo:K=he,x=Z,he=H[D+4],Z=H[D+5],ne.bezierCurveTo(H[D],H[D+1],H[D+2],H[D+3],he,Z),J.updateCurvePathMinMax(i,K,x,H[D],H[D+1],H[D+2],H[D+3],he,Z,E),D+=6;break;case n.OPS.curveTo2:K=he,x=Z,ne.bezierCurveTo(he,Z,H[D],H[D+1],H[D+2],H[D+3]),J.updateCurvePathMinMax(i,K,x,he,Z,H[D],H[D+1],H[D+2],H[D+3],E),he=H[D+2],Z=H[D+3],D+=4;break;case n.OPS.curveTo3:K=he,x=Z,he=H[D+2],Z=H[D+3],ne.bezierCurveTo(H[D],H[D+1],he,Z,he,Z),J.updateCurvePathMinMax(i,K,x,H[D],H[D+1],he,Z,he,Z,E),D+=4;break;case n.OPS.closePath:ne.closePath();break}o&&J.updateScalingPathMinMax(i,E),J.setCurrentPoint(he,Z)}closePath(){this.ctx.closePath()}stroke(N=!0){const H=this.ctx,W=this.current.strokeColor;H.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof W=="object"&&(W==null?void 0:W.getPattern)?(H.save(),H.strokeStyle=W.getPattern(H,this,(0,a.getCurrentTransformInverse)(H),m.PathType.STROKE),this.rescaleAndStroke(!1),H.restore()):this.rescaleAndStroke(!0)),N&&this.consumePath(this.current.getClippedPathBoundingBox()),H.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(N=!0){const H=this.ctx,W=this.current.fillColor,ne=this.current.patternFill;let J=!1;ne&&(H.save(),H.fillStyle=W.getPattern(H,this,(0,a.getCurrentTransformInverse)(H),m.PathType.FILL),J=!0);const he=this.current.getClippedPathBoundingBox();this.contentVisible&&he!==null&&(this.pendingEOFill?(H.fill("evenodd"),this.pendingEOFill=!1):H.fill()),J&&H.restore(),N&&this.consumePath(he)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ue}eoClip(){this.pendingClip=ae}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const N=this.pendingTextPaths,H=this.ctx;if(N===void 0){H.beginPath();return}H.save(),H.beginPath();for(const W of N)H.setTransform(...W.transform),H.translate(W.x,W.y),W.addToPath(H,W.fontSize);H.restore(),H.clip(),H.beginPath(),delete this.pendingTextPaths}setCharSpacing(N){this.current.charSpacing=N}setWordSpacing(N){this.current.wordSpacing=N}setHScale(N){this.current.textHScale=N/100}setLeading(N){this.current.leading=-N}setFont(N,H){const W=this.commonObjs.get(N),ne=this.current;if(!W)throw new Error(`Can't find font for ${N}`);if(ne.fontMatrix=W.fontMatrix||n.FONT_IDENTITY_MATRIX,(ne.fontMatrix[0]===0||ne.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+N),H<0?(H=-H,ne.fontDirection=-1):ne.fontDirection=1,this.current.font=W,this.current.fontSize=H,W.isType3Font)return;const J=W.loadedName||"sans-serif";let he="normal";W.black?he="900":W.bold&&(he="bold");const Z=W.italic?"italic":"normal",K=`"${J}", ${W.fallbackName}`;let x=H;H<w?x=w:H>u&&(x=u),this.current.fontSizeScale=H/x,this.ctx.font=`${Z} ${he} ${x}px ${K}`}setTextRenderingMode(N){this.current.textRenderingMode=N}setTextRise(N){this.current.textRise=N}moveText(N,H){this.current.x=this.current.lineX+=N,this.current.y=this.current.lineY+=H}setLeadingMoveText(N,H){this.setLeading(-H),this.moveText(N,H)}setTextMatrix(N,H,W,ne,J,he){this.current.textMatrix=[N,H,W,ne,J,he],this.current.textMatrixScale=Math.hypot(N,H),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(N,H,W,ne){const J=this.ctx,he=this.current,Z=he.font,K=he.textRenderingMode,x=he.fontSize/he.fontSizeScale,i=K&n.TextRenderingMode.FILL_STROKE_MASK,o=!!(K&n.TextRenderingMode.ADD_TO_PATH_FLAG),E=he.patternFill&&!Z.missingFile;let L;(Z.disableFontFace||o||E)&&(L=Z.getPathGenerator(this.commonObjs,N)),Z.disableFontFace||E?(J.save(),J.translate(H,W),J.beginPath(),L(J,x),ne&&J.setTransform(...ne),(i===n.TextRenderingMode.FILL||i===n.TextRenderingMode.FILL_STROKE)&&J.fill(),(i===n.TextRenderingMode.STROKE||i===n.TextRenderingMode.FILL_STROKE)&&J.stroke(),J.restore()):((i===n.TextRenderingMode.FILL||i===n.TextRenderingMode.FILL_STROKE)&&J.fillText(N,H,W),(i===n.TextRenderingMode.STROKE||i===n.TextRenderingMode.FILL_STROKE)&&J.strokeText(N,H,W)),o&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(J),x:H,y:W,fontSize:x,addToPath:L})}get isFontSubpixelAAEnabled(){const{context:N}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);N.scale(1.5,1),N.fillText("I",0,10);const H=N.getImageData(0,0,10,10).data;let W=!1;for(let ne=3;ne<H.length;ne+=4)if(H[ne]>0&&H[ne]<255){W=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",W)}showText(N){const H=this.current,W=H.font;if(W.isType3Font)return this.showType3Text(N);const ne=H.fontSize;if(ne===0)return;const J=this.ctx,he=H.fontSizeScale,Z=H.charSpacing,K=H.wordSpacing,x=H.fontDirection,i=H.textHScale*x,o=N.length,E=W.vertical,L=E?1:-1,D=W.defaultVMetrics,z=ne*H.fontMatrix[0],ie=H.textRenderingMode===n.TextRenderingMode.FILL&&!W.disableFontFace&&!H.patternFill;J.save(),J.transform(...H.textMatrix),J.translate(H.x,H.y+H.textRise),x>0?J.scale(i,-1):J.scale(i,1);let j;if(H.patternFill){J.save();const pe=H.fillColor.getPattern(J,this,(0,a.getCurrentTransformInverse)(J),m.PathType.FILL);j=(0,a.getCurrentTransform)(J),J.restore(),J.fillStyle=pe}let $=H.lineWidth;const se=H.textMatrixScale;if(se===0||$===0){const pe=H.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(pe===n.TextRenderingMode.STROKE||pe===n.TextRenderingMode.FILL_STROKE)&&($=this.getSinglePixelWidth())}else $/=se;if(he!==1&&(J.scale(he,he),$/=he),J.lineWidth=$,W.isInvalidPDFjsFont){const pe=[];let ve=0;for(const Ce of N)pe.push(Ce.unicode),ve+=Ce.width;J.fillText(pe.join(""),0,0),H.x+=ve*z*i,J.restore(),this.compose();return}let Y=0,re;for(re=0;re<o;++re){const pe=N[re];if(typeof pe=="number"){Y+=L*pe*ne/1e3;continue}let ve=!1;const Ce=(pe.isSpace?K:0)+Z,Pe=pe.fontChar,ke=pe.accent;let de,xe,Me=pe.width;if(E){const V=pe.vmetric||D,F=-(pe.vmetric?V[1]:Me*.5)*z,U=V[2]*z;Me=V?-V[0]:Me,de=F/he,xe=(Y+U)/he}else de=Y/he,xe=0;if(W.remeasure&&Me>0){const V=J.measureText(Pe).width*1e3/ne*he;if(Me<V&&this.isFontSubpixelAAEnabled){const F=Me/V;ve=!0,J.save(),J.scale(F,1),de/=F}else Me!==V&&(de+=(Me-V)/2e3*ne/he)}if(this.contentVisible&&(pe.isInFont||W.missingFile)){if(ie&&!ke)J.fillText(Pe,de,xe);else if(this.paintChar(Pe,de,xe,j),ke){const V=de+ne*ke.offset.x/he,F=xe-ne*ke.offset.y/he;this.paintChar(ke.fontChar,V,F,j)}}let De;E?De=Me*z-Ce*x:De=Me*z+Ce*x,Y+=De,ve&&J.restore()}E?H.y-=Y:H.x+=Y*i,J.restore(),this.compose()}showType3Text(N){const H=this.ctx,W=this.current,ne=W.font,J=W.fontSize,he=W.fontDirection,Z=ne.vertical?1:-1,K=W.charSpacing,x=W.wordSpacing,i=W.textHScale*he,o=W.fontMatrix||n.FONT_IDENTITY_MATRIX,E=N.length,L=W.textRenderingMode===n.TextRenderingMode.INVISIBLE;let D,z,ie,j;if(!(L||J===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,H.save(),H.transform(...W.textMatrix),H.translate(W.x,W.y),H.scale(i,he),D=0;D<E;++D){if(z=N[D],typeof z=="number"){j=Z*z*J/1e3,this.ctx.translate(j,0),W.x+=j*i;continue}const $=(z.isSpace?x:0)+K,se=ne.charProcOperatorList[z.operatorListId];if(!se){(0,n.warn)(`Type3 character "${z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=z,this.save(),H.scale(J,J),H.transform(...o),this.executeOperatorList(se),this.restore()),ie=n.Util.applyTransform([z.width,0],o)[0]*J+$,H.translate(ie,0),W.x+=ie*i}H.restore(),this.processingType3=null}}setCharWidth(N,H){}setCharWidthAndBounds(N,H,W,ne,J,he){this.ctx.rect(W,ne,J-W,he-ne),this.ctx.clip(),this.endPath()}getColorN_Pattern(N){let H;if(N[0]==="TilingPattern"){const W=N[1],ne=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),J={createCanvasGraphics:he=>new Se(he,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};H=new m.TilingPattern(N,W,this.ctx,J,ne)}else H=this._getPattern(N[1],N[2]);return H}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(N,H,W){const ne=n.Util.makeHexColor(N,H,W);this.ctx.strokeStyle=ne,this.current.strokeColor=ne}setFillRGBColor(N,H,W){const ne=n.Util.makeHexColor(N,H,W);this.ctx.fillStyle=ne,this.current.fillColor=ne,this.current.patternFill=!1}_getPattern(N,H=null){let W;return this.cachedPatterns.has(N)?W=this.cachedPatterns.get(N):(W=(0,m.getShadingPattern)(this.getObject(N)),this.cachedPatterns.set(N,W)),H&&(W.matrix=H),W}shadingFill(N){if(!this.contentVisible)return;const H=this.ctx;this.save();const W=this._getPattern(N);H.fillStyle=W.getPattern(H,this,(0,a.getCurrentTransformInverse)(H),m.PathType.SHADING);const ne=(0,a.getCurrentTransformInverse)(H);if(ne){const J=H.canvas,he=J.width,Z=J.height,K=n.Util.applyTransform([0,0],ne),x=n.Util.applyTransform([0,Z],ne),i=n.Util.applyTransform([he,0],ne),o=n.Util.applyTransform([he,Z],ne),E=Math.min(K[0],x[0],i[0],o[0]),L=Math.min(K[1],x[1],i[1],o[1]),D=Math.max(K[0],x[0],i[0],o[0]),z=Math.max(K[1],x[1],i[1],o[1]);this.ctx.fillRect(E,L,D-E,z-L)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(N,H){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(N)&&N.length===6&&this.transform(...N),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),H)){const W=H[2]-H[0],ne=H[3]-H[1];this.ctx.rect(H[0],H[1],W,ne),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),H),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(N){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const H=this.ctx;N.isolated||(0,n.info)("TODO: Support non-isolated groups."),N.knockout&&(0,n.warn)("Knockout groups not supported.");const W=(0,a.getCurrentTransform)(H);if(N.matrix&&H.transform(...N.matrix),!N.bbox)throw new Error("Bounding box is required.");let ne=n.Util.getAxialAlignedBoundingBox(N.bbox,(0,a.getCurrentTransform)(H));const J=[0,0,H.canvas.width,H.canvas.height];ne=n.Util.intersect(ne,J)||[0,0,0,0];const he=Math.floor(ne[0]),Z=Math.floor(ne[1]);let K=Math.max(Math.ceil(ne[2])-he,1),x=Math.max(Math.ceil(ne[3])-Z,1),i=1,o=1;K>c&&(i=K/c,K=c),x>c&&(o=x/c,x=c),this.current.startNewPathAndClipBox([0,0,K,x]);let E="groupAt"+this.groupLevel;N.smask&&(E+="_smask_"+this.smaskCounter++%2);const L=this.cachedCanvases.getCanvas(E,K,x),D=L.context;D.scale(1/i,1/o),D.translate(-he,-Z),D.transform(...W),N.smask?this.smaskStack.push({canvas:L.canvas,context:D,offsetX:he,offsetY:Z,scaleX:i,scaleY:o,subtype:N.smask.subtype,backdrop:N.smask.backdrop,transferMap:N.smask.transferMap||null,startTransformInverse:null}):(H.setTransform(1,0,0,1,0,0),H.translate(he,Z),H.scale(i,o),H.save()),P(H,D),this.ctx=D,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(H),this.groupLevel++}endGroup(N){if(!this.contentVisible)return;this.groupLevel--;const H=this.ctx,W=this.groupStack.pop();if(this.ctx=W,this.ctx.imageSmoothingEnabled=!1,N.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const ne=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...ne);const J=n.Util.getAxialAlignedBoundingBox([0,0,H.canvas.width,H.canvas.height],ne);this.ctx.drawImage(H.canvas,0,0),this.ctx.restore(),this.compose(J)}}beginAnnotation(N,H,W,ne,J){if(oe(this,_e,Lt).call(this),R(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(H)&&H.length===4){const he=H[2]-H[0],Z=H[3]-H[1];if(J&&this.annotationCanvasMap){W=W.slice(),W[4]-=H[0],W[5]-=H[1],H=H.slice(),H[0]=H[1]=0,H[2]=he,H[3]=Z;const[K,x]=n.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:i}=this,o=Math.ceil(he*this.outputScaleX*i),E=Math.ceil(Z*this.outputScaleY*i);this.annotationCanvas=this.canvasFactory.create(o,E);const{canvas:L,context:D}=this.annotationCanvas;this.annotationCanvasMap.set(N,L),this.annotationCanvas.savedCtx=this.ctx,this.ctx=D,this.ctx.save(),this.ctx.setTransform(K,0,0,-x,0,Z*x),R(this.ctx)}else R(this.ctx),this.ctx.rect(H[0],H[1],he,Z),this.ctx.clip(),this.endPath()}this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...W),this.transform(...ne)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),oe(this,X,Ot).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(N){if(!this.contentVisible)return;const H=N.count;N=this.getObject(N.data,N),N.count=H;const W=this.ctx,ne=this.processingType3;if(ne&&(ne.compiled===void 0&&(ne.compiled=y(N)),ne.compiled)){ne.compiled(W);return}const J=this._createMaskCanvas(N),he=J.canvas;W.save(),W.setTransform(1,0,0,1,0,0),W.drawImage(he,J.offsetX,J.offsetY),W.restore(),this.compose()}paintImageMaskXObjectRepeat(N,H,W=0,ne=0,J,he){if(!this.contentVisible)return;N=this.getObject(N.data,N);const Z=this.ctx;Z.save();const K=(0,a.getCurrentTransform)(Z);Z.transform(H,W,ne,J,0,0);const x=this._createMaskCanvas(N);Z.setTransform(1,0,0,1,x.offsetX-K[4],x.offsetY-K[5]);for(let i=0,o=he.length;i<o;i+=2){const E=n.Util.transform(K,[H,W,ne,J,he[i],he[i+1]]),[L,D]=n.Util.applyTransform([0,0],E);Z.drawImage(x.canvas,L,D)}Z.restore(),this.compose()}paintImageMaskXObjectGroup(N){if(!this.contentVisible)return;const H=this.ctx,W=this.current.fillColor,ne=this.current.patternFill;for(const J of N){const{data:he,width:Z,height:K,transform:x}=J,i=this.cachedCanvases.getCanvas("maskCanvas",Z,K),o=i.context;o.save();const E=this.getObject(he,J);M(o,E),o.globalCompositeOperation="source-in",o.fillStyle=ne?W.getPattern(o,this,(0,a.getCurrentTransformInverse)(H),m.PathType.FILL):W,o.fillRect(0,0,Z,K),o.restore(),H.save(),H.transform(...x),H.scale(1,-1),C(H,i.canvas,0,0,Z,K,0,-1,1,1),H.restore()}this.compose()}paintImageXObject(N){if(!this.contentVisible)return;const H=this.getObject(N);if(!H){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(H)}paintImageXObjectRepeat(N,H,W,ne){if(!this.contentVisible)return;const J=this.getObject(N);if(!J){(0,n.warn)("Dependent image isn't ready yet");return}const he=J.width,Z=J.height,K=[];for(let x=0,i=ne.length;x<i;x+=2)K.push({transform:[H,0,0,W,ne[x],ne[x+1]],x:0,y:0,w:he,h:Z});this.paintInlineImageXObjectGroup(J,K)}applyTransferMapsToCanvas(N){return this.current.transferMaps!=="none"&&(N.filter=this.current.transferMaps,N.drawImage(N.canvas,0,0),N.filter="none"),N.canvas}applyTransferMapsToBitmap(N){if(this.current.transferMaps==="none")return N.bitmap;const{bitmap:H,width:W,height:ne}=N,J=this.cachedCanvases.getCanvas("inlineImage",W,ne),he=J.context;return he.filter=this.current.transferMaps,he.drawImage(H,0,0),he.filter="none",J.canvas}paintInlineImageXObject(N){if(!this.contentVisible)return;const H=N.width,W=N.height,ne=this.ctx;this.save(),_.isNodeJS||(ne.filter="none"),ne.scale(1/H,-1/W);let J;if(N.bitmap)J=this.applyTransferMapsToBitmap(N);else if(typeof HTMLElement=="function"&&N instanceof HTMLElement||!N.data)J=N;else{const K=this.cachedCanvases.getCanvas("inlineImage",H,W).context;S(K,N),J=this.applyTransferMapsToCanvas(K)}const he=this._scaleImage(J,(0,a.getCurrentTransformInverse)(ne));ne.imageSmoothingEnabled=q((0,a.getCurrentTransform)(ne),N.interpolate),C(ne,he.img,0,0,he.paintWidth,he.paintHeight,0,-W,H,W),this.compose(),this.restore()}paintInlineImageXObjectGroup(N,H){if(!this.contentVisible)return;const W=this.ctx;let ne;if(N.bitmap)ne=N.bitmap;else{const J=N.width,he=N.height,K=this.cachedCanvases.getCanvas("inlineImage",J,he).context;S(K,N),ne=this.applyTransferMapsToCanvas(K)}for(const J of H)W.save(),W.transform(...J.transform),W.scale(1,-1),C(W,ne,J.x,J.y,J.w,J.h,0,-1,1,1),W.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(N){}markPointProps(N,H){}beginMarkedContent(N){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(N,H){N==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(H)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(N){const H=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(N);const W=this.ctx;this.pendingClip&&(H||(this.pendingClip===ae?W.clip("evenodd"):W.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),W.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const N=(0,a.getCurrentTransform)(this.ctx);if(N[1]===0&&N[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(N[0]),Math.abs(N[3]));else{const H=Math.abs(N[0]*N[3]-N[2]*N[1]),W=Math.hypot(N[0],N[2]),ne=Math.hypot(N[1],N[3]);this._cachedGetSinglePixelWidth=Math.max(W,ne)/H}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:N}=this.current,H=(0,a.getCurrentTransform)(this.ctx);let W,ne;if(H[1]===0&&H[2]===0){const J=Math.abs(H[0]),he=Math.abs(H[3]);if(N===0)W=1/J,ne=1/he;else{const Z=J*N,K=he*N;W=Z<1?1/Z:1,ne=K<1?1/K:1}}else{const J=Math.abs(H[0]*H[3]-H[2]*H[1]),he=Math.hypot(H[0],H[1]),Z=Math.hypot(H[2],H[3]);if(N===0)W=Z/J,ne=he/J;else{const K=N*J;W=Z>K?Z/K:1,ne=he>K?he/K:1}}this._cachedScaleForStroking=[W,ne]}return this._cachedScaleForStroking}rescaleAndStroke(N){const{ctx:H}=this,{lineWidth:W}=this.current,[ne,J]=this.getScaleForStroking();if(H.lineWidth=W||1,ne===1&&J===1){H.stroke();return}let he,Z,K;N&&(he=(0,a.getCurrentTransform)(H),Z=H.getLineDash().slice(),K=H.lineDashOffset),H.scale(ne,J);const x=Math.max(ne,J);H.setLineDash(H.getLineDash().map(i=>i/x)),H.lineDashOffset/=x,H.stroke(),N&&(H.setTransform(...he),H.setLineDash(Z),H.lineDashOffset=K)}isContentVisible(){for(let N=this.markedContentStack.length-1;N>=0;N--)if(!this.markedContentStack[N].visible)return!1;return!0}};let le=Se;_e=new WeakSet,Lt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},X=new WeakSet,Ot=function(){if(this.pageColors){const N=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(N!=="none"){const H=this.ctx.filter;this.ctx.filter=N,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=H}}},t.CanvasGraphics=le;for(const ee in n.OPS)le.prototype[ee]!==void 0&&(le.prototype[n.OPS[ee]]=le.prototype[ee])},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=T;var n=r(1),a=r(6);const m={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=m;function v(C,y){if(!y)return;const g=y[2]-y[0],S=y[3]-y[1],M=new Path2D;M.rect(y[0],y[1],g,S),C.clip(M)}class _{constructor(){this.constructor===_&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class w extends _{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let g;this._type==="axial"?g=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(g=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)g.addColorStop(S[0],S[1]);return g}getPattern(y,g,S,M){let P;if(M===m.STROKE||M===m.FILL){const R=g.current.getClippedPathBoundingBox(M,(0,a.getCurrentTransform)(y))||[0,0,0,0],s=Math.ceil(R[2]-R[0])||1,h=Math.ceil(R[3]-R[1])||1,I=g.cachedCanvases.getCanvas("pattern",s,h,!0),f=I.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-R[0],-R[1]),S=n.Util.transform(S,[1,0,0,1,R[0],R[1]]),f.transform(...g.baseTransform),this.matrix&&f.transform(...this.matrix),v(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),P=y.createPattern(I.canvas,"no-repeat");const B=new DOMMatrix(S);P.setTransform(B)}else v(y,this._bbox),P=this._createGradient(y);return P}}function u(C,y,g,S,M,P,R,s){const h=y.coords,I=y.colors,f=C.data,B=C.width*4;let q;h[g+1]>h[S+1]&&(q=g,g=S,S=q,q=P,P=R,R=q),h[S+1]>h[M+1]&&(q=S,S=M,M=q,q=R,R=s,s=q),h[g+1]>h[S+1]&&(q=g,g=S,S=q,q=P,P=R,R=q);const G=(h[g]+y.offsetX)*y.scaleX,Q=(h[g+1]+y.offsetY)*y.scaleY,ue=(h[S]+y.offsetX)*y.scaleX,ae=(h[S+1]+y.offsetY)*y.scaleY,le=(h[M]+y.offsetX)*y.scaleX,_e=(h[M+1]+y.offsetY)*y.scaleY;if(Q>=_e)return;const Ae=I[P],X=I[P+1],Ee=I[P+2],Se=I[R],ee=I[R+1],N=I[R+2],H=I[s],W=I[s+1],ne=I[s+2],J=Math.round(Q),he=Math.round(_e);let Z,K,x,i,o,E,L,D;for(let z=J;z<=he;z++){if(z<ae){let Y;z<Q?Y=0:Y=(Q-z)/(Q-ae),Z=G-(G-ue)*Y,K=Ae-(Ae-Se)*Y,x=X-(X-ee)*Y,i=Ee-(Ee-N)*Y}else{let Y;z>_e?Y=1:ae===_e?Y=0:Y=(ae-z)/(ae-_e),Z=ue-(ue-le)*Y,K=Se-(Se-H)*Y,x=ee-(ee-W)*Y,i=N-(N-ne)*Y}let ie;z<Q?ie=0:z>_e?ie=1:ie=(Q-z)/(Q-_e),o=G-(G-le)*ie,E=Ae-(Ae-H)*ie,L=X-(X-W)*ie,D=Ee-(Ee-ne)*ie;const j=Math.round(Math.min(Z,o)),$=Math.round(Math.max(Z,o));let se=B*z+j*4;for(let Y=j;Y<=$;Y++)ie=(Z-Y)/(Z-o),ie<0?ie=0:ie>1&&(ie=1),f[se++]=K-(K-E)*ie|0,f[se++]=x-(x-L)*ie|0,f[se++]=i-(i-D)*ie|0,f[se++]=255}}function c(C,y,g){const S=y.coords,M=y.colors;let P,R;switch(y.type){case"lattice":const s=y.verticesPerRow,h=Math.floor(S.length/s)-1,I=s-1;for(P=0;P<h;P++){let f=P*s;for(let B=0;B<I;B++,f++)u(C,g,S[f],S[f+1],S[f+s],M[f],M[f+1],M[f+s]),u(C,g,S[f+s+1],S[f+1],S[f+s],M[f+s+1],M[f+1],M[f+s])}break;case"triangles":for(P=0,R=S.length;P<R;P+=3)u(C,g,S[P],S[P+1],S[P+2],M[P],M[P+1],M[P+2]);break;default:throw new Error("illegal figure")}}class O extends _{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,g,S){const s=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),I=Math.ceil(this._bounds[2])-s,f=Math.ceil(this._bounds[3])-h,B=Math.min(Math.ceil(Math.abs(I*y[0]*1.1)),3e3),q=Math.min(Math.ceil(Math.abs(f*y[1]*1.1)),3e3),G=I/B,Q=f/q,ue={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-h,scaleX:1/G,scaleY:1/Q},ae=B+2*2,le=q+2*2,_e=S.getCanvas("mesh",ae,le,!1),Ae=_e.context,X=Ae.createImageData(B,q);if(g){const Se=X.data;for(let ee=0,N=Se.length;ee<N;ee+=4)Se[ee]=g[0],Se[ee+1]=g[1],Se[ee+2]=g[2],Se[ee+3]=255}for(const Se of this._figures)c(X,Se,ue);return Ae.putImageData(X,2,2),{canvas:_e.canvas,offsetX:s-2*G,offsetY:h-2*Q,scaleX:G,scaleY:Q}}getPattern(y,g,S,M){v(y,this._bbox);let P;if(M===m.SHADING)P=n.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(y));else if(P=n.Util.singularValueDecompose2dScale(g.baseTransform),this.matrix){const s=n.Util.singularValueDecompose2dScale(this.matrix);P=[P[0]*s[0],P[1]*s[1]]}const R=this._createMeshCanvas(P,M===m.SHADING?null:this._background,g.cachedCanvases);return M!==m.SHADING&&(y.setTransform(...g.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(R.offsetX,R.offsetY),y.scale(R.scaleX,R.scaleY),y.createPattern(R.canvas,"no-repeat")}}class k extends _{getPattern(){return"hotpink"}}function T(C){switch(C[0]){case"RadialAxial":return new w(C);case"Mesh":return new O(C);case"Dummy":return new k}throw new Error(`Unknown IR type: ${C[0]}`)}const l={COLORED:1,UNCOLORED:2},b=class{constructor(y,g,S,M,P){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=g,this.ctx=S,this.canvasGraphicsFactory=M,this.baseTransform=P}createPatternCanvas(y){const g=this.operatorList,S=this.bbox,M=this.xstep,P=this.ystep,R=this.paintType,s=this.tilingType,h=this.color,I=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+s);const f=S[0],B=S[1],q=S[2],G=S[3],Q=n.Util.singularValueDecompose2dScale(this.matrix),ue=n.Util.singularValueDecompose2dScale(this.baseTransform),ae=[Q[0]*ue[0],Q[1]*ue[1]],le=this.getSizeAndScale(M,this.ctx.canvas.width,ae[0]),_e=this.getSizeAndScale(P,this.ctx.canvas.height,ae[1]),Ae=y.cachedCanvases.getCanvas("pattern",le.size,_e.size,!0),X=Ae.context,Ee=I.createCanvasGraphics(X);Ee.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(Ee,R,h);let Se=f,ee=B,N=q,H=G;return f<0&&(Se=0,N+=Math.abs(f)),B<0&&(ee=0,H+=Math.abs(B)),X.translate(-(le.scale*Se),-(_e.scale*ee)),Ee.transform(le.scale,0,0,_e.scale,0,0),X.save(),this.clipBbox(Ee,Se,ee,N,H),Ee.baseTransform=(0,a.getCurrentTransform)(Ee.ctx),Ee.executeOperatorList(g),Ee.endDrawing(),{canvas:Ae.canvas,scaleX:le.scale,scaleY:_e.scale,offsetX:Se,offsetY:ee}}getSizeAndScale(y,g,S){y=Math.abs(y);const M=Math.max(b.MAX_PATTERN_SIZE,g);let P=Math.ceil(y*S);return P>=M?P=M:S=P/y,{scale:S,size:P}}clipBbox(y,g,S,M,P){const R=M-g,s=P-S;y.ctx.rect(g,S,R,s),y.current.updateRectMinMax((0,a.getCurrentTransform)(y.ctx),[g,S,M,P]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,g,S){const M=y.ctx,P=y.current;switch(g){case l.COLORED:const R=this.ctx;M.fillStyle=R.fillStyle,M.strokeStyle=R.strokeStyle,P.fillColor=R.fillStyle,P.strokeColor=R.strokeStyle;break;case l.UNCOLORED:const s=n.Util.makeHexColor(S[0],S[1],S[2]);M.fillStyle=s,M.strokeStyle=s,P.fillColor=s,P.strokeColor=s;break;default:throw new n.FormatError(`Unsupported paint type: ${g}`)}}getPattern(y,g,S,M){let P=S;M!==m.SHADING&&(P=n.Util.transform(P,g.baseTransform),this.matrix&&(P=n.Util.transform(P,this.matrix)));const R=this.createPatternCanvas(g);let s=new DOMMatrix(P);s=s.translate(R.offsetX,R.offsetY),s=s.scale(1/R.scaleX,1/R.scaleY);const h=y.createPattern(R.canvas,"repeat");return h.setTransform(s),h}};let d=b;$e(d,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=d},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=m,t.convertToRGBA=a,t.grayToRGBA=_;var n=r(1);function a(w){switch(w.kind){case n.ImageKind.GRAYSCALE_1BPP:return m(w);case n.ImageKind.RGB_24BPP:return v(w)}return null}function m({src:w,srcPos:u=0,dest:c,width:O,height:k,nonBlackColor:T=4294967295,inverseDecode:l=!1}){const d=n.FeatureTest.isLittleEndian?4278190080:255,[b,C]=l?[T,d]:[d,T],y=O>>3,g=O&7,S=w.length;c=new Uint32Array(c.buffer);let M=0;for(let P=0;P<k;P++){for(const s=u+y;u<s;u++){const h=u<S?w[u]:255;c[M++]=h&128?C:b,c[M++]=h&64?C:b,c[M++]=h&32?C:b,c[M++]=h&16?C:b,c[M++]=h&8?C:b,c[M++]=h&4?C:b,c[M++]=h&2?C:b,c[M++]=h&1?C:b}if(g===0)continue;const R=u<S?w[u++]:255;for(let s=0;s<g;s++)c[M++]=R&1<<7-s?C:b}return{srcPos:u,destPos:M}}function v({src:w,srcPos:u=0,dest:c,destPos:O=0,width:k,height:T}){let l=0;const d=w.length>>2,b=new Uint32Array(w.buffer,u,d);if(n.FeatureTest.isLittleEndian){for(;l<d-2;l+=3,O+=4){const C=b[l],y=b[l+1],g=b[l+2];c[O]=C|4278190080,c[O+1]=C>>>24|y<<8|4278190080,c[O+2]=y>>>16|g<<16|4278190080,c[O+3]=g>>>8|4278190080}for(let C=l*4,y=w.length;C<y;C+=3)c[O++]=w[C]|w[C+1]<<8|w[C+2]<<16|4278190080}else{for(;l<d-2;l+=3,O+=4){const C=b[l],y=b[l+1],g=b[l+2];c[O]=C|255,c[O+1]=C<<24|y>>>8|255,c[O+2]=y<<16|g>>>16|255,c[O+3]=g<<8|255}for(let C=l*4,y=w.length;C<y;C+=3)c[O++]=w[C]<<24|w[C+1]<<16|w[C+2]<<8|255}return{srcPos:u,destPos:O}}function _(w,u){if(n.FeatureTest.isLittleEndian)for(let c=0,O=w.length;c<O;c++)u[c]=w[c]*65793|4278190080;else for(let c=0,O=w.length;c<O;c++)u[c]=w[c]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const r=Object.create(null);t.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},(e,t,r)=>{var w,Tn,c,xn,k,bt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=r(1);const a={UNKNOWN:0,DATA:1,ERROR:2},m={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function v(l){switch(l instanceof Error||typeof l=="object"&&l!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new n.AbortException(l.message);case"MissingPDFException":return new n.MissingPDFException(l.message);case"PasswordException":return new n.PasswordException(l.message,l.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(l.message,l.status);case"UnknownErrorException":return new n.UnknownErrorException(l.message,l.details);default:return new n.UnknownErrorException(l.message,l.toString())}}class _{constructor(d,b,C){te(this,w);te(this,c);te(this,k);this.sourceName=d,this.targetName=b,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const g=y.data;if(g.targetName!==this.sourceName)return;if(g.stream){oe(this,c,xn).call(this,g);return}if(g.callback){const M=g.callbackId,P=this.callbackCapabilities[M];if(!P)throw new Error(`Cannot resolve callback ${M}`);if(delete this.callbackCapabilities[M],g.callback===a.DATA)P.resolve(g.data);else if(g.callback===a.ERROR)P.reject(v(g.reason));else throw new Error("Unexpected callback case");return}const S=this.actionHandler[g.action];if(!S)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const M=this.sourceName,P=g.sourceName;new Promise(function(R){R(S(g.data))}).then(function(R){C.postMessage({sourceName:M,targetName:P,callback:a.DATA,callbackId:g.callbackId,data:R})},function(R){C.postMessage({sourceName:M,targetName:P,callback:a.ERROR,callbackId:g.callbackId,reason:v(R)})});return}if(g.streamId){oe(this,w,Tn).call(this,g);return}S(g.data)},C.addEventListener("message",this._onComObjOnMessage)}on(d,b){const C=this.actionHandler;if(C[d])throw new Error(`There is already an actionName called "${d}"`);C[d]=b}send(d,b,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:b},C)}sendWithPromise(d,b,C){const y=this.callbackId++,g=new n.PromiseCapability;this.callbackCapabilities[y]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:y,data:b},C)}catch(S){g.reject(S)}return g.promise}sendWithStream(d,b,C,y){const g=this.streamId++,S=this.sourceName,M=this.targetName,P=this.comObj;return new ReadableStream({start:R=>{const s=new n.PromiseCapability;return this.streamControllers[g]={controller:R,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},P.postMessage({sourceName:S,targetName:M,action:d,streamId:g,data:b,desiredSize:R.desiredSize},y),s.promise},pull:R=>{const s=new n.PromiseCapability;return this.streamControllers[g].pullCall=s,P.postMessage({sourceName:S,targetName:M,stream:m.PULL,streamId:g,desiredSize:R.desiredSize}),s.promise},cancel:R=>{(0,n.assert)(R instanceof Error,"cancel must have a valid reason");const s=new n.PromiseCapability;return this.streamControllers[g].cancelCall=s,this.streamControllers[g].isClosed=!0,P.postMessage({sourceName:S,targetName:M,stream:m.CANCEL,streamId:g,reason:v(R)}),s.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}w=new WeakSet,Tn=function(d){const b=d.streamId,C=this.sourceName,y=d.sourceName,g=this.comObj,S=this,M=this.actionHandler[d.action],P={enqueue(R,s=1,h){if(this.isCancelled)return;const I=this.desiredSize;this.desiredSize-=s,I>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),g.postMessage({sourceName:C,targetName:y,stream:m.ENQUEUE,streamId:b,chunk:R},h)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:C,targetName:y,stream:m.CLOSE,streamId:b}),delete S.streamSinks[b])},error(R){(0,n.assert)(R instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:C,targetName:y,stream:m.ERROR,streamId:b,reason:v(R)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};P.sinkCapability.resolve(),P.ready=P.sinkCapability.promise,this.streamSinks[b]=P,new Promise(function(R){R(M(d.data,P))}).then(function(){g.postMessage({sourceName:C,targetName:y,stream:m.START_COMPLETE,streamId:b,success:!0})},function(R){g.postMessage({sourceName:C,targetName:y,stream:m.START_COMPLETE,streamId:b,reason:v(R)})})},c=new WeakSet,xn=function(d){const b=d.streamId,C=this.sourceName,y=d.sourceName,g=this.comObj,S=this.streamControllers[b],M=this.streamSinks[b];switch(d.stream){case m.START_COMPLETE:d.success?S.startCall.resolve():S.startCall.reject(v(d.reason));break;case m.PULL_COMPLETE:d.success?S.pullCall.resolve():S.pullCall.reject(v(d.reason));break;case m.PULL:if(!M){g.postMessage({sourceName:C,targetName:y,stream:m.PULL_COMPLETE,streamId:b,success:!0});break}M.desiredSize<=0&&d.desiredSize>0&&M.sinkCapability.resolve(),M.desiredSize=d.desiredSize,new Promise(function(P){var R;P((R=M.onPull)==null?void 0:R.call(M))}).then(function(){g.postMessage({sourceName:C,targetName:y,stream:m.PULL_COMPLETE,streamId:b,success:!0})},function(P){g.postMessage({sourceName:C,targetName:y,stream:m.PULL_COMPLETE,streamId:b,reason:v(P)})});break;case m.ENQUEUE:if((0,n.assert)(S,"enqueue should have stream controller"),S.isClosed)break;S.controller.enqueue(d.chunk);break;case m.CLOSE:if((0,n.assert)(S,"close should have stream controller"),S.isClosed)break;S.isClosed=!0,S.controller.close(),oe(this,k,bt).call(this,S,b);break;case m.ERROR:(0,n.assert)(S,"error should have stream controller"),S.controller.error(v(d.reason)),oe(this,k,bt).call(this,S,b);break;case m.CANCEL_COMPLETE:d.success?S.cancelCall.resolve():S.cancelCall.reject(v(d.reason)),oe(this,k,bt).call(this,S,b);break;case m.CANCEL:if(!M)break;new Promise(function(P){var R;P((R=M.onCancel)==null?void 0:R.call(M,v(d.reason)))}).then(function(){g.postMessage({sourceName:C,targetName:y,stream:m.CANCEL_COMPLETE,streamId:b,success:!0})},function(P){g.postMessage({sourceName:C,targetName:y,stream:m.CANCEL_COMPLETE,streamId:b,reason:v(P)})}),M.sinkCapability.reject(v(d.reason)),M.isCancelled=!0,delete this.streamSinks[b];break;default:throw new Error("Unexpected stream case")}},k=new WeakSet,bt=async function(d,b){var C,y,g;await Promise.allSettled([(C=d.startCall)==null?void 0:C.promise,(y=d.pullCall)==null?void 0:y.promise,(g=d.cancelCall)==null?void 0:g.promise]),delete this.streamControllers[b]},t.MessageHandler=_},(e,t,r)=>{var m,v;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=r(1);class a{constructor({parsedData:w,rawData:u}){te(this,m,void 0);te(this,v,void 0);ye(this,m,w),ye(this,v,u)}getRaw(){return A(this,v)}get(w){var u;return(u=A(this,m).get(w))!=null?u:null}getAll(){return(0,n.objectFromMap)(A(this,m))}has(w){return A(this,m).has(w)}}m=new WeakMap,v=new WeakMap,t.Metadata=a},(e,t,r)=>{var w,u,c,O,k,T,Dt;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=r(1),a=r(8);const m=Symbol("INTERNAL");class v{constructor(b,C){te(this,w,!0);this.name=b,this.intent=C}get visible(){return A(this,w)}_setVisible(b,C){b!==m&&(0,n.unreachable)("Internal method `_setVisible` called."),ye(this,w,C)}}w=new WeakMap;class _{constructor(b){te(this,T);te(this,u,null);te(this,c,new Map);te(this,O,null);te(this,k,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,ye(this,k,b.order);for(const C of b.groups)A(this,c).set(C.id,new v(C.name,C.intent));if(b.baseState==="OFF")for(const C of A(this,c).values())C._setVisible(m,!1);for(const C of b.on)A(this,c).get(C)._setVisible(m,!0);for(const C of b.off)A(this,c).get(C)._setVisible(m,!1);ye(this,O,this.getHash())}}isVisible(b){if(A(this,c).size===0)return!0;if(!b)return(0,n.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return A(this,c).has(b.id)?A(this,c).get(b.id).visible:((0,n.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return oe(this,T,Dt).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const C of b.ids){if(!A(this,c).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(A(this,c).get(C).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const C of b.ids){if(!A(this,c).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!A(this,c).get(C).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const C of b.ids){if(!A(this,c).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!A(this,c).get(C).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const C of b.ids){if(!A(this,c).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(A(this,c).get(C).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,n.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,C=!0){if(!A(this,c).has(b)){(0,n.warn)(`Optional content group not found: ${b}`);return}A(this,c).get(b)._setVisible(m,!!C),ye(this,u,null)}get hasInitialVisibility(){return this.getHash()===A(this,O)}getOrder(){return A(this,c).size?A(this,k)?A(this,k).slice():[...A(this,c).keys()]:null}getGroups(){return A(this,c).size>0?(0,n.objectFromMap)(A(this,c)):null}getGroup(b){return A(this,c).get(b)||null}getHash(){if(A(this,u)!==null)return A(this,u);const b=new a.MurmurHash3_64;for(const[C,y]of A(this,c))b.update(`${C}:${y.visible}`);return ye(this,u,b.hexdigest())}}u=new WeakMap,c=new WeakMap,O=new WeakMap,k=new WeakMap,T=new WeakSet,Dt=function(b){const C=b.length;if(C<2)return!0;const y=b[0];for(let g=1;g<C;g++){const S=b[g];let M;if(Array.isArray(S))M=oe(this,T,Dt).call(this,S);else if(A(this,c).has(S))M=A(this,c).get(S).visible;else return(0,n.warn)(`Optional content group not found: ${S}`),!0;switch(y){case"And":if(!M)return!1;break;case"Or":if(M)return!0;break;case"Not":return!M;default:return!0}}return y==="And"},t.OptionalContentConfig=_},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=r(1),a=r(6);class m{constructor({length:u,initialData:c,progressiveDone:O=!1,contentDispositionFilename:k=null,disableRange:T=!1,disableStream:l=!1},d){if((0,n.assert)(d,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=O,this._contentDispositionFilename=k,(c==null?void 0:c.length)>0){const b=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=d,this._isStreamingSupported=!l,this._isRangeSupported=!T,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,C)=>{this._onReceiveData({begin:b,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((b,C)=>{this._onProgress({loaded:b,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:c}){const O=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(O):this._queuedChunks.push(O);else{const k=this._rangeReaders.some(function(T){return T._begin!==u?!1:(T._enqueue(O),!0)});(0,n.assert)(k,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u,c;return(c=(u=this._fullRequestReader)==null?void 0:u._loaded)!=null?c:0}_onProgress(u){var c,O,k,T;u.total===void 0?(O=(c=this._rangeReaders[0])==null?void 0:c.onProgress)==null||O.call(c,{loaded:u.loaded}):(T=(k=this._fullRequestReader)==null?void 0:k.onProgress)==null||T.call(k,{loaded:u.loaded,total:u.total})}_onProgressiveDone(){var u;(u=this._fullRequestReader)==null||u.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const c=this._rangeReaders.indexOf(u);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new v(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,c){if(c<=this._progressiveDataLength)return null;const O=new _(this,u,c);return this._pdfDataRangeTransport.requestDataRange(u,c),this._rangeReaders.push(O),O}cancelAllRequests(u){var c;(c=this._fullRequestReader)==null||c.cancel(u);for(const O of this._rangeReaders.slice(0))O.cancel(u);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=m;class v{constructor(u,c,O=!1,k=null){this._stream=u,this._done=O||!1,this._filename=(0,a.isPdfFile)(k)?k:null,this._queuedChunks=c||[],this._loaded=0;for(const T of this._queuedChunks)this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new n.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(u,c,O){this._stream=u,this._begin=c,this._end=O,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new n.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class r{static textContent(a){const m=[],v={items:m,styles:Object.create(null)};function _(w){var O;if(!w)return;let u=null;const c=w.name;if(c==="#text")u=w.value;else if(r.shouldBuildText(c))(O=w==null?void 0:w.attributes)!=null&&O.textContent?u=w.attributes.textContent:w.value&&(u=w.value);else return;if(u!==null&&m.push({str:u}),!!w.children)for(const k of w.children)_(k)}return _(a),v}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}t.XfaText=r},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=r(7);const a=function(u){return new Promise((c,O)=>{require$$5.readFile(u,(T,l)=>{if(T||!l){O(new Error(T));return}c(new Uint8Array(l))})})};class m extends n.BaseFilterFactory{}t.NodeFilterFactory=m;class v extends n.BaseCanvasFactory{_createCanvas(c,O){return require$$5.createCanvas(c,O)}}t.NodeCanvasFactory=v;class _ extends n.BaseCMapReaderFactory{_fetchData(c,O){return a(c).then(k=>({cMapData:k,compressionType:O}))}}t.NodeCMapReaderFactory=_;class w extends n.BaseStandardFontDataFactory{_fetchData(c){return a(c)}}t.NodeStandardFontDataFactory=w},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=r(1),a=r(22);const m=require$$5,v=require$$5,_=require$$5,w=require$$5,u=/^file:\/\/\/[a-zA-Z]:\//;function c(g){const S=w.parse(g);return S.protocol==="file:"||S.host?S:/^[a-z]:[/\\]/i.test(g)?w.parse(`file:///${g}`):(S.host||(S.protocol="file:"),S)}class O{constructor(S){this.source=S,this.url=c(S.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S,M;return(M=(S=this._fullRequestReader)==null?void 0:S._loaded)!=null?M:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new d(this),this._fullRequestReader}getRangeReader(S,M){if(M<=this._progressiveDataLength)return null;const P=this.isFsUrl?new y(this,S,M):new b(this,S,M);return this._rangeRequestReaders.push(P),P}cancelAllRequests(S){var M;(M=this._fullRequestReader)==null||M.cancel(S);for(const P of this._rangeRequestReaders.slice(0))P.cancel(S)}}t.PDFNodeStream=O;class k{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;const M=S.source;this._contentLength=M.length,this._loaded=0,this._filename=null,this._disableRange=M.disableRange||!1,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!M.disableStream,this._isRangeSupported=!M.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=S.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",M=>{this._error(M)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class T{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const M=S.source;this._isStreamingSupported=!M.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=S.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",M=>{this._error(M)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(g,S){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:S}}class d extends k{constructor(S){super(S);const M=P=>{if(P.statusCode===404){const I=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=I,this._headersCapability.reject(I);return}this._headersCapability.resolve(),this._setReadableStream(P);const R=I=>this._readableStream.headers[I.toLowerCase()],{allowRangeRequests:s,suggestedLength:h}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:R,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=h||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(R)};this._request=null,this._url.protocol==="http:"?this._request=v.request(l(this._url,S.httpHeaders),M):this._request=_.request(l(this._url,S.httpHeaders),M),this._request.on("error",P=>{this._storedError=P,this._headersCapability.reject(P)}),this._request.end()}}class b extends T{constructor(S,M,P){super(S),this._httpHeaders={};for(const s in S.httpHeaders){const h=S.httpHeaders[s];h!==void 0&&(this._httpHeaders[s]=h)}this._httpHeaders.Range=`bytes=${M}-${P-1}`;const R=s=>{if(s.statusCode===404){const h=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(s)};this._request=null,this._url.protocol==="http:"?this._request=v.request(l(this._url,this._httpHeaders),R):this._request=_.request(l(this._url,this._httpHeaders),R),this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class C extends k{constructor(S){super(S);let M=decodeURIComponent(this._url.path);u.test(this._url.href)&&(M=M.replace(/^\//,"")),m.lstat(M,(P,R)=>{if(P){P.code==="ENOENT"&&(P=new n.MissingPDFException(`Missing PDF "${M}".`)),this._storedError=P,this._headersCapability.reject(P);return}this._contentLength=R.size,this._setReadableStream(m.createReadStream(M)),this._headersCapability.resolve()})}}class y extends T{constructor(S,M,P){super(S);let R=decodeURIComponent(this._url.path);u.test(this._url.href)&&(R=R.replace(/^\//,"")),this._setReadableStream(m.createReadStream(R,{start:M,end:P-1}))}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=w,t.extractFilenameFromHeader=_,t.validateRangeRequestCapabilities=v,t.validateResponseStatus=u;var n=r(1),a=r(23),m=r(6);function v({getResponseHeader:c,isHttp:O,rangeChunkSize:k,disableRange:T}){const l={allowRangeRequests:!1,suggestedLength:void 0},d=parseInt(c("Content-Length"),10);return!Number.isInteger(d)||(l.suggestedLength=d,d<=2*k)||T||!O||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(l.allowRangeRequests=!0),l}function _(c){const O=c("Content-Disposition");if(O){let k=(0,a.getFilenameFromContentDispositionHeader)(O);if(k.includes("%"))try{k=decodeURIComponent(k)}catch{}if((0,m.isPdfFile)(k))return k}return null}function w(c,O){return c===404||c===0&&O.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+O+'".'):new n.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${O}".`,c)}function u(c){return c===200||c===206}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=a;var n=r(1);function a(m){let v=!0,_=w("filename\\*","i").exec(m);if(_){_=_[1];let d=k(_);return d=unescape(d),d=T(d),d=l(d),c(d)}if(_=O(m),_){const d=l(_);return c(d)}if(_=w("filename","i").exec(m),_){_=_[1];let d=k(_);return d=l(d),c(d)}function w(d,b){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function u(d,b){if(d){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const C=new TextDecoder(d,{fatal:!0}),y=(0,n.stringToBytes)(b);b=C.decode(y),v=!1}catch{}}return b}function c(d){return v&&/[\x80-\xff]/.test(d)&&(d=u("utf-8",d),v&&(d=u("iso-8859-1",d))),d}function O(d){const b=[];let C;const y=w("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(C=y.exec(d))!==null;){let[,S,M,P]=C;if(S=parseInt(S,10),S in b){if(S===0)break;continue}b[S]=[M,P]}const g=[];for(let S=0;S<b.length&&S in b;++S){let[M,P]=b[S];P=k(P),M&&(P=unescape(P),S===0&&(P=T(P))),g.push(P)}return g.join("")}function k(d){if(d.startsWith('"')){const b=d.slice(1).split('\\"');for(let C=0;C<b.length;++C){const y=b[C].indexOf('"');y!==-1&&(b[C]=b[C].slice(0,y),b.length=C+1),b[C]=b[C].replaceAll(/\\(.)/g,"$1")}d=b.join('"')}return d}function T(d){const b=d.indexOf("'");if(b===-1)return d;const C=d.slice(0,b),g=d.slice(b+1).replace(/^[^']*'/,"");return u(C,g)}function l(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,C,y,g){if(y==="q"||y==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,M){return String.fromCharCode(parseInt(M,16))}),u(C,g);try{g=atob(g)}catch{}return u(C,g)})}return""}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=r(1),a=r(22);const m=200,v=206;function _(k){const T=k.response;return typeof T!="string"?T:(0,n.stringToBytes)(T).buffer}class w{constructor(T,l={}){this.url=T,this.isHttp=/^https?:/i.test(T),this.httpHeaders=this.isHttp&&l.httpHeaders||Object.create(null),this.withCredentials=l.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(T,l,d){const b={begin:T,end:l};for(const C in d)b[C]=d[C];return this.request(b)}requestFull(T){return this.request(T)}request(T){const l=new XMLHttpRequest,d=this.currXhrId++,b=this.pendingRequests[d]={xhr:l};l.open("GET",this.url),l.withCredentials=this.withCredentials;for(const C in this.httpHeaders){const y=this.httpHeaders[C];y!==void 0&&l.setRequestHeader(C,y)}return this.isHttp&&"begin"in T&&"end"in T?(l.setRequestHeader("Range",`bytes=${T.begin}-${T.end-1}`),b.expectedStatus=v):b.expectedStatus=m,l.responseType="arraybuffer",T.onError&&(l.onerror=function(C){T.onError(l.status)}),l.onreadystatechange=this.onStateChange.bind(this,d),l.onprogress=this.onProgress.bind(this,d),b.onHeadersReceived=T.onHeadersReceived,b.onDone=T.onDone,b.onError=T.onError,b.onProgress=T.onProgress,l.send(null),d}onProgress(T,l){var b;const d=this.pendingRequests[T];!d||(b=d.onProgress)==null||b.call(d,l)}onStateChange(T,l){var S,M,P;const d=this.pendingRequests[T];if(!d)return;const b=d.xhr;if(b.readyState>=2&&d.onHeadersReceived&&(d.onHeadersReceived(),delete d.onHeadersReceived),b.readyState!==4||!(T in this.pendingRequests))return;if(delete this.pendingRequests[T],b.status===0&&this.isHttp){(S=d.onError)==null||S.call(d,b.status);return}const C=b.status||m;if(!(C===m&&d.expectedStatus===v)&&C!==d.expectedStatus){(M=d.onError)==null||M.call(d,b.status);return}const g=_(b);if(C===v){const R=b.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);d.onDone({begin:parseInt(s[1],10),chunk:g})}else g?d.onDone({begin:0,chunk:g}):(P=d.onError)==null||P.call(d,b.status)}getRequestXhr(T){return this.pendingRequests[T].xhr}isPendingRequest(T){return T in this.pendingRequests}abortRequest(T){const l=this.pendingRequests[T].xhr;delete this.pendingRequests[T],l.abort()}}class u{constructor(T){this._source=T,this._manager=new w(T.url,{httpHeaders:T.httpHeaders,withCredentials:T.withCredentials}),this._rangeChunkSize=T.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(T){const l=this._rangeRequestReaders.indexOf(T);l>=0&&this._rangeRequestReaders.splice(l,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(T,l){const d=new O(this._manager,T,l);return d.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(d),d}cancelAllRequests(T){var l;(l=this._fullRequestReader)==null||l.cancel(T);for(const d of this._rangeRequestReaders.slice(0))d.cancel(T)}}t.PDFNetworkStream=u;class c{constructor(T,l){this._manager=T;const d={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=l.url,this._fullRequestId=T.requestFull(d),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=l.disableRange||!1,this._contentLength=l.length,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const T=this._fullRequestId,l=this._manager.getRequestXhr(T),d=y=>l.getResponseHeader(y),{allowRangeRequests:b,suggestedLength:C}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=C||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(d),this._isRangeSupported&&this._manager.abortRequest(T),this._headersReceivedCapability.resolve()}_onDone(T){if(T&&(this._requests.length>0?this._requests.shift().resolve({value:T.chunk,done:!1}):this._cachedChunks.push(T.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(T){this._storedError=(0,a.createResponseStatusError)(T,this._url),this._headersReceivedCapability.reject(this._storedError);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(T){var l;(l=this.onProgress)==null||l.call(this,{loaded:T.loaded,total:T.lengthComputable?T.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new n.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0,this._headersReceivedCapability.reject(T);for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class O{constructor(T,l,d){this._manager=T;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._requestId=T.requestRange(l,d,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var T;(T=this.onClosed)==null||T.call(this,this)}_onDone(T){const l=T.chunk;this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunk=l,this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(T){this._storedError=(0,a.createResponseStatusError)(T,this._url);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(T){var l;this.isStreamingSupported||(l=this.onProgress)==null||l.call(this,{loaded:T.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new n.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=r(1),a=r(22);function m(O,k,T){return{method:"GET",headers:O,signal:T.signal,mode:"cors",credentials:k?"include":"same-origin",redirect:"follow"}}function v(O){const k=new Headers;for(const T in O){const l=O[T];l!==void 0&&k.append(T,l)}return k}function _(O){return O instanceof Uint8Array?O.buffer:O instanceof ArrayBuffer?O:((0,n.warn)(`getArrayBuffer - unexpected data format: ${O}`),new Uint8Array(O).buffer)}class w{constructor(k){this.source=k,this.isHttp=/^https?:/i.test(k.url),this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k,T;return(T=(k=this._fullRequestReader)==null?void 0:k._loaded)!=null?T:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(k,T){if(T<=this._progressiveDataLength)return null;const l=new c(this,k,T);return this._rangeRequestReaders.push(l),l}cancelAllRequests(k){var T;(T=this._fullRequestReader)==null||T.cancel(k);for(const l of this._rangeRequestReaders.slice(0))l.cancel(k)}}t.PDFFetchStream=w;class u{constructor(k){this._stream=k,this._reader=null,this._loaded=0,this._filename=null;const T=k.source;this._withCredentials=T.withCredentials||!1,this._contentLength=T.length,this._headersCapability=new n.PromiseCapability,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._headers=v(this._stream.httpHeaders);const l=T.url;fetch(l,m(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,a.validateResponseStatus)(d.status))throw(0,a.createResponseStatusError)(d.status,l);this._reader=d.body.getReader(),this._headersCapability.resolve();const b=g=>d.headers.get(g),{allowRangeRequests:C,suggestedLength:y}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=y||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var l;await this._headersCapability.promise;const{value:k,done:T}=await this._reader.read();return T?{value:k,done:T}:(this._loaded+=k.byteLength,(l=this.onProgress)==null||l.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_(k),done:!1})}cancel(k){var T;(T=this._reader)==null||T.cancel(k),this._abortController.abort()}}class c{constructor(k,T,l){this._stream=k,this._reader=null,this._loaded=0;const d=k.source;this._withCredentials=d.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!d.disableStream,this._abortController=new AbortController,this._headers=v(this._stream.httpHeaders),this._headers.append("Range",`bytes=${T}-${l-1}`);const b=d.url;fetch(b,m(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,a.validateResponseStatus)(C.status))throw(0,a.createResponseStatusError)(C.status,b);this._readCapability.resolve(),this._reader=C.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var l;await this._readCapability.promise;const{value:k,done:T}=await this._reader.read();return T?{value:k,done:T}:(this._loaded+=k.byteLength,(l=this.onProgress)==null||l.call(this,{loaded:this._loaded}),{value:_(k),done:!1})}cancel(k){var T;(T=this._reader)==null||T.cancel(k),this._abortController.abort()}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=d,t.updateTextLayer=b;var n=r(1),a=r(6);const m=1e5,v=30,_=.8,w=new Map;function u(C,y){let g;if(y&&n.FeatureTest.isOffscreenCanvasSupported)g=new OffscreenCanvas(C,C).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=C,g=S.getContext("2d",{alpha:!1})}return g}function c(C,y){const g=w.get(C);if(g)return g;const S=u(v,y);S.font=`${v}px ${C}`;const M=S.measureText("");let P=M.fontBoundingBoxAscent,R=Math.abs(M.fontBoundingBoxDescent);if(P){const h=P/(P+R);return w.set(C,h),S.canvas.width=S.canvas.height=0,h}S.strokeStyle="red",S.clearRect(0,0,v,v),S.strokeText("g",0,0);let s=S.getImageData(0,0,v,v).data;R=0;for(let h=s.length-1-3;h>=0;h-=4)if(s[h]>0){R=Math.ceil(h/4/v);break}S.clearRect(0,0,v,v),S.strokeText("A",0,v),s=S.getImageData(0,0,v,v).data,P=0;for(let h=0,I=s.length;h<I;h+=4)if(s[h]>0){P=v-Math.floor(h/4/v);break}if(S.canvas.width=S.canvas.height=0,P){const h=P/(P+R);return w.set(C,h),h}return w.set(C,_),_}function O(C,y,g){const S=document.createElement("span"),M={angle:0,canvasWidth:0,hasText:y.str!=="",hasEOL:y.hasEOL,fontSize:0};C._textDivs.push(S);const P=n.Util.transform(C._transform,y.transform);let R=Math.atan2(P[1],P[0]);const s=g[y.fontName];s.vertical&&(R+=Math.PI/2);const h=Math.hypot(P[2],P[3]),I=h*c(s.fontFamily,C._isOffscreenCanvasSupported);let f,B;R===0?(f=P[4],B=P[5]-I):(f=P[4]+I*Math.sin(R),B=P[5]-I*Math.cos(R));const q="calc(var(--scale-factor)*",G=S.style;C._container===C._rootContainer?(G.left=`${(100*f/C._pageWidth).toFixed(2)}%`,G.top=`${(100*B/C._pageHeight).toFixed(2)}%`):(G.left=`${q}${f.toFixed(2)}px)`,G.top=`${q}${B.toFixed(2)}px)`),G.fontSize=`${q}${h.toFixed(2)}px)`,G.fontFamily=s.fontFamily,M.fontSize=h,S.setAttribute("role","presentation"),S.textContent=y.str,S.dir=y.dir,C._fontInspectorEnabled&&(S.dataset.fontName=y.fontName),R!==0&&(M.angle=R*(180/Math.PI));let Q=!1;if(y.str.length>1)Q=!0;else if(y.str!==" "&&y.transform[0]!==y.transform[3]){const ue=Math.abs(y.transform[0]),ae=Math.abs(y.transform[3]);ue!==ae&&Math.max(ue,ae)/Math.min(ue,ae)>1.5&&(Q=!0)}Q&&(M.canvasWidth=s.vertical?y.height:y.width),C._textDivProperties.set(S,M),C._isReadableStream&&C._layoutText(S)}function k(C){const{div:y,scale:g,properties:S,ctx:M,prevFontSize:P,prevFontFamily:R}=C,{style:s}=y;let h="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:I}=s,{canvasWidth:f,fontSize:B}=S;(P!==B||R!==I)&&(M.font=`${B*g}px ${I}`,C.prevFontSize=B,C.prevFontFamily=I);const{width:q}=M.measureText(y.textContent);q>0&&(h=`scaleX(${f*g/q})`)}S.angle!==0&&(h=`rotate(${S.angle}deg) ${h}`),h.length>0&&(s.transform=h)}function T(C){if(C._canceled)return;const y=C._textDivs,g=C._capability;if(y.length>m){g.resolve();return}if(!C._isReadableStream)for(const M of y)C._layoutText(M);g.resolve()}class l{constructor({textContentSource:y,container:g,viewport:S,textDivs:M,textDivProperties:P,textContentItemsStr:R,isOffscreenCanvasSupported:s}){var q;this._textContentSource=y,this._isReadableStream=y instanceof ReadableStream,this._container=this._rootContainer=g,this._textDivs=M||[],this._textContentItemsStr=R||[],this._isOffscreenCanvasSupported=s,this._fontInspectorEnabled=!!((q=globalThis.FontInspector)!=null&&q.enabled),this._reader=null,this._textDivProperties=P||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,s)};const{pageWidth:h,pageHeight:I,pageX:f,pageY:B}=S.rawDims;this._transform=[1,0,0,-1,-f,B+I],this._pageWidth=h,this._pageHeight=I,(0,a.setLayerDimensions)(g,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(y,g){for(const S of y){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){const M=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),M.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),O(this,S,g)}}_layoutText(y){const g=this._layoutTextParams.properties=this._textDivProperties.get(y);if(this._layoutTextParams.div=y,k(this._layoutTextParams),g.hasText&&this._container.append(y),g.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const y=new n.PromiseCapability;let g=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:M,done:P})=>{if(P){y.resolve();return}Object.assign(g,M.styles),this._processItems(M.items,g),S()},y.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){const{items:S,styles:M}=this._textContentSource;this._processItems(S,M),y.resolve()}else throw new Error('No "textContentSource" parameter specified.');y.promise.then(()=>{g=null,T(this)},this._capability.reject)}}t.TextLayerRenderTask=l;function d(C){!C.textContentSource&&(C.textContent||C.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),C.textContentSource=C.textContent||C.textContentStream);const{container:y,viewport:g}=C,S=getComputedStyle(y),M=S.getPropertyValue("visibility"),P=parseFloat(S.getPropertyValue("--scale-factor"));M==="visible"&&(!P||Math.abs(P-g.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const R=new l(C);return R._render(),R}function b({container:C,viewport:y,textDivs:g,textDivProperties:S,isOffscreenCanvasSupported:M,mustRotate:P=!0,mustRescale:R=!0}){if(P&&(0,a.setLayerDimensions)(C,{rotation:y.rotation}),R){const s=u(0,M),h=y.scale*(globalThis.devicePixelRatio||1),I={prevFontSize:null,prevFontFamily:null,div:null,scale:h,properties:null,ctx:s};for(const f of g)I.properties=S.get(f),I.div=f,k(I)}}},(e,t,r)=>{var u,c,O,k,T,l,d,b,C,Nt,g,kn,M,Bt,R,Vt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=r(1),a=r(5),m=r(28),v=r(29),_=r(6);const h=class{constructor(f){te(this,C);te(this,g);te(this,M);te(this,R);te(this,u,void 0);te(this,c,!1);te(this,O,this.pointerup.bind(this));te(this,k,this.pointerdown.bind(this));te(this,T,new Map);te(this,l,!1);te(this,d,!1);te(this,b,void 0);h._initialized||(h._initialized=!0,m.FreeTextEditor.initialize(f.l10n),v.InkEditor.initialize(f.l10n)),f.uiManager.registerEditorTypes([m.FreeTextEditor,v.InkEditor]),ye(this,b,f.uiManager),this.pageIndex=f.pageIndex,this.div=f.div,ye(this,u,f.accessibilityManager),A(this,b).addLayer(this)}get isEmpty(){return A(this,T).size===0}updateToolbar(f){A(this,b).updateToolbar(f)}updateMode(f=A(this,b).getMode()){oe(this,R,Vt).call(this),f===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),A(this,b).unselectAll(),f!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",f===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",f===n.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(f){if(!f&&A(this,b).getMode()!==n.AnnotationEditorType.INK)return;if(!f){for(const q of A(this,T).values())if(q.isEmpty()){q.setInBackground();return}}oe(this,M,Bt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(f){A(this,b).setEditingState(f)}addCommands(f){A(this,b).addCommands(f)}enable(){this.div.style.pointerEvents="auto";for(const f of A(this,T).values())f.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const f of A(this,T).values())f.disableEditing();oe(this,R,Vt).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(f){A(this,b).getActive()!==f&&A(this,b).setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",A(this,k)),this.div.addEventListener("pointerup",A(this,O))}disableClick(){this.div.removeEventListener("pointerdown",A(this,k)),this.div.removeEventListener("pointerup",A(this,O))}attach(f){A(this,T).set(f.id,f)}detach(f){var B;A(this,T).delete(f.id),(B=A(this,u))==null||B.removePointerInTextLayer(f.contentDiv)}remove(f){A(this,b).removeEditor(f),this.detach(f),f.div.style.display="none",setTimeout(()=>{f.div.style.display="",f.div.remove(),f.isAttachedToDOM=!1,document.activeElement===document.body&&A(this,b).focusMainContainer()},0),A(this,d)||this.addInkEditorIfNeeded(!1)}add(f){if(oe(this,C,Nt).call(this,f),A(this,b).addEditor(f),this.attach(f),!f.isAttachedToDOM){const B=f.render();this.div.append(B),f.isAttachedToDOM=!0}this.moveEditorInDOM(f),f.onceAdded(),A(this,b).addToAnnotationStorage(f)}moveEditorInDOM(f){var B;(B=A(this,u))==null||B.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addANewEditor(f){const B=()=>{this.addOrRebuild(f)},q=()=>{f.remove()};this.addCommands({cmd:B,undo:q,mustExec:!0})}addUndoableEditor(f){const B=()=>{this.addOrRebuild(f)},q=()=>{f.remove()};this.addCommands({cmd:B,undo:q,mustExec:!1})}getNextId(){return A(this,b).getId()}deserialize(f){switch(f.annotationType){case n.AnnotationEditorType.FREETEXT:return m.FreeTextEditor.deserialize(f,this,A(this,b));case n.AnnotationEditorType.INK:return v.InkEditor.deserialize(f,this,A(this,b))}return null}setSelected(f){A(this,b).setSelected(f)}toggleSelected(f){A(this,b).toggleSelected(f)}isSelected(f){return A(this,b).isSelected(f)}unselect(f){A(this,b).unselect(f)}pointerup(f){const{isMac:B}=n.FeatureTest.platform;if(!(f.button!==0||f.ctrlKey&&B)&&f.target===this.div&&!!A(this,l)){if(ye(this,l,!1),!A(this,c)){ye(this,c,!0);return}oe(this,M,Bt).call(this,f)}}pointerdown(f){const{isMac:B}=n.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&B||f.target!==this.div)return;ye(this,l,!0);const q=A(this,b).getActive();ye(this,c,!q||q.isEmpty())}drop(f){const B=f.dataTransfer.getData("text/plain"),q=A(this,b).getEditor(B);if(!q)return;f.preventDefault(),f.dataTransfer.dropEffect="move",oe(this,C,Nt).call(this,q);const G=this.div.getBoundingClientRect(),Q=f.clientX-G.x,ue=f.clientY-G.y;q.translate(Q-q.startX,ue-q.startY),this.moveEditorInDOM(q),q.div.focus()}dragover(f){f.preventDefault()}destroy(){var f,B;((f=A(this,b).getActive())==null?void 0:f.parent)===this&&A(this,b).setActiveEditor(null);for(const q of A(this,T).values())(B=A(this,u))==null||B.removePointerInTextLayer(q.contentDiv),q.setParent(null),q.isAttachedToDOM=!1,q.div.remove();this.div=null,A(this,T).clear(),A(this,b).removeLayer(this)}render({viewport:f}){this.viewport=f,(0,_.setLayerDimensions)(this.div,f),(0,a.bindEvents)(this,this.div,["dragover","drop"]);for(const B of A(this,b).getEditors(this.pageIndex))this.add(B);this.updateMode()}update({viewport:f}){A(this,b).commitOrRemove(),this.viewport=f,(0,_.setLayerDimensions)(this.div,{rotation:f.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:f,pageHeight:B}=this.viewport.rawDims;return[f,B]}};let w=h;u=new WeakMap,c=new WeakMap,O=new WeakMap,k=new WeakMap,T=new WeakMap,l=new WeakMap,d=new WeakMap,b=new WeakMap,C=new WeakSet,Nt=function(f){var B;f.parent!==this&&(this.attach(f),(B=f.parent)==null||B.detach(f),f.setParent(this),f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))},g=new WeakSet,kn=function(f){switch(A(this,b).getMode()){case n.AnnotationEditorType.FREETEXT:return new m.FreeTextEditor(f);case n.AnnotationEditorType.INK:return new v.InkEditor(f)}return null},M=new WeakSet,Bt=function(f){const B=this.getNextId(),q=oe(this,g,kn).call(this,{parent:this,id:B,x:f.offsetX,y:f.offsetY,uiManager:A(this,b)});return q&&this.add(q),q},R=new WeakSet,Vt=function(){ye(this,d,!0);for(const f of A(this,T).values())f.isEmpty()&&f.remove();ye(this,d,!1)},$e(w,"_initialized",!1),t.AnnotationEditorLayer=w},(e,t,r)=>{var _,w,u,c,O,k,T,l,d,b,Rn,y,Mn,S,Fn,P,Ht;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=r(1),a=r(5),m=r(4);const s=class extends m.AnnotationEditor{constructor(f){super({...f,name:"freeTextEditor"});te(this,b);te(this,y);te(this,S);te(this,P);te(this,_,this.editorDivBlur.bind(this));te(this,w,this.editorDivFocus.bind(this));te(this,u,this.editorDivInput.bind(this));te(this,c,this.editorDivKeydown.bind(this));te(this,O,void 0);te(this,k,"");te(this,T,`${this.id}-editor`);te(this,l,!1);te(this,d,void 0);ye(this,O,f.color||s._defaultColor||m.AnnotationEditor._defaultLineColor),ye(this,d,f.fontSize||s._defaultFontSize)}static initialize(f){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(q=>[q,f.get(q)]));const B=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(B.getPropertyValue("--freetext-padding"))}static updateDefaultParams(f,B){switch(f){case n.AnnotationEditorParamsType.FREETEXT_SIZE:s._defaultFontSize=B;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:s._defaultColor=B;break}}updateParams(f,B){switch(f){case n.AnnotationEditorParamsType.FREETEXT_SIZE:oe(this,b,Rn).call(this,B);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:oe(this,y,Mn).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,s._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,s._defaultColor||m.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,A(this,d)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,A(this,O)]]}getInitialTranslation(){const f=this.parentScale;return[-s._internalPadding*f,-(s._internalPadding+A(this,d))*f]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",A(this,c)),this.editorDiv.addEventListener("focus",A(this,w)),this.editorDiv.addEventListener("blur",A(this,_)),this.editorDiv.addEventListener("input",A(this,u)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",A(this,T)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",A(this,c)),this.editorDiv.removeEventListener("focus",A(this,w)),this.editorDiv.removeEventListener("blur",A(this,_)),this.editorDiv.removeEventListener("input",A(this,u)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(f){super.focusin(f),f.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){!this.isInEditMode()||(super.commit(),A(this,l)||(ye(this,l,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ye(this,k,oe(this,S,Fn).call(this).trimEnd()),oe(this,P,Ht).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(f){this.enableEditMode(),this.editorDiv.focus()}keydown(f){f.target===this.div&&f.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(f){s._keyboardManager.exec(this,f)}editorDivFocus(f){this.isEditing=!0}editorDivBlur(f){this.isEditing=!1}editorDivInput(f){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let f,B;this.width&&(f=this.x,B=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",A(this,T)),this.enableEditing(),s._l10nPromise.get("editor_free_text2_aria_label").then(G=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("aria-label",G)}),s._l10nPromise.get("free_text2_default_content").then(G=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("default-content",G)}),this.editorDiv.contentEditable=!0;const{style:q}=this.editorDiv;if(q.fontSize=`calc(${A(this,d)}px * var(--scale-factor))`,q.color=A(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[G,Q]=this.parentDimensions;this.setAt(f*G,B*Q,this.width*G,this.height*Q);for(const ue of A(this,k).split(`
`)){const ae=document.createElement("div");ae.append(ue?document.createTextNode(ue):document.createElement("br")),this.editorDiv.append(ae)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(f,B,q){const G=super.deserialize(f,B,q);return ye(G,d,f.fontSize),ye(G,O,n.Util.makeHexColor(...f.color)),ye(G,k,f.value),G}serialize(){if(this.isEmpty())return null;const f=s._internalPadding*this.parentScale,B=this.getRect(f,f),q=m.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:A(this,O));return{annotationType:n.AnnotationEditorType.FREETEXT,color:q,fontSize:A(this,d),value:A(this,k),pageIndex:this.pageIndex,rect:B,rotation:this.rotation}}};let v=s;_=new WeakMap,w=new WeakMap,u=new WeakMap,c=new WeakMap,O=new WeakMap,k=new WeakMap,T=new WeakMap,l=new WeakMap,d=new WeakMap,b=new WeakSet,Rn=function(f){const B=G=>{this.editorDiv.style.fontSize=`calc(${G}px * var(--scale-factor))`,this.translate(0,-(G-A(this,d))*this.parentScale),ye(this,d,G),oe(this,P,Ht).call(this)},q=A(this,d);this.addCommands({cmd:()=>{B(f)},undo:()=>{B(q)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},y=new WeakSet,Mn=function(f){const B=A(this,O);this.addCommands({cmd:()=>{ye(this,O,this.editorDiv.style.color=f)},undo:()=>{ye(this,O,this.editorDiv.style.color=B)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Fn=function(){const f=this.editorDiv.getElementsByTagName("div");if(f.length===0)return this.editorDiv.innerText;const B=[];for(const q of f)B.push(q.innerText.replace(/\r\n?|\n/,""));return B.join(`
`)},P=new WeakSet,Ht=function(){const[f,B]=this.parentDimensions;let q;if(this.isAttachedToDOM)q=this.div.getBoundingClientRect();else{const{currentLayer:G,div:Q}=this,ue=Q.style.display;Q.style.display="hidden",G.div.append(this.div),q=Q.getBoundingClientRect(),Q.remove(),Q.style.display=ue}this.width=q.width/f,this.height=q.height/B},$e(v,"_freeTextDefaultContent",""),$e(v,"_l10nPromise"),$e(v,"_internalPadding",0),$e(v,"_defaultColor",null),$e(v,"_defaultFontSize",10),$e(v,"_keyboardManager",new a.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.prototype.commitOrRemove]])),$e(v,"_type","freetext"),t.FreeTextEditor=v},(e,t,r)=>{var u,c,O,k,T,l,d,b,C,y,g,S,M,P,R,In,h,Ln,f,On,q,Dn,Q,Ut,ae,Nn,_e,Bn,X,Vn,Se,Qe,N,jt,W,vt,J,yt,Z,at,x,$t,o,At,L,Wt,z,Hn,j,Un,se,jn,re,zt,ve,St,Pe,ot,de,qt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return m.fitCurve}});var n=r(1),a=r(4),m=r(30),v=r(5);const _=16,Me=class extends a.AnnotationEditor{constructor(F){super({...F,name:"inkEditor"});te(this,R);te(this,h);te(this,f);te(this,q);te(this,Q);te(this,ae);te(this,_e);te(this,X);te(this,Se);te(this,N);te(this,W);te(this,J);te(this,Z);te(this,x);te(this,o);te(this,z);te(this,j);te(this,se);te(this,re);te(this,ve);te(this,Pe);te(this,de);te(this,u,0);te(this,c,0);te(this,O,0);te(this,k,this.canvasPointermove.bind(this));te(this,T,this.canvasPointerleave.bind(this));te(this,l,this.canvasPointerup.bind(this));te(this,d,this.canvasPointerdown.bind(this));te(this,b,!1);te(this,C,!1);te(this,y,null);te(this,g,null);te(this,S,0);te(this,M,0);te(this,P,null);this.color=F.color||null,this.thickness=F.thickness||null,this.opacity=F.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(F){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(U=>[U,F.get(U)]))}static updateDefaultParams(F,U){switch(F){case n.AnnotationEditorParamsType.INK_THICKNESS:Me._defaultThickness=U;break;case n.AnnotationEditorParamsType.INK_COLOR:Me._defaultColor=U;break;case n.AnnotationEditorParamsType.INK_OPACITY:Me._defaultOpacity=U/100;break}}updateParams(F,U){switch(F){case n.AnnotationEditorParamsType.INK_THICKNESS:oe(this,R,In).call(this,U);break;case n.AnnotationEditorParamsType.INK_COLOR:oe(this,h,Ln).call(this,U);break;case n.AnnotationEditorParamsType.INK_OPACITY:oe(this,f,On).call(this,U);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Me._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Me._defaultColor||a.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Me._defaultOpacity*100)]]}get propertiesToUpdate(){var F;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Me._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Me._defaultColor||a.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((F=this.opacity)!=null?F:Me._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(oe(this,W,vt).call(this),oe(this,J,yt).call(this)),this.isAttachedToDOM||(this.parent.add(this),oe(this,Z,at).call(this)),oe(this,Pe,ot).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,A(this,g).disconnect(),ye(this,g,null),super.remove())}setParent(F){!this.parent&&F?this._uiManager.removeShouldRescale(this):this.parent&&F===null&&this._uiManager.addShouldRescale(this),super.setParent(F)}onScaleChanging(){const[F,U]=this.parentDimensions,ce=this.width*F,me=this.height*U;this.setDimensions(ce,me)}enableEditMode(){A(this,b)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",A(this,d)),this.canvas.addEventListener("pointerup",A(this,l)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",A(this,d)),this.canvas.removeEventListener("pointerup",A(this,l)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){A(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ye(this,b,!0),this.div.classList.add("disabled"),oe(this,Pe,ot).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(F){super.focusin(F),this.enableEditMode()}canvasPointerdown(F){F.button!==0||!this.isInEditMode()||A(this,b)||(this.setInForeground(),F.type!=="mouse"&&this.div.focus(),F.stopPropagation(),this.canvas.addEventListener("pointerleave",A(this,T)),this.canvas.addEventListener("pointermove",A(this,k)),oe(this,ae,Nn).call(this,F.offsetX,F.offsetY))}canvasPointermove(F){F.stopPropagation(),oe(this,_e,Bn).call(this,F.offsetX,F.offsetY)}canvasPointerup(F){F.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(F.stopPropagation(),oe(this,N,jt).call(this,F),this.setInBackground())}canvasPointerleave(F){oe(this,N,jt).call(this,F),this.setInBackground()}render(){if(this.div)return this.div;let F,U;this.width&&(F=this.x,U=this.y),super.render(),Me._l10nPromise.get("editor_ink2_aria_label").then(be=>{var we;return(we=this.div)==null?void 0:we.setAttribute("aria-label",be)});const[ce,me,fe,ge]=oe(this,q,Dn).call(this);if(this.setAt(ce,me,0,0),this.setDims(fe,ge),oe(this,W,vt).call(this),this.width){const[be,we]=this.parentDimensions;this.setAt(F*be,U*we,this.width*be,this.height*we),ye(this,C,!0),oe(this,Z,at).call(this),this.setDims(this.width*be,this.height*we),oe(this,Se,Qe).call(this),oe(this,de,qt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return oe(this,J,yt).call(this),this.div}setDimensions(F,U){const ce=Math.round(F),me=Math.round(U);if(A(this,S)===ce&&A(this,M)===me)return;ye(this,S,ce),ye(this,M,me),this.canvas.style.visibility="hidden",A(this,u)&&Math.abs(A(this,u)-F/U)>.01&&(U=Math.ceil(F/A(this,u)),this.setDims(F,U));const[fe,ge]=this.parentDimensions;this.width=F/fe,this.height=U/ge,A(this,b)&&oe(this,x,$t).call(this,F,U),oe(this,Z,at).call(this),oe(this,Se,Qe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(F,U,ce){var Oe,Ie;const me=super.deserialize(F,U,ce);me.thickness=F.thickness,me.color=n.Util.makeHexColor(...F.color),me.opacity=F.opacity;const[fe,ge]=me.pageDimensions,be=me.width*fe,we=me.height*ge,Re=me.parentScale,Te=F.thickness/2;ye(me,u,be/we),ye(me,b,!0),ye(me,S,Math.round(be)),ye(me,M,Math.round(we));for(const{bezier:Fe}of F.paths){const Be=[];me.paths.push(Be);let He=Re*(Fe[0]-Te),Ne=Re*(we-Fe[1]-Te);for(let Ve=2,Ue=Fe.length;Ve<Ue;Ve+=6){const We=Re*(Fe[Ve]-Te),Ge=Re*(we-Fe[Ve+1]-Te),Je=Re*(Fe[Ve+2]-Te),it=Re*(we-Fe[Ve+3]-Te),gt=Re*(Fe[Ve+4]-Te),qe=Re*(we-Fe[Ve+5]-Te);Be.push([[He,Ne],[We,Ge],[Je,it],[gt,qe]]),He=gt,Ne=qe}const je=oe(this,L,Wt).call(this,Be);me.bezierPath2D.push(je)}const Le=oe(Oe=me,re,zt).call(Oe);return ye(me,O,Math.max(_,Le[2]-Le[0])),ye(me,c,Math.max(_,Le[3]-Le[1])),oe(Ie=me,x,$t).call(Ie,be,we),me}serialize(){if(this.isEmpty())return null;const F=this.getRect(0,0),U=this.rotation%180===0?F[3]-F[1]:F[2]-F[0],ce=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:ce,thickness:this.thickness,opacity:this.opacity,paths:oe(this,z,Hn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,U),pageIndex:this.pageIndex,rect:F,rotation:this.rotation}}};let w=Me;u=new WeakMap,c=new WeakMap,O=new WeakMap,k=new WeakMap,T=new WeakMap,l=new WeakMap,d=new WeakMap,b=new WeakMap,C=new WeakMap,y=new WeakMap,g=new WeakMap,S=new WeakMap,M=new WeakMap,P=new WeakMap,R=new WeakSet,In=function(F){const U=this.thickness;this.addCommands({cmd:()=>{this.thickness=F,oe(this,Pe,ot).call(this)},undo:()=>{this.thickness=U,oe(this,Pe,ot).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Ln=function(F){const U=this.color;this.addCommands({cmd:()=>{this.color=F,oe(this,Se,Qe).call(this)},undo:()=>{this.color=U,oe(this,Se,Qe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,On=function(F){F/=100;const U=this.opacity;this.addCommands({cmd:()=>{this.opacity=F,oe(this,Se,Qe).call(this)},undo:()=>{this.opacity=U,oe(this,Se,Qe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},q=new WeakSet,Dn=function(){const{parentRotation:F,parentDimensions:[U,ce]}=this;switch(F){case 90:return[0,ce,ce,U];case 180:return[U,ce,U,ce];case 270:return[U,0,ce,U];default:return[0,0,U,ce]}},Q=new WeakSet,Ut=function(){const{ctx:F,color:U,opacity:ce,thickness:me,parentScale:fe,scaleFactor:ge}=this;F.lineWidth=me*fe/ge,F.lineCap="round",F.lineJoin="round",F.miterLimit=10,F.strokeStyle=`${U}${(0,v.opacityToHex)(ce)}`},ae=new WeakSet,Nn=function(F,U){var ce;this.isEditing=!0,A(this,C)||(ye(this,C,!0),oe(this,Z,at).call(this),this.thickness||(this.thickness=Me._defaultThickness),this.color||(this.color=Me._defaultColor||a.AnnotationEditor._defaultLineColor),(ce=this.opacity)!=null||(this.opacity=Me._defaultOpacity)),this.currentPath.push([F,U]),ye(this,y,null),oe(this,Q,Ut).call(this),this.ctx.beginPath(),this.ctx.moveTo(F,U),ye(this,P,()=>{!A(this,P)||(A(this,y)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):oe(this,Se,Qe).call(this),this.ctx.lineTo(...A(this,y)),ye(this,y,null),this.ctx.stroke()),window.requestAnimationFrame(A(this,P)))}),window.requestAnimationFrame(A(this,P))},_e=new WeakSet,Bn=function(F,U){const[ce,me]=this.currentPath.at(-1);F===ce&&U===me||(this.currentPath.push([F,U]),ye(this,y,[F,U]))},X=new WeakSet,Vn=function(F,U){var Re;this.ctx.closePath(),ye(this,P,null),F=Math.min(Math.max(F,0),this.canvas.width),U=Math.min(Math.max(U,0),this.canvas.height);const[ce,me]=this.currentPath.at(-1);(F!==ce||U!==me)&&this.currentPath.push([F,U]);let fe;if(this.currentPath.length!==1)fe=(0,m.fitCurve)(this.currentPath,30,null);else{const Te=[F,U];fe=[[Te,Te.slice(),Te.slice(),Te]]}const ge=oe(Re=Me,L,Wt).call(Re,fe);this.currentPath.length=0;const be=()=>{this.paths.push(fe),this.bezierPath2D.push(ge),this.rebuild()},we=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(oe(this,W,vt).call(this),oe(this,J,yt).call(this)),oe(this,Pe,ot).call(this))};this.addCommands({cmd:be,undo:we,mustExec:!0})},Se=new WeakSet,Qe=function(){if(this.isEmpty()){oe(this,o,At).call(this);return}oe(this,Q,Ut).call(this);const{canvas:F,ctx:U}=this;U.setTransform(1,0,0,1,0,0),U.clearRect(0,0,F.width,F.height),oe(this,o,At).call(this);for(const ce of this.bezierPath2D)U.stroke(ce)},N=new WeakSet,jt=function(F){oe(this,X,Vn).call(this,F.offsetX,F.offsetY),this.canvas.removeEventListener("pointerleave",A(this,T)),this.canvas.removeEventListener("pointermove",A(this,k)),this.addToAnnotationStorage()},W=new WeakSet,vt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Me._l10nPromise.get("editor_ink_canvas_aria_label").then(F=>{var U;return(U=this.canvas)==null?void 0:U.setAttribute("aria-label",F)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},J=new WeakSet,yt=function(){ye(this,g,new ResizeObserver(F=>{const U=F[0].contentRect;U.width&&U.height&&this.setDimensions(U.width,U.height)})),A(this,g).observe(this.div)},Z=new WeakSet,at=function(){if(!A(this,C))return;const[F,U]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*F),this.canvas.height=Math.ceil(this.height*U),oe(this,o,At).call(this)},x=new WeakSet,$t=function(F,U){const ce=oe(this,ve,St).call(this),me=(F-ce)/A(this,O),fe=(U-ce)/A(this,c);this.scaleFactor=Math.min(me,fe)},o=new WeakSet,At=function(){const F=oe(this,ve,St).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+F,this.translationY*this.scaleFactor+F)},L=new WeakSet,Wt=function(F){const U=new Path2D;for(let ce=0,me=F.length;ce<me;ce++){const[fe,ge,be,we]=F[ce];ce===0&&U.moveTo(...fe),U.bezierCurveTo(ge[0],ge[1],be[0],be[1],we[0],we[1])}return U},z=new WeakSet,Hn=function(F,U,ce,me){const ge=[],be=this.thickness/2;let we,Re;for(const Te of this.paths){we=[],Re=[];for(let Le=0,Oe=Te.length;Le<Oe;Le++){const[Ie,Fe,Be,He]=Te[Le],Ne=F*(Ie[0]+U)+be,je=me-F*(Ie[1]+ce)-be,Ve=F*(Fe[0]+U)+be,Ue=me-F*(Fe[1]+ce)-be,We=F*(Be[0]+U)+be,Ge=me-F*(Be[1]+ce)-be,Je=F*(He[0]+U)+be,it=me-F*(He[1]+ce)-be;Le===0&&(we.push(Ne,je),Re.push(Ne,je)),we.push(Ve,Ue,We,Ge,Je,it),oe(this,j,Un).call(this,Ne,je,Ve,Ue,We,Ge,Je,it,4,Re)}ge.push({bezier:we,points:Re})}return ge},j=new WeakSet,Un=function(F,U,ce,me,fe,ge,be,we,Re,Te){if(oe(this,se,jn).call(this,F,U,ce,me,fe,ge,be,we)){Te.push(be,we);return}for(let Le=1;Le<Re-1;Le++){const Oe=Le/Re,Ie=1-Oe;let Fe=Oe*F+Ie*ce,Be=Oe*U+Ie*me,He=Oe*ce+Ie*fe,Ne=Oe*me+Ie*ge;const je=Oe*fe+Ie*be,Ve=Oe*ge+Ie*we;Fe=Oe*Fe+Ie*He,Be=Oe*Be+Ie*Ne,He=Oe*He+Ie*je,Ne=Oe*Ne+Ie*Ve,Fe=Oe*Fe+Ie*He,Be=Oe*Be+Ie*Ne,Te.push(Fe,Be)}Te.push(be,we)},se=new WeakSet,jn=function(F,U,ce,me,fe,ge,be,we){const Te=(3*ce-2*F-be)**2,Le=(3*me-2*U-we)**2,Oe=(3*fe-F-2*be)**2,Ie=(3*ge-U-2*we)**2;return Math.max(Te,Oe)+Math.max(Le,Ie)<=10},re=new WeakSet,zt=function(){let F=1/0,U=-1/0,ce=1/0,me=-1/0;for(const fe of this.paths)for(const[ge,be,we,Re]of fe){const Te=n.Util.bezierBoundingBox(...ge,...be,...we,...Re);F=Math.min(F,Te[0]),ce=Math.min(ce,Te[1]),U=Math.max(U,Te[2]),me=Math.max(me,Te[3])}return[F,ce,U,me]},ve=new WeakSet,St=function(){return A(this,b)?Math.ceil(this.thickness*this.parentScale):0},Pe=new WeakSet,ot=function(F=!1){if(this.isEmpty())return;if(!A(this,b)){oe(this,Se,Qe).call(this);return}const U=oe(this,re,zt).call(this),ce=oe(this,ve,St).call(this);ye(this,O,Math.max(_,U[2]-U[0])),ye(this,c,Math.max(_,U[3]-U[1]));const me=Math.ceil(ce+A(this,O)*this.scaleFactor),fe=Math.ceil(ce+A(this,c)*this.scaleFactor),[ge,be]=this.parentDimensions;this.width=me/ge,this.height=fe/be,ye(this,u,me/fe),oe(this,de,qt).call(this);const we=this.translationX,Re=this.translationY;this.translationX=-U[0],this.translationY=-U[1],oe(this,Z,at).call(this),oe(this,Se,Qe).call(this),ye(this,S,me),ye(this,M,fe),this.setDims(me,fe);const Te=F?ce/this.scaleFactor/2:0;this.translate(we-this.translationX-Te,Re-this.translationY-Te)},de=new WeakSet,qt=function(){const{style:F}=this.div;A(this,u)>=1?(F.minHeight=`${_}px`,F.minWidth=`${Math.round(A(this,u)*_)}px`):(F.minWidth=`${_}px`,F.minHeight=`${Math.round(_/A(this,u))}px`)},te(w,L),$e(w,"_defaultColor",null),$e(w,"_defaultOpacity",1),$e(w,"_defaultThickness",1),$e(w,"_l10nPromise"),$e(w,"_type","ink"),t.InkEditor=w},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const n=r(31);t.fitCurve=n},e=>{function t(l,d,b){if(!Array.isArray(l))throw new TypeError("First argument should be an array");if(l.forEach(S=>{if(!Array.isArray(S)||S.some(M=>typeof M!="number")||S.length!==l[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),l=l.filter((S,M)=>M===0||!S.every((P,R)=>P===l[M-1][R])),l.length<2)return[];const C=l.length,y=O(l[1],l[0]),g=O(l[C-2],l[C-1]);return r(l,y,g,d,b)}function r(l,d,b,C,y){var S,M,P,R,s,h,I,f,B,q,G,Q,ue;if(l.length===2)return Q=k.vectorLen(k.subtract(l[0],l[1]))/3,S=[l[0],k.addArrays(l[0],k.mulItems(d,Q)),k.addArrays(l[1],k.mulItems(b,Q)),l[1]],[S];if(M=_(l),[S,R,h]=n(l,M,M,d,b,y),R===0||R<C)return[S];if(R<C*C)for(P=M,s=R,I=h,ue=0;ue<20;ue++){if(P=m(S,l,P),[S,R,h]=n(l,M,P,d,b,y),R<C)return[S];if(h===I){let ae=R/s;if(ae>.9999&&ae<1.0001)break}s=R,I=h}return G=[],f=k.subtract(l[h-1],l[h+1]),f.every(ae=>ae===0)&&(f=k.subtract(l[h-1],l[h]),[f[0],f[1]]=[-f[1],f[0]]),B=k.normalize(f),q=k.mulItems(B,-1),G=G.concat(r(l.slice(0,h+1),d,B,C,y)),G=G.concat(r(l.slice(h),q,b,C,y)),G}function n(l,d,b,C,y,g){var S,M,P;return S=a(l,b,C,y),[M,P]=w(l,S,d),g&&g({bez:S,points:l,params:d,maxErr:M,maxPoint:P}),[S,M,P]}function a(l,d,b,C){var y,g,S,M,P,R,s,h,I,f,B,q,G,Q,ue,ae,le,_e=l[0],Ae=l[l.length-1];for(y=[_e,null,null,Ae],g=k.zeros_Xx2x2(d.length),G=0,Q=d.length;G<Q;G++)ae=d[G],le=1-ae,S=g[G],S[0]=k.mulItems(b,3*ae*(le*le)),S[1]=k.mulItems(C,3*le*(ae*ae));for(M=[[0,0],[0,0]],P=[0,0],G=0,Q=l.length;G<Q;G++)ae=d[G],S=g[G],M[0][0]+=k.dot(S[0],S[0]),M[0][1]+=k.dot(S[0],S[1]),M[1][0]+=k.dot(S[0],S[1]),M[1][1]+=k.dot(S[1],S[1]),ue=k.subtract(l[G],T.q([_e,_e,Ae,Ae],ae)),P[0]+=k.dot(S[0],ue),P[1]+=k.dot(S[1],ue);return R=M[0][0]*M[1][1]-M[1][0]*M[0][1],s=M[0][0]*P[1]-M[1][0]*P[0],h=P[0]*M[1][1]-P[1]*M[0][1],I=R===0?0:h/R,f=R===0?0:s/R,q=k.vectorLen(k.subtract(_e,Ae)),B=1e-6*q,I<B||f<B?(y[1]=k.addArrays(_e,k.mulItems(b,q/3)),y[2]=k.addArrays(Ae,k.mulItems(C,q/3))):(y[1]=k.addArrays(_e,k.mulItems(b,I)),y[2]=k.addArrays(Ae,k.mulItems(C,f))),y}function m(l,d,b){return b.map((C,y)=>v(l,d[y],C))}function v(l,d,b){var C=k.subtract(T.q(l,b),d),y=T.qprime(l,b),g=k.mulMatrix(C,y),S=k.sum(k.squareItems(y))+2*k.mulMatrix(C,T.qprimeprime(l,b));return S===0?b:b-g/S}function _(l){var d=[],b,C,y;return l.forEach((g,S)=>{b=S?C+k.vectorLen(k.subtract(g,y)):0,d.push(b),C=b,y=g}),d=d.map(g=>g/C),d}function w(l,d,b){var C,y,g,S,M,P,R,s;y=0,g=Math.floor(l.length/2);const h=u(d,10);for(M=0,P=l.length;M<P;M++)R=l[M],s=c(d,b[M],h,10),S=k.subtract(T.q(d,s),R),C=S[0]*S[0]+S[1]*S[1],C>y&&(y=C,g=M);return[y,g]}var u=function(l,d){for(var b,C=[0],y=l[0],g=0,S=1;S<=d;S++)b=T.q(l,S/d),g+=k.vectorLen(k.subtract(b,y)),C.push(g),y=b;return C=C.map(M=>M/g),C};function c(l,d,b,C){if(d<0)return 0;if(d>1)return 1;for(var y,g,S,M,P,R=1;R<=C;R++)if(d<=b[R]){M=(R-1)/C,S=R/C,g=b[R-1],y=b[R],P=(d-g)/(y-g)*(S-M)+M;break}return P}function O(l,d){return k.normalize(k.subtract(l,d))}class k{static zeros_Xx2x2(d){for(var b=[];d--;)b.push([0,0]);return b}static mulItems(d,b){return d.map(C=>C*b)}static mulMatrix(d,b){return d.reduce((C,y,g)=>C+y*b[g],0)}static subtract(d,b){return d.map((C,y)=>C-b[y])}static addArrays(d,b){return d.map((C,y)=>C+b[y])}static addItems(d,b){return d.map(C=>C+b)}static sum(d){return d.reduce((b,C)=>b+C)}static dot(d,b){return k.mulMatrix(d,b)}static vectorLen(d){return Math.hypot(...d)}static divItems(d,b){return d.map(C=>C/b)}static squareItems(d){return d.map(b=>b*b)}static normalize(d){return this.divItems(d,this.vectorLen(d))}}class T{static q(d,b){var C=1-b,y=k.mulItems(d[0],C*C*C),g=k.mulItems(d[1],3*C*C*b),S=k.mulItems(d[2],3*C*b*b),M=k.mulItems(d[3],b*b*b);return k.addArrays(k.addArrays(y,g),k.addArrays(S,M))}static qprime(d,b){var C=1-b,y=k.mulItems(k.subtract(d[1],d[0]),3*C*C),g=k.mulItems(k.subtract(d[2],d[1]),6*C*b),S=k.mulItems(k.subtract(d[3],d[2]),3*b*b);return k.addArrays(k.addArrays(y,g),S)}static qprimeprime(d,b){return k.addArrays(k.mulItems(k.addArrays(k.subtract(d[2],k.mulItems(d[1],2)),d[0]),6*(1-b)),k.mulItems(k.addArrays(k.subtract(d[3],k.mulItems(d[2],2)),d[1]),6*b))}}e.exports=t,e.exports.fitCubic=r,e.exports.createTangent=O},(e,t,r)=>{var Se,nt,N,$n,ne,Gt,he,Xt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var n=r(1),a=r(6),m=r(3),v=r(33),_=r(34);const w=1e3,u=9,c=new WeakSet;function O(x){return{width:x[2]-x[0],height:x[3]-x[1]}}class k{static create(i){switch(i.data.annotationType){case n.AnnotationType.LINK:return new l(i);case n.AnnotationType.TEXT:return new d(i);case n.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new C(i);case"Btn":return i.data.radioButton?new g(i):i.data.checkBox?new y(i):new S(i);case"Ch":return new M(i)}return new b(i);case n.AnnotationType.POPUP:return new P(i);case n.AnnotationType.FREETEXT:return new s(i);case n.AnnotationType.LINE:return new h(i);case n.AnnotationType.SQUARE:return new I(i);case n.AnnotationType.CIRCLE:return new f(i);case n.AnnotationType.POLYLINE:return new B(i);case n.AnnotationType.CARET:return new G(i);case n.AnnotationType.INK:return new Q(i);case n.AnnotationType.POLYGON:return new q(i);case n.AnnotationType.HIGHLIGHT:return new ue(i);case n.AnnotationType.UNDERLINE:return new ae(i);case n.AnnotationType.SQUIGGLY:return new le(i);case n.AnnotationType.STRIKEOUT:return new _e(i);case n.AnnotationType.STAMP:return new Ae(i);case n.AnnotationType.FILEATTACHMENT:return new X(i);default:return new T(i)}}}class T{constructor(i,{isRenderable:o=!1,ignoreBorder:E=!1,createQuadrilaterals:L=!1}={}){this.isRenderable=o,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,o&&(this.container=this._createContainer(E)),L&&(this.quadrilaterals=this._createQuadrilaterals(E))}_createContainer(i=!1){const{data:o,page:E,viewport:L}=this,D=document.createElement("section");D.setAttribute("data-annotation-id",o.id),o.noRotate&&D.classList.add("norotate");const{pageWidth:z,pageHeight:ie,pageX:j,pageY:$}=L.rawDims,{width:se,height:Y}=O(o.rect),re=n.Util.normalizeRect([o.rect[0],E.view[3]-o.rect[1]+E.view[1],o.rect[2],E.view[3]-o.rect[3]+E.view[1]]);if(!i&&o.borderStyle.width>0){D.style.borderWidth=`${o.borderStyle.width}px`;const ve=o.borderStyle.horizontalCornerRadius,Ce=o.borderStyle.verticalCornerRadius;if(ve>0||Ce>0){const ke=`calc(${ve}px * var(--scale-factor)) / calc(${Ce}px * var(--scale-factor))`;D.style.borderRadius=ke}else if(this instanceof g){const ke=`calc(${se}px * var(--scale-factor)) / calc(${Y}px * var(--scale-factor))`;D.style.borderRadius=ke}switch(o.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:D.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:D.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:D.style.borderBottomStyle="solid";break}const Pe=o.borderColor||null;Pe?D.style.borderColor=n.Util.makeHexColor(Pe[0]|0,Pe[1]|0,Pe[2]|0):D.style.borderWidth=0}D.style.left=`${100*(re[0]-j)/z}%`,D.style.top=`${100*(re[1]-$)/ie}%`;const{rotation:pe}=o;return o.hasOwnCanvas||pe===0?(D.style.width=`${100*se/z}%`,D.style.height=`${100*Y/ie}%`):this.setRotation(pe,D),D}setRotation(i,o=this.container){const{pageWidth:E,pageHeight:L}=this.viewport.rawDims,{width:D,height:z}=O(this.data.rect);let ie,j;i%180===0?(ie=100*D/E,j=100*z/L):(ie=100*z/E,j=100*D/L),o.style.width=`${ie}%`,o.style.height=`${j}%`,o.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(o,E,L)=>{const D=L.detail[o];L.target.style[E]=v.ColorConverters[`${D[0]}_HTML`](D.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:o=>{const E=o.detail.display%2===1;this.container.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:E,print:o.detail.display===0||o.detail.display===3})},print:o=>{this.annotationStorage.setValue(this.data.id,{print:o.detail.print})},hidden:o=>{this.container.style.visibility=o.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o.detail.hidden})},focus:o=>{setTimeout(()=>o.target.focus({preventScroll:!1}),0)},userName:o=>{o.target.title=o.detail.userName},readonly:o=>{o.detail.readonly?o.target.setAttribute("readonly",""):o.target.removeAttribute("readonly")},required:o=>{this._setRequired(o.target,o.detail.required)},bgColor:o=>{i("bgColor","backgroundColor",o)},fillColor:o=>{i("fillColor","backgroundColor",o)},fgColor:o=>{i("fgColor","color",o)},textColor:o=>{i("textColor","color",o)},borderColor:o=>{i("borderColor","borderColor",o)},strokeColor:o=>{i("strokeColor","borderColor",o)},rotation:o=>{const E=o.detail.rotation;this.setRotation(E),this.annotationStorage.setValue(this.data.id,{rotation:E})}})}_dispatchEventFromSandbox(i,o){const E=this._commonActions;for(const L of Object.keys(o.detail)){const D=i[L]||E[L];D==null||D(o)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const o=this.annotationStorage.getRawValue(this.data.id);if(!o)return;const E=this._commonActions;for(const[L,D]of Object.entries(o)){const z=E[L];if(z){const ie={detail:{[L]:D},target:i};z(ie),delete o[L]}}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const o=[],E=this.data.rect;for(const L of this.data.quadPoints)this.data.rect=[L[2].x,L[2].y,L[1].x,L[1].y],o.push(this._createContainer(i));return this.data.rect=E,o}_createPopup(i,o){let E=this.container;this.quadrilaterals&&(i||(i=this.quadrilaterals),E=this.quadrilaterals[0]),i||(i=document.createElement("div"),i.classList.add("popupTriggerArea"),E.append(i));const D=new R({container:E,trigger:i,color:o.color,titleObj:o.titleObj,modificationDate:o.modificationDate,contentsObj:o.contentsObj,richText:o.richText,hideWrapper:!0}).render();D.style.left="100%",E.append(D)}_renderQuadrilaterals(i){for(const o of this.quadrilaterals)o.classList.add(i);return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,o=null){const E=[];if(this._fieldObjects){const L=this._fieldObjects[i];if(L)for(const{page:D,id:z,exportValues:ie}of L){if(D===-1||z===o)continue;const j=typeof ie=="string"?ie:null,$=document.querySelector(`[data-element-id="${z}"]`);if($&&!c.has($)){(0,n.warn)(`_getElementsByName - element not allowed: ${z}`);continue}E.push({id:z,exportValue:j,domElement:$})}return E}for(const L of document.getElementsByName(i)){const{exportValue:D}=L,z=L.getAttribute("data-element-id");z!==o&&(!c.has(L)||E.push({id:z,exportValue:D,domElement:L}))}return E}}class l extends T{constructor(o,E=null){super(o,{isRenderable:!0,ignoreBorder:!!(E!=null&&E.ignoreBorder),createQuadrilaterals:!0});te(this,Se);te(this,N);this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:E}=this,L=document.createElement("a");L.setAttribute("data-element-id",o.id);let D=!1;return o.url?(E.addLinkAttributes(L,o.url,o.newWindow),D=!0):o.action?(this._bindNamedAction(L,o.action),D=!0):o.attachment?(this._bindAttachment(L,o.attachment),D=!0):o.setOCGState?(oe(this,N,$n).call(this,L,o.setOCGState),D=!0):o.dest?(this._bindLink(L,o.dest),D=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(L,o),D=!0),o.resetForm?(this._bindResetFormAction(L,o.resetForm),D=!0):this.isTooltipOnly&&!D&&(this._bindLink(L,""),D=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((z,ie)=>{const j=ie===0?L:L.cloneNode();return z.append(j),z}):(this.container.classList.add("linkAnnotation"),D&&this.container.append(L),this.container)}_bindLink(o,E){o.href=this.linkService.getDestinationHash(E),o.onclick=()=>(E&&this.linkService.goToDestination(E),!1),(E||E==="")&&oe(this,Se,nt).call(this)}_bindNamedAction(o,E){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(E),!1),oe(this,Se,nt).call(this)}_bindAttachment(o,E){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>{var L;return(L=this.downloadManager)==null||L.openOrDownloadData(this.container,E.content,E.filename),!1},oe(this,Se,nt).call(this)}_bindJSAction(o,E){o.href=this.linkService.getAnchorUrl("");const L=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const D of Object.keys(E.actions)){const z=L.get(D);!z||(o[z]=()=>{var ie;return(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:E.id,name:D}}),!1})}o.onclick||(o.onclick=()=>!1),oe(this,Se,nt).call(this)}_bindResetFormAction(o,E){const L=o.onclick;if(L||(o.href=this.linkService.getAnchorUrl("")),oe(this,Se,nt).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),L||(o.onclick=()=>!1);return}o.onclick=()=>{var Y;L==null||L();const{fields:D,refs:z,include:ie}=E,j=[];if(D.length!==0||z.length!==0){const re=new Set(z);for(const pe of D){const ve=this._fieldObjects[pe]||[];for(const{id:Ce}of ve)re.add(Ce)}for(const pe of Object.values(this._fieldObjects))for(const ve of pe)re.has(ve.id)===ie&&j.push(ve)}else for(const re of Object.values(this._fieldObjects))j.push(...re);const $=this.annotationStorage,se=[];for(const re of j){const{id:pe}=re;switch(se.push(pe),re.type){case"text":{const Ce=re.defaultValue||"";$.setValue(pe,{value:Ce});break}case"checkbox":case"radiobutton":{const Ce=re.defaultValue===re.exportValues;$.setValue(pe,{value:Ce});break}case"combobox":case"listbox":{const Ce=re.defaultValue||"";$.setValue(pe,{value:Ce});break}default:continue}const ve=document.querySelector(`[data-element-id="${pe}"]`);if(ve){if(!c.has(ve)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${pe}`);continue}}else continue;ve.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Y=this.linkService.eventBus)==null||Y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:se,name:"ResetForm"}})),!1}}}Se=new WeakSet,nt=function(){this.container.setAttribute("data-internal-link","")},N=new WeakSet,$n=function(o,E){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeSetOCGState(E),!1),oe(this,Se,nt).call(this)};class d extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o})}render(){this.container.classList.add("textAnnotation");const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class b extends T{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(i){var o;this.data.hasOwnCanvas&&(((o=i.previousSibling)==null?void 0:o.nodeName)==="CANVAS"&&(i.previousSibling.hidden=!0),i.hidden=!1)}_getKeyModifier(i){const{isWin:o,isMac:E}=n.FeatureTest.platform;return o&&i.ctrlKey||E&&i.metaKey}_setEventListener(i,o,E,L){o.includes("mouse")?i.addEventListener(o,D=>{var z;(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:L(D),shift:D.shiftKey,modifier:this._getKeyModifier(D)}})}):i.addEventListener(o,D=>{var z;(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:L(D)}})})}_setEventListeners(i,o,E){var L;for(const[D,z]of o)(z==="Action"||((L=this.data.actions)==null?void 0:L[z]))&&this._setEventListener(i,D,z,E)}_setBackgroundColor(i){const o=this.data.backgroundColor||null;i.style.backgroundColor=o===null?"transparent":n.Util.makeHexColor(o[0],o[1],o[2])}_setTextStyle(i){const o=["left","center","right"],{fontColor:E}=this.data.defaultAppearanceData,L=this.data.defaultAppearanceData.fontSize||u,D=i.style;let z;const ie=2,j=$=>Math.round(10*$)/10;if(this.data.multiLine){const $=Math.abs(this.data.rect[3]-this.data.rect[1]-ie),se=Math.round($/(n.LINE_FACTOR*L))||1,Y=$/se;z=Math.min(L,j(Y/n.LINE_FACTOR))}else{const $=Math.abs(this.data.rect[3]-this.data.rect[1]-ie);z=Math.min(L,j($/n.LINE_FACTOR))}D.fontSize=`calc(${z}px * var(--scale-factor))`,D.color=n.Util.makeHexColor(E[0],E[1],E[2]),this.data.textAlignment!==null&&(D.textAlign=o[this.data.textAlignment])}_setRequired(i,o){o?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",o)}}class C extends b{constructor(i){const o=i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,{isRenderable:o})}setPropertyOnSiblings(i,o,E,L){const D=this.annotationStorage;for(const z of this._getElementsByName(i.name,i.id))z.domElement&&(z.domElement[o]=E),D.setValue(z.id,{[L]:E})}render(){var L;const i=this.annotationStorage,o=this.data.id;this.container.classList.add("textWidgetAnnotation");let E=null;if(this.renderForms){const D=i.getValue(o,{value:this.data.fieldValue});let z=D.formattedValue||D.value||"";const ie=i.getValue(o,{charLimit:this.data.maxLen}).charLimit;ie&&z.length>ie&&(z=z.slice(0,ie));const j={userValue:z,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(E=document.createElement("textarea"),E.textContent=z,this.data.doNotScroll&&(E.style.overflowY="hidden")):(E=document.createElement("input"),E.type="text",E.setAttribute("value",z),this.data.doNotScroll&&(E.style.overflowX="hidden")),this.data.hasOwnCanvas&&(E.hidden=!0),c.add(E),E.setAttribute("data-element-id",o),E.disabled=this.data.readOnly,E.name=this.data.fieldName,E.tabIndex=w,this._setRequired(E,this.data.required),ie&&(E.maxLength=ie),E.addEventListener("input",se=>{i.setValue(o,{value:se.target.value}),this.setPropertyOnSiblings(E,"value",se.target.value,"value")}),E.addEventListener("resetform",se=>{var re;const Y=(re=this.data.defaultFieldValue)!=null?re:"";E.value=j.userValue=Y,j.formattedValue=null});let $=se=>{const{formattedValue:Y}=j;Y!=null&&(se.target.value=Y),se.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){E.addEventListener("focus",Y=>{const{target:re}=Y;j.userValue&&(re.value=j.userValue),j.lastCommittedValue=re.value,j.commitKey=1}),E.addEventListener("updatefromsandbox",Y=>{this.showElementAndHideCanvas(Y.target);const re={value(pe){var ve;j.userValue=(ve=pe.detail.value)!=null?ve:"",i.setValue(o,{value:j.userValue.toString()}),pe.target.value=j.userValue},formattedValue(pe){const{formattedValue:ve}=pe.detail;j.formattedValue=ve,ve!=null&&pe.target!==document.activeElement&&(pe.target.value=ve),i.setValue(o,{formattedValue:ve})},selRange(pe){pe.target.setSelectionRange(...pe.detail.selRange)},charLimit:pe=>{var ke;const{charLimit:ve}=pe.detail,{target:Ce}=pe;if(ve===0){Ce.removeAttribute("maxLength");return}Ce.setAttribute("maxLength",ve);let Pe=j.userValue;!Pe||Pe.length<=ve||(Pe=Pe.slice(0,ve),Ce.value=j.userValue=Pe,i.setValue(o,{value:Pe}),(ke=this.linkService.eventBus)==null||ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:Pe,willCommit:!0,commitKey:1,selStart:Ce.selectionStart,selEnd:Ce.selectionEnd}}))}};this._dispatchEventFromSandbox(re,Y)}),E.addEventListener("keydown",Y=>{var ve;j.commitKey=1;let re=-1;if(Y.key==="Escape"?re=0:Y.key==="Enter"&&!this.data.multiLine?re=2:Y.key==="Tab"&&(j.commitKey=3),re===-1)return;const{value:pe}=Y.target;j.lastCommittedValue!==pe&&(j.lastCommittedValue=pe,j.userValue=pe,(ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:pe,willCommit:!0,commitKey:re,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}}))});const se=$;$=null,E.addEventListener("blur",Y=>{var pe;if(!Y.relatedTarget)return;const{value:re}=Y.target;j.userValue=re,j.lastCommittedValue!==re&&((pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:re,willCommit:!0,commitKey:j.commitKey,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}})),se(Y)}),(L=this.data.actions)!=null&&L.Keystroke&&E.addEventListener("beforeinput",Y=>{var xe;j.lastCommittedValue=null;const{data:re,target:pe}=Y,{value:ve,selectionStart:Ce,selectionEnd:Pe}=pe;let ke=Ce,de=Pe;switch(Y.inputType){case"deleteWordBackward":{const Me=ve.substring(0,Ce).match(/\w*[^\w]*$/);Me&&(ke-=Me[0].length);break}case"deleteWordForward":{const Me=ve.substring(Ce).match(/^[^\w]*\w*/);Me&&(de+=Me[0].length);break}case"deleteContentBackward":Ce===Pe&&(ke-=1);break;case"deleteContentForward":Ce===Pe&&(de+=1);break}Y.preventDefault(),(xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:ve,change:re||"",willCommit:!1,selStart:ke,selEnd:de}})}),this._setEventListeners(E,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.value)}if($&&E.addEventListener("blur",$),this.data.comb){const Y=(this.data.rect[2]-this.data.rect[0])/ie;E.classList.add("comb"),E.style.letterSpacing=`calc(${Y}px * var(--scale-factor) - 1ch)`}}else E=document.createElement("div"),E.textContent=this.data.fieldValue,E.style.verticalAlign="middle",E.style.display="table-cell";return this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class y extends b{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,o=this.data,E=o.id;let L=i.getValue(E,{value:o.exportValue===o.fieldValue}).value;typeof L=="string"&&(L=L!=="Off",i.setValue(E,{value:L})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const D=document.createElement("input");return c.add(D),D.setAttribute("data-element-id",E),D.disabled=o.readOnly,this._setRequired(D,this.data.required),D.type="checkbox",D.name=o.fieldName,L&&D.setAttribute("checked",!0),D.setAttribute("exportValue",o.exportValue),D.tabIndex=w,D.addEventListener("change",z=>{const{name:ie,checked:j}=z.target;for(const $ of this._getElementsByName(ie,E)){const se=j&&$.exportValue===o.exportValue;$.domElement&&($.domElement.checked=se),i.setValue($.id,{value:se})}i.setValue(E,{value:j})}),D.addEventListener("resetform",z=>{const ie=o.defaultFieldValue||"Off";z.target.checked=ie===o.exportValue}),this.enableScripting&&this.hasJSActions&&(D.addEventListener("updatefromsandbox",z=>{const ie={value(j){j.target.checked=j.detail.value!=="Off",i.setValue(E,{value:j.target.checked})}};this._dispatchEventFromSandbox(ie,z)}),this._setEventListeners(D,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.checked)),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class g extends b{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const i=this.annotationStorage,o=this.data,E=o.id;let L=i.getValue(E,{value:o.fieldValue===o.buttonValue}).value;typeof L=="string"&&(L=L!==o.buttonValue,i.setValue(E,{value:L}));const D=document.createElement("input");if(c.add(D),D.setAttribute("data-element-id",E),D.disabled=o.readOnly,this._setRequired(D,this.data.required),D.type="radio",D.name=o.fieldName,L&&D.setAttribute("checked",!0),D.tabIndex=w,D.addEventListener("change",z=>{const{name:ie,checked:j}=z.target;for(const $ of this._getElementsByName(ie,E))i.setValue($.id,{value:!1});i.setValue(E,{value:j})}),D.addEventListener("resetform",z=>{const ie=o.defaultFieldValue;z.target.checked=ie!=null&&ie===o.buttonValue}),this.enableScripting&&this.hasJSActions){const z=o.buttonValue;D.addEventListener("updatefromsandbox",ie=>{const j={value:$=>{const se=z===$.detail.value;for(const Y of this._getElementsByName($.target.name)){const re=se&&Y.id===E;Y.domElement&&(Y.domElement.checked=re),i.setValue(Y.id,{value:re})}}};this._dispatchEventFromSandbox(j,ie)}),this._setEventListeners(D,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ie=>ie.target.checked)}return this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class S extends l{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(i.title=this.data.alternativeText);const o=i.lastChild;return this.enableScripting&&this.hasJSActions&&o&&(this._setDefaultPropertiesFromJS(o),o.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({},E)})),i}}class M extends b{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const i=this.annotationStorage,o=this.data.id,E=i.getValue(o,{value:this.data.fieldValue}),L=document.createElement("select");c.add(L),L.setAttribute("data-element-id",o),L.disabled=this.data.readOnly,this._setRequired(L,this.data.required),L.name=this.data.fieldName,L.tabIndex=w;let D=this.data.combo&&this.data.options.length>0;this.data.combo||(L.size=this.data.options.length,this.data.multiSelect&&(L.multiple=!0)),L.addEventListener("resetform",se=>{const Y=this.data.defaultFieldValue;for(const re of L.options)re.selected=re.value===Y});for(const se of this.data.options){const Y=document.createElement("option");Y.textContent=se.displayValue,Y.value=se.exportValue,E.value.includes(se.exportValue)&&(Y.setAttribute("selected",!0),D=!1),L.append(Y)}let z=null;if(D){const se=document.createElement("option");se.value=" ",se.setAttribute("hidden",!0),se.setAttribute("selected",!0),L.prepend(se),z=()=>{se.remove(),L.removeEventListener("input",z),z=null},L.addEventListener("input",z)}const ie=se=>{const Y=se?"value":"textContent",{options:re,multiple:pe}=L;return pe?Array.prototype.filter.call(re,ve=>ve.selected).map(ve=>ve[Y]):re.selectedIndex===-1?null:re[re.selectedIndex][Y]};let j=ie(!1);const $=se=>{const Y=se.target.options;return Array.prototype.map.call(Y,re=>({displayValue:re.textContent,exportValue:re.value}))};return this.enableScripting&&this.hasJSActions?(L.addEventListener("updatefromsandbox",se=>{const Y={value(re){z==null||z();const pe=re.detail.value,ve=new Set(Array.isArray(pe)?pe:[pe]);for(const Ce of L.options)Ce.selected=ve.has(Ce.value);i.setValue(o,{value:ie(!0)}),j=ie(!1)},multipleSelection(re){L.multiple=!0},remove(re){const pe=L.options,ve=re.detail.remove;pe[ve].selected=!1,L.remove(ve),pe.length>0&&Array.prototype.findIndex.call(pe,Pe=>Pe.selected)===-1&&(pe[0].selected=!0),i.setValue(o,{value:ie(!0),items:$(re)}),j=ie(!1)},clear(re){for(;L.length!==0;)L.remove(0);i.setValue(o,{value:null,items:[]}),j=ie(!1)},insert(re){const{index:pe,displayValue:ve,exportValue:Ce}=re.detail.insert,Pe=L.children[pe],ke=document.createElement("option");ke.textContent=ve,ke.value=Ce,Pe?Pe.before(ke):L.append(ke),i.setValue(o,{value:ie(!0),items:$(re)}),j=ie(!1)},items(re){const{items:pe}=re.detail;for(;L.length!==0;)L.remove(0);for(const ve of pe){const{displayValue:Ce,exportValue:Pe}=ve,ke=document.createElement("option");ke.textContent=Ce,ke.value=Pe,L.append(ke)}L.options.length>0&&(L.options[0].selected=!0),i.setValue(o,{value:ie(!0),items:$(re)}),j=ie(!1)},indices(re){const pe=new Set(re.detail.indices);for(const ve of re.target.options)ve.selected=pe.has(ve.index);i.setValue(o,{value:ie(!0)}),j=ie(!1)},editable(re){re.target.disabled=!re.detail.editable}};this._dispatchEventFromSandbox(Y,se)}),L.addEventListener("input",se=>{var re;const Y=ie(!0);i.setValue(o,{value:Y}),se.preventDefault(),(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:j,changeEx:Y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],se=>se.target.value)):L.addEventListener("input",function(se){i.setValue(o,{value:ie(!0)})}),this.data.combo&&this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}const W=class extends T{constructor(i){var L,D,z;const{data:o}=i,E=!W.IGNORE_TYPES.has(o.parentType)&&!!(((L=o.titleObj)==null?void 0:L.str)||((D=o.contentsObj)==null?void 0:D.str)||((z=o.richText)==null?void 0:z.str));super(i,{isRenderable:E})}render(){this.container.classList.add("popupAnnotation");const i=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(i.length===0)return this.container;const o=new R({container:this.container,trigger:Array.from(i),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),E=this.page,L=n.Util.normalizeRect([this.data.parentRect[0],E.view[3]-this.data.parentRect[1]+E.view[1],this.data.parentRect[2],E.view[3]-this.data.parentRect[3]+E.view[1]]),D=L[0]+this.data.parentRect[2]-this.data.parentRect[0],z=L[1],{pageWidth:ie,pageHeight:j,pageX:$,pageY:se}=this.viewport.rawDims;return this.container.style.left=`${100*(D-$)/ie}%`,this.container.style.top=`${100*(z-se)/j}%`,this.container.append(o.render()),this.container}};let P=W;$e(P,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class R{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var ie,j;const o=document.createElement("div");o.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?o:this.container,this.hideElement.hidden=!0;const E=document.createElement("div");E.classList.add("popup");const L=this.color;if(L){const $=.7*(255-L[0])+L[0],se=.7*(255-L[1])+L[1],Y=.7*(255-L[2])+L[2];E.style.backgroundColor=n.Util.makeHexColor($|0,se|0,Y|0)}const D=document.createElement("h1");D.dir=this.titleObj.dir,D.textContent=this.titleObj.str,E.append(D);const z=a.PDFDateString.toDateObject(this.modificationDate);if(z){const $=document.createElement("span");$.classList.add("popupDate"),$.textContent="{{date}}, {{time}}",$.dataset.l10nId="annotation_date_string",$.dataset.l10nArgs=JSON.stringify({date:z.toLocaleDateString(),time:z.toLocaleTimeString()}),E.append($)}if(((ie=this.richText)==null?void 0:ie.str)&&(!((j=this.contentsObj)!=null&&j.str)||this.contentsObj.str===this.richText.str))_.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:E}),E.lastChild.classList.add("richText","popupContent");else{const $=this._formatContents(this.contentsObj);E.append($)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const $ of this.trigger)$.addEventListener("click",this._toggle.bind(this)),$.addEventListener("mouseover",this._show.bind(this,!1)),$.addEventListener("mouseout",this._hide.bind(this,!1));return E.addEventListener("click",this._hide.bind(this,!0)),o.append(E),o}_formatContents({str:i,dir:o}){const E=document.createElement("p");E.classList.add("popupContent"),E.dir=o;const L=i.split(/(?:\r\n?|\n)/);for(let D=0,z=L.length;D<z;++D){const ie=L[D];E.append(document.createTextNode(ie)),D<z-1&&E.append(document.createElement("br"))}return E}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class s extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const i=document.createElement("div");i.classList.add("annotationTextContent"),i.setAttribute("role","comment");for(const o of this.textContent){const E=document.createElement("span");E.textContent=o,i.append(E)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class h extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const i=this.data,{width:o,height:E}=O(i.rect),L=this.svgFactory.create(o,E,!0),D=this.svgFactory.createElement("svg:line");return D.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),D.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),D.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),D.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),D.setAttribute("stroke-width",i.borderStyle.width||1),D.setAttribute("stroke","transparent"),D.setAttribute("fill","transparent"),L.append(D),this.container.append(L),this._createPopup(D,i),this.container}}class I extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const i=this.data,{width:o,height:E}=O(i.rect),L=this.svgFactory.create(o,E,!0),D=i.borderStyle.width,z=this.svgFactory.createElement("svg:rect");return z.setAttribute("x",D/2),z.setAttribute("y",D/2),z.setAttribute("width",o-D),z.setAttribute("height",E-D),z.setAttribute("stroke-width",D||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),L.append(z),this.container.append(L),this._createPopup(z,i),this.container}}class f extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const i=this.data,{width:o,height:E}=O(i.rect),L=this.svgFactory.create(o,E,!0),D=i.borderStyle.width,z=this.svgFactory.createElement("svg:ellipse");return z.setAttribute("cx",o/2),z.setAttribute("cy",E/2),z.setAttribute("rx",o/2-D/2),z.setAttribute("ry",E/2-D/2),z.setAttribute("stroke-width",D||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),L.append(z),this.container.append(L),this._createPopup(z,i),this.container}}class B extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:o,height:E}=O(i.rect),L=this.svgFactory.create(o,E,!0);let D=[];for(const ie of i.vertices){const j=ie.x-i.rect[0],$=i.rect[3]-ie.y;D.push(j+","+$)}D=D.join(" ");const z=this.svgFactory.createElement(this.svgElementName);return z.setAttribute("points",D),z.setAttribute("stroke-width",i.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),L.append(z),this.container.append(L),this._createPopup(z,i),this.container}}class q extends B{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class G extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:o,height:E}=O(i.rect),L=this.svgFactory.create(o,E,!0);for(const D of i.inkLists){let z=[];for(const j of D){const $=j.x-i.rect[0],se=i.rect[3]-j.y;z.push(`${$},${se}`)}z=z.join(" ");const ie=this.svgFactory.createElement(this.svgElementName);ie.setAttribute("points",z),ie.setAttribute("stroke-width",i.borderStyle.width||1),ie.setAttribute("stroke","transparent"),ie.setAttribute("fill","transparent"),this._createPopup(ie,i),L.append(ie)}return this.container.append(L),this.container}}class ue extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class ae extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class le extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class _e extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class Ae extends T{constructor(i){var E,L,D;const o=!!(i.data.hasPopup||((E=i.data.titleObj)==null?void 0:E.str)||((L=i.data.contentsObj)==null?void 0:L.str)||((D=i.data.richText)==null?void 0:D.str));super(i,{isRenderable:o,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class X extends T{constructor(i){var L;super(i,{isRenderable:!0});const{filename:o,content:E}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(o,!0),this.content=E,(L=this.linkService.eventBus)==null||L.dispatch("fileattachmentannotation",{source:this,filename:o,content:E})}render(){var o,E;this.container.classList.add("fileAttachmentAnnotation");let i;return this.data.hasAppearance?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),i.classList.add("popupTriggerArea"),i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((o=this.data.titleObj)==null?void 0:o.str)||((E=this.data.contentsObj)==null?void 0:E.str)||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)}}const K=class{static render(i){var j,$;const{annotations:o,div:E,viewport:L,accessibilityManager:D}=i;(0,a.setLayerDimensions)(E,L);const z={data:null,layer:E,page:i.page,viewport:L,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:i.annotationStorage||new m.AnnotationStorage,enableScripting:i.enableScripting===!0,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects};let ie=0;for(const se of o){if(se.noHTML)continue;if(se.annotationType!==n.AnnotationType.POPUP){const{width:pe,height:ve}=O(se.rect);if(pe<=0||ve<=0)continue}z.data=se;const Y=k.create(z);if(!Y.isRenderable)continue;const re=Y.render();if(se.hidden&&(re.style.visibility="hidden"),Array.isArray(re))for(const pe of re)pe.style.zIndex=ie++,oe(j=K,ne,Gt).call(j,pe,se.id,E,D);else re.style.zIndex=ie++,Y instanceof P?E.prepend(re):oe($=K,ne,Gt).call($,re,se.id,E,D)}oe(this,he,Xt).call(this,E,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:o,div:E,viewport:L}=i;(0,a.setLayerDimensions)(E,{rotation:L.rotation}),oe(this,he,Xt).call(this,E,o),E.hidden=!1}};let Ee=K;ne=new WeakSet,Gt=function(i,o,E,L){const D=i.firstChild||i;D.id=`${a.AnnotationPrefix}${o}`,E.append(i),L==null||L.moveElementInDOM(E,i,D,!1)},he=new WeakSet,Xt=function(i,o){if(!!o){for(const[E,L]of o){const D=i.querySelector(`[data-annotation-id="${E}"]`);if(!D)continue;const{firstChild:z}=D;z?z.nodeName==="CANVAS"?z.replaceWith(L):z.before(L):D.append(L)}o.clear()}},te(Ee,ne),te(Ee,he),t.AnnotationLayer=Ee},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function r(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([m,v,_,w]){return["G",1-Math.min(1,.3*m+.59*_+.11*v+w)]}static G_CMYK([m]){return["CMYK",0,0,0,1-m]}static G_RGB([m]){return["RGB",m,m,m]}static G_HTML([m]){const v=r(m);return`#${v}${v}${v}`}static RGB_G([m,v,_]){return["G",.3*m+.59*v+.11*_]}static RGB_HTML([m,v,_]){const w=r(m),u=r(v),c=r(_);return`#${w}${u}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB([m,v,_,w]){return["RGB",1-Math.min(1,m+w),1-Math.min(1,_+w),1-Math.min(1,v+w)]}static CMYK_HTML(m){const v=this.CMYK_RGB(m).slice(1);return this.RGB_HTML(v)}static RGB_CMYK([m,v,_]){const w=1-m,u=1-v,c=1-_,O=Math.min(w,u,c);return["CMYK",w,u,c,O]}}t.ColorConverters=n},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=r(19);class a{static setupStorage(v,_,w,u,c){const O=u.getValue(_,{value:null});switch(w.name){case"textarea":if(O.value!==null&&(v.textContent=O.value),c==="print")break;v.addEventListener("input",k=>{u.setValue(_,{value:k.target.value})});break;case"input":if(w.attributes.type==="radio"||w.attributes.type==="checkbox"){if(O.value===w.attributes.xfaOn?v.setAttribute("checked",!0):O.value===w.attributes.xfaOff&&v.removeAttribute("checked"),c==="print")break;v.addEventListener("change",k=>{u.setValue(_,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(O.value!==null&&v.setAttribute("value",O.value),c==="print")break;v.addEventListener("input",k=>{u.setValue(_,{value:k.target.value})})}break;case"select":if(O.value!==null)for(const k of w.children)k.attributes.value===O.value&&(k.attributes.selected=!0);v.addEventListener("input",k=>{const T=k.target.options,l=T.selectedIndex===-1?"":T[T.selectedIndex].value;u.setValue(_,{value:l})});break}}static setAttributes({html:v,element:_,storage:w=null,intent:u,linkService:c}){const{attributes:O}=_,k=v instanceof HTMLAnchorElement;O.type==="radio"&&(O.name=`${O.name}-${u}`);for(const[T,l]of Object.entries(O))if(l!=null)switch(T){case"class":l.length&&v.setAttribute(T,l.join(" "));break;case"dataId":break;case"id":v.setAttribute("data-element-id",l);break;case"style":Object.assign(v.style,l);break;case"textContent":v.textContent=l;break;default:(!k||T!=="href"&&T!=="newWindow")&&v.setAttribute(T,l)}k&&c.addLinkAttributes(v,O.href,O.newWindow),w&&O.dataId&&this.setupStorage(v,O.dataId,_,w)}static render(v){var d;const _=v.annotationStorage,w=v.linkService,u=v.xfaHtml,c=v.intent||"display",O=document.createElement(u.name);u.attributes&&this.setAttributes({html:O,element:u,intent:c,linkService:w});const k=[[u,-1,O]],T=v.div;if(T.append(O),v.viewport){const b=`matrix(${v.viewport.transform.join(",")})`;T.style.transform=b}c!=="richText"&&T.setAttribute("class","xfaLayer xfaFont");const l=[];for(;k.length>0;){const[b,C,y]=k.at(-1);if(C+1===b.children.length){k.pop();continue}const g=b.children[++k.at(-1)[1]];if(g===null)continue;const{name:S}=g;if(S==="#text"){const P=document.createTextNode(g.value);l.push(P),y.append(P);continue}let M;if((d=g==null?void 0:g.attributes)!=null&&d.xmlns?M=document.createElementNS(g.attributes.xmlns,S):M=document.createElement(S),y.append(M),g.attributes&&this.setAttributes({html:M,element:g,storage:_,intent:c,linkService:w}),g.children&&g.children.length>0)k.push([g,-1,M]);else if(g.value){const P=document.createTextNode(g.value);n.XfaText.shouldBuildText(S)&&l.push(P),M.append(P)}}for(const b of T.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:l}}static update(v){const _=`matrix(${v.viewport.transform.join(",")})`;v.div.style.transform=_,v.div.hidden=!1}}t.XfaLayer=a},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=r(6),a=r(1),m=r(10);let v=class{constructor(){(0,a.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=v;{let y=function(s){let h=[];const I=[];for(const f of s){if(f.fn==="save"){h.push({fnId:92,fn:"group",items:[]}),I.push(h),h=h.at(-1).items;continue}f.fn==="restore"?h=I.pop():h.push(f)}return h},g=function(s){if(Number.isInteger(s))return s.toString();const h=s.toFixed(10);let I=h.length-1;if(h[I]!=="0")return h;do I--;while(h[I]==="0");return h.substring(0,h[I]==="."?I:I+1)},S=function(s){if(s[4]===0&&s[5]===0){if(s[1]===0&&s[2]===0)return s[0]===1&&s[3]===1?"":`scale(${g(s[0])} ${g(s[3])})`;if(s[0]===s[3]&&s[1]===-s[2]){const h=Math.acos(s[0])*180/Math.PI;return`rotate(${g(h)})`}}else if(s[0]===1&&s[1]===0&&s[2]===0&&s[3]===1)return`translate(${g(s[4])} ${g(s[5])})`;return`matrix(${g(s[0])} ${g(s[1])} ${g(s[2])} ${g(s[3])} ${g(s[4])} ${g(s[5])})`};var w=y,u=g,_=S;const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},O="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",T=["butt","round","square"],l=["miter","round","bevel"],d=function(s,h="",I=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!I)return URL.createObjectURL(new Blob([s],{type:h}));const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let B=`data:${h};base64,`;for(let q=0,G=s.length;q<G;q+=3){const Q=s[q]&255,ue=s[q+1]&255,ae=s[q+2]&255,le=Q>>2,_e=(Q&3)<<4|ue>>4,Ae=q+1<G?(ue&15)<<2|ae>>6:64,X=q+2<G?ae&63:64;B+=f[le]+f[_e]+f[Ae]+f[X]}return B},b=function(){const s=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,I=new Int32Array(256);for(let ae=0;ae<256;ae++){let le=ae;for(let _e=0;_e<8;_e++)le&1?le=3988292384^le>>1&2147483647:le=le>>1&2147483647;I[ae]=le}function f(ae,le,_e){let Ae=-1;for(let X=le;X<_e;X++){const Ee=(Ae^ae[X])&255,Se=I[Ee];Ae=Ae>>>8^Se}return Ae^-1}function B(ae,le,_e,Ae){let X=Ae;const Ee=le.length;_e[X]=Ee>>24&255,_e[X+1]=Ee>>16&255,_e[X+2]=Ee>>8&255,_e[X+3]=Ee&255,X+=4,_e[X]=ae.charCodeAt(0)&255,_e[X+1]=ae.charCodeAt(1)&255,_e[X+2]=ae.charCodeAt(2)&255,_e[X+3]=ae.charCodeAt(3)&255,X+=4,_e.set(le,X),X+=le.length;const Se=f(_e,Ae+4,X);_e[X]=Se>>24&255,_e[X+1]=Se>>16&255,_e[X+2]=Se>>8&255,_e[X+3]=Se&255}function q(ae,le,_e){let Ae=1,X=0;for(let Ee=le;Ee<_e;++Ee)Ae=(Ae+(ae[Ee]&255))%65521,X=(X+Ae)%65521;return X<<16|Ae}function G(ae){if(!m.isNodeJS)return Q(ae);try{let le;parseInt(process.versions.node)>=8?le=ae:le=Buffer.from(ae);const _e=require$$5.deflateSync(le,{level:9});return _e instanceof Uint8Array?_e:new Uint8Array(_e)}catch(le){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+le)}return Q(ae)}function Q(ae){let le=ae.length;const _e=65535,Ae=Math.ceil(le/_e),X=new Uint8Array(2+le+Ae*5+4);let Ee=0;X[Ee++]=120,X[Ee++]=156;let Se=0;for(;le>_e;)X[Ee++]=0,X[Ee++]=255,X[Ee++]=255,X[Ee++]=0,X[Ee++]=0,X.set(ae.subarray(Se,Se+_e),Ee),Ee+=_e,Se+=_e,le-=_e;X[Ee++]=1,X[Ee++]=le&255,X[Ee++]=le>>8&255,X[Ee++]=~le&65535&255,X[Ee++]=(~le&65535)>>8&255,X.set(ae.subarray(Se),Ee),Ee+=ae.length-Se;const ee=q(ae,0,ae.length);return X[Ee++]=ee>>24&255,X[Ee++]=ee>>16&255,X[Ee++]=ee>>8&255,X[Ee++]=ee&255,X}function ue(ae,le,_e,Ae){const X=ae.width,Ee=ae.height;let Se,ee,N;const H=ae.data;switch(le){case a.ImageKind.GRAYSCALE_1BPP:ee=0,Se=1,N=X+7>>3;break;case a.ImageKind.RGB_24BPP:ee=2,Se=8,N=X*3;break;case a.ImageKind.RGBA_32BPP:ee=6,Se=8,N=X*4;break;default:throw new Error("invalid format")}const W=new Uint8Array((1+N)*Ee);let ne=0,J=0;for(let o=0;o<Ee;++o)W[ne++]=0,W.set(H.subarray(J,J+N),ne),J+=N,ne+=N;if(le===a.ImageKind.GRAYSCALE_1BPP&&Ae){ne=0;for(let o=0;o<Ee;o++){ne++;for(let E=0;E<N;E++)W[ne++]^=255}}const he=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,X&255,Ee>>24&255,Ee>>16&255,Ee>>8&255,Ee&255,Se,ee,0,0,0]),Z=G(W),K=s.length+h*3+he.length+Z.length,x=new Uint8Array(K);let i=0;return x.set(s,i),i+=s.length,B("IHDR",he,x,i),i+=h+he.length,B("IDATA",Z,x,i),i+=h+Z.length,B("IEND",new Uint8Array(0),x,i),d(x,"image/png",_e)}return function(le,_e,Ae){const X=le.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:le.kind;return ue(le,X,_e,Ae)}}();class C{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(h,I){this.x=h,this.y=I}}let M=0,P=0,R=0;t.SVGGraphics=v=class{constructor(s,h,I=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new C,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=s,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!I,this._operatorIdMapping=[];for(const f in a.OPS)this._operatorIdMapping[a.OPS[f]]=f}getObject(s,h=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):h}save(){this.transformStack.push(this.transformMatrix);const s=this.current;this.extraStack.push(s),this.current=s.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(s){this.save(),this.executeOpTree(s),this.restore()}loadDependencies(s){const h=s.fnArray,I=s.argsArray;for(let f=0,B=h.length;f<B;f++)if(h[f]===a.OPS.dependency)for(const q of I[f]){const G=q.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(ue=>{G.get(q,ue)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(s,h,I,f,B,q){const G=[s,h,I,f,B,q];this.transformMatrix=a.Util.transform(this.transformMatrix,G),this.tgrp=null}getSVG(s,h){this.viewport=h;const I=this._initialize(h);return this.loadDependencies(s).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(s)),I))}convertOpList(s){const h=this._operatorIdMapping,I=s.argsArray,f=s.fnArray,B=[];for(let q=0,G=f.length;q<G;q++){const Q=f[q];B.push({fnId:Q,fn:h[Q],args:I[q]})}return y(B)}executeOpTree(s){for(const h of s){const I=h.fn,f=h.fnId,B=h.args;switch(f|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(B);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(B[0],B[1]);break;case a.OPS.setFont:this.setFont(B);break;case a.OPS.showText:this.showText(B[0]);break;case a.OPS.showSpacedText:this.showText(B[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(B[0],B[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(B[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(B[0]);break;case a.OPS.setHScale:this.setHScale(B[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(B[0],B[1],B[2],B[3],B[4],B[5]);break;case a.OPS.setTextRise:this.setTextRise(B[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(B[0]);break;case a.OPS.setLineWidth:this.setLineWidth(B[0]);break;case a.OPS.setLineJoin:this.setLineJoin(B[0]);break;case a.OPS.setLineCap:this.setLineCap(B[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(B[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(B[0],B[1],B[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(B[0],B[1],B[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(B);break;case a.OPS.setFillColorN:this.setFillColorN(B);break;case a.OPS.shadingFill:this.shadingFill(B[0]);break;case a.OPS.setDash:this.setDash(B[0],B[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(B[0]);break;case a.OPS.setFlatness:this.setFlatness(B[0]);break;case a.OPS.setGState:this.setGState(B[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(B[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(B[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(B[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(B[0],B[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(B[0],B[1],B[2],B[3],B[4],B[5]);break;case a.OPS.constructPath:this.constructPath(B[0],B[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(h.items);break;default:(0,a.warn)(`Unimplemented operator ${I}`);break}}}setWordSpacing(s){this.current.wordSpacing=s}setCharSpacing(s){this.current.charSpacing=s}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(s,h,I,f,B,q){const G=this.current;G.textMatrix=G.lineMatrix=[s,h,I,f,B,q],G.textMatrixScale=Math.hypot(s,h),G.x=G.lineX=0,G.y=G.lineY=0,G.xcoords=[],G.ycoords=[],G.tspan=this.svgFactory.createElement("svg:tspan"),G.tspan.setAttributeNS(null,"font-family",G.fontFamily),G.tspan.setAttributeNS(null,"font-size",`${g(G.fontSize)}px`),G.tspan.setAttributeNS(null,"y",g(-G.y)),G.txtElement=this.svgFactory.createElement("svg:text"),G.txtElement.append(G.tspan)}beginText(){const s=this.current;s.x=s.lineX=0,s.y=s.lineY=0,s.textMatrix=a.IDENTITY_MATRIX,s.lineMatrix=a.IDENTITY_MATRIX,s.textMatrixScale=1,s.tspan=this.svgFactory.createElement("svg:tspan"),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtgrp=this.svgFactory.createElement("svg:g"),s.xcoords=[],s.ycoords=[]}moveText(s,h){const I=this.current;I.x=I.lineX+=s,I.y=I.lineY+=h,I.xcoords=[],I.ycoords=[],I.tspan=this.svgFactory.createElement("svg:tspan"),I.tspan.setAttributeNS(null,"font-family",I.fontFamily),I.tspan.setAttributeNS(null,"font-size",`${g(I.fontSize)}px`),I.tspan.setAttributeNS(null,"y",g(-I.y))}showText(s){const h=this.current,I=h.font,f=h.fontSize;if(f===0)return;const B=h.fontSizeScale,q=h.charSpacing,G=h.wordSpacing,Q=h.fontDirection,ue=h.textHScale*Q,ae=I.vertical,le=ae?1:-1,_e=I.defaultVMetrics,Ae=f*h.fontMatrix[0];let X=0;for(const ee of s){if(ee===null){X+=Q*G;continue}else if(typeof ee=="number"){X+=le*ee*f/1e3;continue}const N=(ee.isSpace?G:0)+q,H=ee.fontChar;let W,ne,J=ee.width;if(ae){let Z;const K=ee.vmetric||_e;Z=ee.vmetric?K[1]:J*.5,Z=-Z*Ae;const x=K[2]*Ae;J=K?-K[0]:J,W=Z/B,ne=(X+x)/B}else W=X/B,ne=0;(ee.isInFont||I.missingFile)&&(h.xcoords.push(h.x+W),ae&&h.ycoords.push(-h.y+ne),h.tspan.textContent+=H);let he;ae?he=J*Ae-N*Q:he=J*Ae+N*Q,X+=he}h.tspan.setAttributeNS(null,"x",h.xcoords.map(g).join(" ")),ae?h.tspan.setAttributeNS(null,"y",h.ycoords.map(g).join(" ")):h.tspan.setAttributeNS(null,"y",g(-h.y)),ae?h.y-=X:h.x+=X*ue,h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${g(h.fontSize)}px`),h.fontStyle!==c.fontStyle&&h.tspan.setAttributeNS(null,"font-style",h.fontStyle),h.fontWeight!==c.fontWeight&&h.tspan.setAttributeNS(null,"font-weight",h.fontWeight);const Ee=h.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(Ee===a.TextRenderingMode.FILL||Ee===a.TextRenderingMode.FILL_STROKE?(h.fillColor!==c.fillColor&&h.tspan.setAttributeNS(null,"fill",h.fillColor),h.fillAlpha<1&&h.tspan.setAttributeNS(null,"fill-opacity",h.fillAlpha)):h.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?h.tspan.setAttributeNS(null,"fill","transparent"):h.tspan.setAttributeNS(null,"fill","none"),Ee===a.TextRenderingMode.STROKE||Ee===a.TextRenderingMode.FILL_STROKE){const ee=1/(h.textMatrixScale||1);this._setStrokeAttributes(h.tspan,ee)}let Se=h.textMatrix;h.textRise!==0&&(Se=Se.slice(),Se[5]+=h.textRise),h.txtElement.setAttributeNS(null,"transform",`${S(Se)} scale(${g(ue)}, -1)`),h.txtElement.setAttributeNS(O,"xml:space","preserve"),h.txtElement.append(h.tspan),h.txtgrp.append(h.txtElement),this._ensureTransformGroup().append(h.txtElement)}setLeadingMoveText(s,h){this.setLeading(-h),this.moveText(s,h)}addFontStyle(s){if(!s.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const h=d(s.data,s.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${s.loadedName}"; src: url(${h}); }
`}setFont(s){const h=this.current,I=this.commonObjs.get(s[0]);let f=s[1];h.font=I,this.embedFonts&&!I.missingFile&&!this.embeddedFonts[I.loadedName]&&(this.addFontStyle(I),this.embeddedFonts[I.loadedName]=I),h.fontMatrix=I.fontMatrix||a.FONT_IDENTITY_MATRIX;let B="normal";I.black?B="900":I.bold&&(B="bold");const q=I.italic?"italic":"normal";f<0?(f=-f,h.fontDirection=-1):h.fontDirection=1,h.fontSize=f,h.fontFamily=I.loadedName,h.fontWeight=B,h.fontStyle=q,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",g(-h.y)),h.xcoords=[],h.ycoords=[]}endText(){var h;const s=this.current;s.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((h=s.txtElement)==null?void 0:h.hasChildNodes())&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(s){s>0&&(this.current.lineWidth=s)}setLineCap(s){this.current.lineCap=T[s]}setLineJoin(s){this.current.lineJoin=l[s]}setMiterLimit(s){this.current.miterLimit=s}setStrokeAlpha(s){this.current.strokeAlpha=s}setStrokeRGBColor(s,h,I){this.current.strokeColor=a.Util.makeHexColor(s,h,I)}setFillAlpha(s){this.current.fillAlpha=s}setFillRGBColor(s,h,I){this.current.fillColor=a.Util.makeHexColor(s,h,I),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(s){this.current.strokeColor=this._makeColorN_Pattern(s)}setFillColorN(s){this.current.fillColor=this._makeColorN_Pattern(s)}shadingFill(s){const h=this.viewport.width,I=this.viewport.height,f=a.Util.inverseTransform(this.transformMatrix),B=a.Util.applyTransform([0,0],f),q=a.Util.applyTransform([0,I],f),G=a.Util.applyTransform([h,0],f),Q=a.Util.applyTransform([h,I],f),ue=Math.min(B[0],q[0],G[0],Q[0]),ae=Math.min(B[1],q[1],G[1],Q[1]),le=Math.max(B[0],q[0],G[0],Q[0]),_e=Math.max(B[1],q[1],G[1],Q[1]),Ae=this.svgFactory.createElement("svg:rect");Ae.setAttributeNS(null,"x",ue),Ae.setAttributeNS(null,"y",ae),Ae.setAttributeNS(null,"width",le-ue),Ae.setAttributeNS(null,"height",_e-ae),Ae.setAttributeNS(null,"fill",this._makeShadingPattern(s)),this.current.fillAlpha<1&&Ae.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Ae)}_makeColorN_Pattern(s){return s[0]==="TilingPattern"?this._makeTilingPattern(s):this._makeShadingPattern(s)}_makeTilingPattern(s){const h=s[1],I=s[2],f=s[3]||a.IDENTITY_MATRIX,[B,q,G,Q]=s[4],ue=s[5],ae=s[6],le=s[7],_e=`shading${R++}`,[Ae,X,Ee,Se]=a.Util.normalizeRect([...a.Util.applyTransform([B,q],f),...a.Util.applyTransform([G,Q],f)]),[ee,N]=a.Util.singularValueDecompose2dScale(f),H=ue*ee,W=ae*N,ne=this.svgFactory.createElement("svg:pattern");ne.setAttributeNS(null,"id",_e),ne.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ne.setAttributeNS(null,"width",H),ne.setAttributeNS(null,"height",W),ne.setAttributeNS(null,"x",`${Ae}`),ne.setAttributeNS(null,"y",`${X}`);const J=this.svg,he=this.transformMatrix,Z=this.current.fillColor,K=this.current.strokeColor,x=this.svgFactory.create(Ee-Ae,Se-X);if(this.svg=x,this.transformMatrix=f,le===2){const i=a.Util.makeHexColor(...h);this.current.fillColor=i,this.current.strokeColor=i}return this.executeOpTree(this.convertOpList(I)),this.svg=J,this.transformMatrix=he,this.current.fillColor=Z,this.current.strokeColor=K,ne.append(x.childNodes[0]),this.defs.append(ne),`url(#${_e})`}_makeShadingPattern(s){switch(typeof s=="string"&&(s=this.objs.get(s)),s[0]){case"RadialAxial":const h=`shading${R++}`,I=s[3];let f;switch(s[1]){case"axial":const B=s[4],q=s[5];f=this.svgFactory.createElement("svg:linearGradient"),f.setAttributeNS(null,"id",h),f.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),f.setAttributeNS(null,"x1",B[0]),f.setAttributeNS(null,"y1",B[1]),f.setAttributeNS(null,"x2",q[0]),f.setAttributeNS(null,"y2",q[1]);break;case"radial":const G=s[4],Q=s[5],ue=s[6],ae=s[7];f=this.svgFactory.createElement("svg:radialGradient"),f.setAttributeNS(null,"id",h),f.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),f.setAttributeNS(null,"cx",Q[0]),f.setAttributeNS(null,"cy",Q[1]),f.setAttributeNS(null,"r",ae),f.setAttributeNS(null,"fx",G[0]),f.setAttributeNS(null,"fy",G[1]),f.setAttributeNS(null,"fr",ue);break;default:throw new Error(`Unknown RadialAxial type: ${s[1]}`)}for(const B of I){const q=this.svgFactory.createElement("svg:stop");q.setAttributeNS(null,"offset",B[0]),q.setAttributeNS(null,"stop-color",B[1]),f.append(q)}return this.defs.append(f),`url(#${h})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${s[0]}`)}}setDash(s,h){this.current.dashArray=s,this.current.dashPhase=h}constructPath(s,h){const I=this.current;let f=I.x,B=I.y,q=[],G=0;for(const Q of s)switch(Q|0){case a.OPS.rectangle:f=h[G++],B=h[G++];const ue=h[G++],ae=h[G++],le=f+ue,_e=B+ae;q.push("M",g(f),g(B),"L",g(le),g(B),"L",g(le),g(_e),"L",g(f),g(_e),"Z");break;case a.OPS.moveTo:f=h[G++],B=h[G++],q.push("M",g(f),g(B));break;case a.OPS.lineTo:f=h[G++],B=h[G++],q.push("L",g(f),g(B));break;case a.OPS.curveTo:f=h[G+4],B=h[G+5],q.push("C",g(h[G]),g(h[G+1]),g(h[G+2]),g(h[G+3]),g(f),g(B)),G+=6;break;case a.OPS.curveTo2:q.push("C",g(f),g(B),g(h[G]),g(h[G+1]),g(h[G+2]),g(h[G+3])),f=h[G+2],B=h[G+3],G+=4;break;case a.OPS.curveTo3:f=h[G+2],B=h[G+3],q.push("C",g(h[G]),g(h[G+1]),g(f),g(B),g(f),g(B)),G+=4;break;case a.OPS.closePath:q.push("Z");break}q=q.join(" "),I.path&&s.length>0&&s[0]!==a.OPS.rectangle&&s[0]!==a.OPS.moveTo?q=I.path.getAttributeNS(null,"d")+q:(I.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(I.path)),I.path.setAttributeNS(null,"d",q),I.path.setAttributeNS(null,"fill","none"),I.element=I.path,I.setCurrentPoint(f,B)}endPath(){const s=this.current;if(s.path=null,!this.pendingClip)return;if(!s.element){this.pendingClip=null;return}const h=`clippath${M++}`,I=this.svgFactory.createElement("svg:clipPath");I.setAttributeNS(null,"id",h),I.setAttributeNS(null,"transform",S(this.transformMatrix));const f=s.element.cloneNode(!0);if(this.pendingClip==="evenodd"?f.setAttributeNS(null,"clip-rule","evenodd"):f.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,I.append(f),this.defs.append(I),s.activeClipUrl){s.clipGroup=null;for(const B of this.extraStack)B.clipGroup=null;I.setAttributeNS(null,"clip-path",s.activeClipUrl)}s.activeClipUrl=`url(#${h})`,this.tgrp=null}clip(s){this.pendingClip=s}closePath(){const s=this.current;if(s.path){const h=`${s.path.getAttributeNS(null,"d")}Z`;s.path.setAttributeNS(null,"d",h)}}setLeading(s){this.current.leading=-s}setTextRise(s){this.current.textRise=s}setTextRenderingMode(s){this.current.textRenderingMode=s}setHScale(s){this.current.textHScale=s/100}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[h,I]of s)switch(h){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I);break;case"CA":this.setStrokeAlpha(I);break;case"ca":this.setFillAlpha(I);break;default:(0,a.warn)(`Unimplemented graphic state operator ${h}`);break}}fill(){const s=this.current;s.element&&(s.element.setAttributeNS(null,"fill",s.fillColor),s.element.setAttributeNS(null,"fill-opacity",s.fillAlpha),this.endPath())}stroke(){const s=this.current;s.element&&(this._setStrokeAttributes(s.element),s.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(s,h=1){const I=this.current;let f=I.dashArray;h!==1&&f.length>0&&(f=f.map(function(B){return h*B})),s.setAttributeNS(null,"stroke",I.strokeColor),s.setAttributeNS(null,"stroke-opacity",I.strokeAlpha),s.setAttributeNS(null,"stroke-miterlimit",g(I.miterLimit)),s.setAttributeNS(null,"stroke-linecap",I.lineCap),s.setAttributeNS(null,"stroke-linejoin",I.lineJoin),s.setAttributeNS(null,"stroke-width",g(h*I.lineWidth)+"px"),s.setAttributeNS(null,"stroke-dasharray",f.map(g).join(" ")),s.setAttributeNS(null,"stroke-dashoffset",g(h*I.dashPhase)+"px")}eoFill(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width","1px"),s.setAttributeNS(null,"height","1px"),s.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(s)}paintImageXObject(s){const h=this.getObject(s);if(!h){(0,a.warn)(`Dependent image with object ID ${s} is not ready yet`);return}this.paintInlineImageXObject(h)}paintInlineImageXObject(s,h){const I=s.width,f=s.height,B=b(s,this.forceDataSchema,!!h),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",g(I)),q.setAttributeNS(null,"height",g(f)),this.current.element=q,this.clip("nonzero");const G=this.svgFactory.createElement("svg:image");G.setAttributeNS(k,"xlink:href",B),G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y",g(-f)),G.setAttributeNS(null,"width",g(I)+"px"),G.setAttributeNS(null,"height",g(f)+"px"),G.setAttributeNS(null,"transform",`scale(${g(1/I)} ${g(-1/f)})`),h?h.append(G):this._ensureTransformGroup().append(G)}paintImageMaskXObject(s){const h=this.getObject(s.data,s);if(h.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const I=this.current,f=h.width,B=h.height,q=I.fillColor;I.maskId=`mask${P++}`;const G=this.svgFactory.createElement("svg:mask");G.setAttributeNS(null,"id",I.maskId);const Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",g(f)),Q.setAttributeNS(null,"height",g(B)),Q.setAttributeNS(null,"fill",q),Q.setAttributeNS(null,"mask",`url(#${I.maskId})`),this.defs.append(G),this._ensureTransformGroup().append(Q),this.paintInlineImageXObject(h,G)}paintFormXObjectBegin(s,h){if(Array.isArray(s)&&s.length===6&&this.transform(s[0],s[1],s[2],s[3],s[4],s[5]),h){const I=h[2]-h[0],f=h[3]-h[1],B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x",h[0]),B.setAttributeNS(null,"y",h[1]),B.setAttributeNS(null,"width",g(I)),B.setAttributeNS(null,"height",g(f)),this.current.element=B,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(s){const h=this.svgFactory.create(s.width,s.height),I=this.svgFactory.createElement("svg:defs");h.append(I),this.defs=I;const f=this.svgFactory.createElement("svg:g");return f.setAttributeNS(null,"transform",S(s.transform)),h.append(f),this.svg=f,h}_ensureClipGroup(){if(!this.current.clipGroup){const s=this.svgFactory.createElement("svg:g");s.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(s),this.current.clipGroup=s}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",S(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return m.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return v.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return _.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return w.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var t=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),m=__w_pdfjs_require__(27),v=__w_pdfjs_require__(5),_=__w_pdfjs_require__(32),w=__w_pdfjs_require__(14),u=__w_pdfjs_require__(35),c=__w_pdfjs_require__(34)})(),__webpack_exports__})())}(pdf)),pdf.exports}(function(e,t){(function(n,a){e.exports=a()})(globalThis,()=>(()=>{var r=[,(v,_,w)=>{var d,b,Kt,y,Wn;Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleLinkService=_.PDFLinkService=_.LinkTarget=void 0;var u=w(2);const c="noopener noreferrer nofollow",O={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};_.LinkTarget=O;function k(M,{url:P,target:R,rel:s,enabled:h=!0}={}){if(!P||typeof P!="string")throw new Error('A valid "url" parameter must provided.');const I=(0,u.removeNullCharacters)(P);h?M.href=M.title=I:(M.href="",M.title=`Disabled: ${I}`,M.onclick=()=>!1);let f="";switch(R){case O.NONE:break;case O.SELF:f="_self";break;case O.BLANK:f="_blank";break;case O.PARENT:f="_parent";break;case O.TOP:f="_top";break}M.target=f,M.rel=typeof s=="string"?s:c}const S=class{constructor({eventBus:P,externalLinkTarget:R=null,externalLinkRel:s=null,ignoreDestinationZoom:h=!1}={}){te(this,b);te(this,d,new Map);this.eventBus=P,this.externalLinkTarget=R,this.externalLinkRel=s,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=h,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(P,R=null){this.baseUrl=R,this.pdfDocument=P,A(this,d).clear()}setViewer(P){this.pdfViewer=P}setHistory(P){this.pdfHistory=P}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(P){this.pdfViewer.currentPageNumber=P}get rotation(){return this.pdfViewer.pagesRotation}set rotation(P){this.pdfViewer.pagesRotation=P}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(P){if(!this.pdfDocument)return;let R,s;if(typeof P=="string"?(R=P,s=await this.pdfDocument.getDestination(P)):(R=null,s=await P),!Array.isArray(s)){console.error(`PDFLinkService.goToDestination: "${s}" is not a valid destination array, for dest="${P}".`);return}oe(this,b,Kt).call(this,P,R,s)}goToPage(P){if(!this.pdfDocument)return;const R=typeof P=="string"&&this.pdfViewer.pageLabelToPageNumber(P)||P|0;if(!(Number.isInteger(R)&&R>0&&R<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${P}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(R)),this.pdfViewer.scrollPageIntoView({pageNumber:R})}addLinkAttributes(P,R,s=!1){k(P,{url:R,target:s?O.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(P){if(typeof P=="string"){if(P.length>0)return this.getAnchorUrl("#"+escape(P))}else if(Array.isArray(P)){const R=JSON.stringify(P);if(R.length>0)return this.getAnchorUrl("#"+escape(R))}return this.getAnchorUrl("")}getAnchorUrl(P){return this.baseUrl?this.baseUrl+P:P}setHash(P){var h;if(!this.pdfDocument)return;let R,s;if(P.includes("=")){const I=(0,u.parseQueryString)(P);if(I.has("search")){const f=I.get("search").replaceAll('"',""),B=I.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:B?f:f.match(/\S+/g)})}if(I.has("page")&&(R=I.get("page")|0||1),I.has("zoom")){const f=I.get("zoom").split(","),B=f[0],q=parseFloat(B);B.includes("Fit")?B==="Fit"||B==="FitB"?s=[null,{name:B}]:B==="FitH"||B==="FitBH"||B==="FitV"||B==="FitBV"?s=[null,{name:B},f.length>1?f[1]|0:null]:B==="FitR"?f.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):s=[null,{name:B},f[1]|0,f[2]|0,f[3]|0,f[4]|0]:console.error(`PDFLinkService.setHash: "${B}" is not a valid zoom value.`):s=[null,{name:"XYZ"},f.length>1?f[1]|0:null,f.length>2?f[2]|0:null,q?q/100:B]}s?this.pdfViewer.scrollPageIntoView({pageNumber:R||this.page,destArray:s,allowNegativeOffset:!0}):R&&(this.page=R),I.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:I.get("pagemode")}),I.has("nameddest")&&this.goToDestination(I.get("nameddest"))}else{s=unescape(P);try{s=JSON.parse(s),Array.isArray(s)||(s=s.toString())}catch{}if(typeof s=="string"||oe(h=S,y,Wn).call(h,s)){this.goToDestination(s);return}console.error(`PDFLinkService.setHash: "${unescape(P)}" is not a valid destination.`)}}executeNamedAction(P){var R,s;switch(P){case"GoBack":(R=this.pdfHistory)==null||R.back();break;case"GoForward":(s=this.pdfHistory)==null||s.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:P})}async executeSetOCGState(P){const R=this.pdfDocument,s=await this.pdfViewer.optionalContentConfigPromise;if(R!==this.pdfDocument)return;let h;for(const I of P.state){switch(I){case"ON":case"OFF":case"Toggle":h=I;continue}switch(h){case"ON":s.setVisibility(I,!0);break;case"OFF":s.setVisibility(I,!1);break;case"Toggle":const f=s.getGroup(I);f&&s.setVisibility(I,!f.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(s)}cachePageRef(P,R){if(!R)return;const s=R.gen===0?`${R.num}R`:`${R.num}R${R.gen}`;A(this,d).set(s,P)}_cachedPageNumber(P){if(!P)return null;const R=P.gen===0?`${P.num}R`:`${P.num}R${P.gen}`;return A(this,d).get(R)||null}isPageVisible(P){return this.pdfViewer.isPageVisible(P)}isPageCached(P){return this.pdfViewer.isPageCached(P)}};let T=S;d=new WeakMap,b=new WeakSet,Kt=function(P,R=null,s){const h=s[0];let I;if(typeof h=="object"&&h!==null){if(I=this._cachedPageNumber(h),!I){this.pdfDocument.getPageIndex(h).then(f=>{this.cachePageRef(f+1,h),oe(this,b,Kt).call(this,P,R,s)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid page reference, for dest="${P}".`)});return}}else if(Number.isInteger(h))I=h+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid destination reference, for dest="${P}".`);return}if(!I||I<1||I>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${I}" is not a valid page number, for dest="${P}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:R,explicitDest:s,pageNumber:I})),this.pdfViewer.scrollPageIntoView({pageNumber:I,destArray:s,ignoreDestinationZoom:this._ignoreDestinationZoom})},y=new WeakSet,Wn=function(P){if(!Array.isArray(P))return!1;const R=P.length;if(R<2)return!1;const s=P[0];if(!(typeof s=="object"&&Number.isInteger(s.num)&&Number.isInteger(s.gen))&&!(Number.isInteger(s)&&s>=0))return!1;const h=P[1];if(!(typeof h=="object"&&typeof h.name=="string"))return!1;let I=!0;switch(h.name){case"XYZ":if(R!==5)return!1;break;case"Fit":case"FitB":return R===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(R!==3)return!1;break;case"FitR":if(R!==6)return!1;I=!1;break;default:return!1}for(let f=2;f<R;f++){const B=P[f];if(!(typeof B=="number"||I&&B===null))return!1}return!0},te(T,y),_.PDFLinkService=T;class l{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(P){}get rotation(){return 0}set rotation(P){}get isInPresentationMode(){return!1}async goToDestination(P){}goToPage(P){}addLinkAttributes(P,R,s=!1){k(P,{url:R,enabled:this.externalLinkEnabled})}getDestinationHash(P){return"#"}getAnchorUrl(P){return"#"}setHash(P){}executeNamedAction(P){}executeSetOCGState(P){}cachePageRef(P,R){}isPageVisible(P){return!0}isPageCached(P){return!0}}_.SimpleLinkService=l},(v,_)=>{var E,L,D,z,ie;Object.defineProperty(_,"__esModule",{value:!0}),_.animationStarted=_.VERTICAL_PADDING=_.UNKNOWN_SCALE=_.TextLayerMode=_.SpreadMode=_.SidebarView=_.ScrollMode=_.SCROLLBAR_PADDING=_.RenderingStates=_.ProgressBar=_.PresentationModeState=_.OutputScale=_.MIN_SCALE=_.MAX_SCALE=_.MAX_AUTO_SCALE=_.DEFAULT_SCALE_VALUE=_.DEFAULT_SCALE_DELTA=_.DEFAULT_SCALE=_.CursorTool=_.AutoPrintRegExp=void 0,_.apiPageLayoutToViewerModes=x,_.apiPageModeToSidebarView=i,_.approximateFraction=ue,_.backtrackBeforeAllVisibleElements=_e,_.binarySearchFirstItem=Q,_.docStyle=void 0,_.getActiveOrFocusedElement=K,_.getPageSizeInches=le,_.getVisibleElements=Ae,_.isPortraitOrientation=W,_.isValidRotation=ee,_.isValidScrollMode=N,_.isValidSpreadMode=H,_.noContextMenuHandler=X,_.normalizeWheelEventDelta=Se,_.normalizeWheelEventDirection=Ee,_.parseQueryString=B,_.removeNullCharacters=G,_.roundToDivide=ae,_.scrollIntoView=I,_.toggleCheckedBtn=o,_.watchScroll=f;const w="auto";_.DEFAULT_SCALE_VALUE=w;const u=1;_.DEFAULT_SCALE=u;const c=1.1;_.DEFAULT_SCALE_DELTA=c;const O=.1;_.MIN_SCALE=O;const k=10;_.MAX_SCALE=k;const T=0;_.UNKNOWN_SCALE=T;const l=1.25;_.MAX_AUTO_SCALE=l;const d=40;_.SCROLLBAR_PADDING=d;const b=5;_.VERTICAL_PADDING=b;const C={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};_.RenderingStates=C;const y={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};_.PresentationModeState=y;const g={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};_.SidebarView=g;const S={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};_.TextLayerMode=S;const M={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};_.ScrollMode=M;const P={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};_.SpreadMode=P;const R={SELECT:0,HAND:1,ZOOM:2};_.CursorTool=R;const s=/\bprint\s*\(/;_.AutoPrintRegExp=s;class h{constructor(){const $=window.devicePixelRatio||1;this.sx=$,this.sy=$}get scaled(){return this.sx!==1||this.sy!==1}}_.OutputScale=h;function I(j,$,se=!1){let Y=j.offsetParent;if(!Y){console.error("offsetParent is not set -- cannot scroll");return}let re=j.offsetTop+j.clientTop,pe=j.offsetLeft+j.clientLeft;for(;Y.clientHeight===Y.scrollHeight&&Y.clientWidth===Y.scrollWidth||se&&(Y.classList.contains("markedContent")||getComputedStyle(Y).overflow==="hidden");)if(re+=Y.offsetTop,pe+=Y.offsetLeft,Y=Y.offsetParent,!Y)return;$&&($.top!==void 0&&(re+=$.top),$.left!==void 0&&(pe+=$.left,Y.scrollLeft=pe)),Y.scrollTop=re}function f(j,$){const se=function(pe){re||(re=window.requestAnimationFrame(function(){re=null;const Ce=j.scrollLeft,Pe=Y.lastX;Ce!==Pe&&(Y.right=Ce>Pe),Y.lastX=Ce;const ke=j.scrollTop,de=Y.lastY;ke!==de&&(Y.down=ke>de),Y.lastY=ke,$(Y)}))},Y={right:!0,down:!0,lastX:j.scrollLeft,lastY:j.scrollTop,_eventHandler:se};let re=null;return j.addEventListener("scroll",se,!0),Y}function B(j){const $=new Map;for(const[se,Y]of new URLSearchParams(j))$.set(se.toLowerCase(),Y);return $}const q=/[\x01-\x1F]/g;function G(j,$=!1){return typeof j!="string"?(console.error("The argument must be a string."),j):($&&(j=j.replaceAll(q," ")),j.replaceAll("\0",""))}function Q(j,$,se=0){let Y=se,re=j.length-1;if(re<0||!$(j[re]))return j.length;if($(j[Y]))return Y;for(;Y<re;){const pe=Y+re>>1,ve=j[pe];$(ve)?re=pe:Y=pe+1}return Y}function ue(j){if(Math.floor(j)===j)return[j,1];const $=1/j,se=8;if($>se)return[1,se];if(Math.floor($)===$)return[1,$];const Y=j>1?$:j;let re=0,pe=1,ve=1,Ce=1;for(;;){const ke=re+ve,de=pe+Ce;if(de>se)break;Y<=ke/de?(ve=ke,Ce=de):(re=ke,pe=de)}let Pe;return Y-re/pe<ve/Ce-Y?Pe=Y===j?[re,pe]:[pe,re]:Pe=Y===j?[ve,Ce]:[Ce,ve],Pe}function ae(j,$){const se=j%$;return se===0?j:Math.round(j-se+$)}function le({view:j,userUnit:$,rotate:se}){const[Y,re,pe,ve]=j,Ce=se%180!==0,Pe=(pe-Y)/72*$,ke=(ve-re)/72*$;return{width:Ce?ke:Pe,height:Ce?Pe:ke}}function _e(j,$,se){if(j<2)return j;let Y=$[j].div,re=Y.offsetTop+Y.clientTop;re>=se&&(Y=$[j-1].div,re=Y.offsetTop+Y.clientTop);for(let pe=j-2;pe>=0&&(Y=$[pe].div,!(Y.offsetTop+Y.clientTop+Y.clientHeight<=re));--pe)j=pe;return j}function Ae({scrollEl:j,views:$,sortByVisibility:se=!1,horizontal:Y=!1,rtl:re=!1}){const pe=j.scrollTop,ve=pe+j.clientHeight,Ce=j.scrollLeft,Pe=Ce+j.clientWidth;function ke(me){const fe=me.div;return fe.offsetTop+fe.clientTop+fe.clientHeight>pe}function de(me){const fe=me.div,ge=fe.offsetLeft+fe.clientLeft,be=ge+fe.clientWidth;return re?ge<Pe:be>Ce}const xe=[],Me=new Set,De=$.length;let V=Q($,Y?de:ke);V>0&&V<De&&!Y&&(V=_e(V,$,pe));let F=Y?Pe:-1;for(let me=V;me<De;me++){const fe=$[me],ge=fe.div,be=ge.offsetLeft+ge.clientLeft,we=ge.offsetTop+ge.clientTop,Re=ge.clientWidth,Te=ge.clientHeight,Le=be+Re,Oe=we+Te;if(F===-1)Oe>=ve&&(F=Oe);else if((Y?be:we)>F)break;if(Oe<=pe||we>=ve||Le<=Ce||be>=Pe)continue;const Ie=Math.max(0,pe-we)+Math.max(0,Oe-ve),Fe=Math.max(0,Ce-be)+Math.max(0,Le-Pe),Be=(Te-Ie)/Te,He=(Re-Fe)/Re,Ne=Be*He*100|0;xe.push({id:fe.id,x:be,y:we,view:fe,percent:Ne,widthPercent:He*100|0}),Me.add(fe.id)}const U=xe[0],ce=xe.at(-1);return se&&xe.sort(function(me,fe){const ge=me.percent-fe.percent;return Math.abs(ge)>.001?-ge:me.id-fe.id}),{first:U,last:ce,views:xe,ids:Me}}function X(j){j.preventDefault()}function Ee(j){let $=Math.hypot(j.deltaX,j.deltaY);const se=Math.atan2(j.deltaY,j.deltaX);return-.25*Math.PI<se&&se<.75*Math.PI&&($=-$),$}function Se(j){const $=j.deltaMode;let se=Ee(j);const Y=30,re=30;return $===WheelEvent.DOM_DELTA_PIXEL?se/=Y*re:$===WheelEvent.DOM_DELTA_LINE&&(se/=re),se}function ee(j){return Number.isInteger(j)&&j%90===0}function N(j){return Number.isInteger(j)&&Object.values(M).includes(j)&&j!==M.UNKNOWN}function H(j){return Number.isInteger(j)&&Object.values(P).includes(j)&&j!==P.UNKNOWN}function W(j){return j.width<=j.height}const ne=new Promise(function(j){window.requestAnimationFrame(j)});_.animationStarted=ne;const J=document.documentElement.style;_.docStyle=J;function he(j,$,se){return Math.min(Math.max(j,$),se)}class Z{constructor($){te(this,E,null);te(this,L,null);te(this,D,0);te(this,z,null);te(this,ie,!0);ye(this,E,$.classList),ye(this,z,$.style)}get percent(){return A(this,D)}set percent($){if(ye(this,D,he($,0,100)),isNaN($)){A(this,E).add("indeterminate");return}A(this,E).remove("indeterminate"),A(this,z).setProperty("--progressBar-percent",`${A(this,D)}%`)}setWidth($){if(!$)return;const Y=$.parentNode.offsetWidth-$.offsetWidth;Y>0&&A(this,z).setProperty("--progressBar-end-offset",`${Y}px`)}setDisableAutoFetch($=5e3){isNaN(A(this,D))||(A(this,L)&&clearTimeout(A(this,L)),this.show(),ye(this,L,setTimeout(()=>{ye(this,L,null),this.hide()},$)))}hide(){!A(this,ie)||(ye(this,ie,!1),A(this,E).add("hidden"))}show(){A(this,ie)||(ye(this,ie,!0),A(this,E).remove("hidden"))}}E=new WeakMap,L=new WeakMap,D=new WeakMap,z=new WeakMap,ie=new WeakMap,_.ProgressBar=Z;function K(){let j=document,$=j.activeElement||j.querySelector(":focus");for(;$!=null&&$.shadowRoot;)j=$.shadowRoot,$=j.activeElement||j.querySelector(":focus");return $}function x(j){let $=M.VERTICAL,se=P.NONE;switch(j){case"SinglePage":$=M.PAGE;break;case"OneColumn":break;case"TwoPageLeft":$=M.PAGE;case"TwoColumnLeft":se=P.ODD;break;case"TwoPageRight":$=M.PAGE;case"TwoColumnRight":se=P.EVEN;break}return{scrollMode:$,spreadMode:se}}function i(j){switch(j){case"UseNone":return g.NONE;case"UseThumbs":return g.THUMBS;case"UseOutlines":return g.OUTLINE;case"UseAttachments":return g.ATTACHMENTS;case"UseOC":return g.LAYERS}return g.NONE}function o(j,$,se=null){j.classList.toggle("toggled",$),j.setAttribute("aria-checked",$),se==null||se.classList.toggle("hidden",!$)}},(v,_,w)=>{var T,l,d,Yt;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationLayerBuilder=void 0;var u=w(4),c=w(5),O=w(2);class k{constructor({pageDiv:y,pdfPage:g,linkService:S,downloadManager:M,annotationStorage:P=null,imageResourcesPath:R="",renderForms:s=!0,l10n:h=c.NullL10n,enableScripting:I=!1,hasJSActionsPromise:f=null,fieldObjectsPromise:B=null,annotationCanvasMap:q=null,accessibilityManager:G=null}){te(this,d);te(this,T,0);te(this,l,null);this.pageDiv=y,this.pdfPage=g,this.linkService=S,this.downloadManager=M,this.imageResourcesPath=R,this.renderForms=s,this.l10n=h,this.annotationStorage=P,this.enableScripting=I,this._hasJSActionsPromise=f||Promise.resolve(!1),this._fieldObjectsPromise=B||Promise.resolve(null),this._annotationCanvasMap=q,this._accessibilityManager=G,this.div=null,this._cancelled=!1,this._eventBus=S.eventBus}async render(y,g="display"){var R;if(this.div){if(this._cancelled||A(this,T)===0)return;u.AnnotationLayer.update({viewport:y.clone({dontFlip:!0}),div:this.div,annotationCanvasMap:this._annotationCanvasMap});return}const[S,M,P]=await Promise.all([this.pdfPage.getAnnotations({intent:g}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(!this._cancelled){if(ye(this,T,S.length),this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),A(this,T)===0){this.hide();return}u.AnnotationLayer.render({viewport:y.clone({dontFlip:!0}),div:this.div,annotations:S,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:M,fieldObjects:P,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}),this.l10n.translate(this.div),this.linkService.isInPresentationMode&&oe(this,d,Yt).call(this,O.PresentationModeState.FULLSCREEN),A(this,l)||(ye(this,l,s=>{oe(this,d,Yt).call(this,s.state)}),(R=this._eventBus)==null||R._on("presentationmodechanged",A(this,l)))}}cancel(){var y;this._cancelled=!0,A(this,l)&&((y=this._eventBus)==null||y._off("presentationmodechanged",A(this,l)),ye(this,l,null))}hide(){!this.div||(this.div.hidden=!0)}}T=new WeakMap,l=new WeakMap,d=new WeakSet,Yt=function(y){if(!this.div)return;let g=!1;switch(y){case O.PresentationModeState.FULLSCREEN:g=!0;break;case O.PresentationModeState.NORMAL:break;default:return}for(const S of this.div.childNodes)S.hasAttribute("data-internal-link")||(S.inert=g)},_.AnnotationLayerBuilder=k},v=>{let _;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?_=window["pdfjs-dist/build/pdf"]:_=requirePdf(),v.exports=_},(v,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NullL10n=void 0,_.fixupLangCode=O,_.getL10nFallback=u;const w={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};w.print_progress_percent="{{progress}}%";function u(l,d){switch(l){case"find_match_count":l=`find_match_count[${d.total===1?"one":"other"}]`;break;case"find_match_count_limit":l=`find_match_count_limit[${d.limit===1?"one":"other"}]`;break}return w[l]||""}const c={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function O(l){return c[l==null?void 0:l.toLowerCase()]||l}function k(l,d){return d?l.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(b,C)=>C in d?d[C]:"{{"+C+"}}"):l}const T={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(l,d=null,b=u(l,d)){return k(b,d)},async translate(l){}};_.NullL10n=T},(v,_,w)=>{var k;Object.defineProperty(_,"__esModule",{value:!0}),_.DownloadManager=void 0;var u=w(4);function c(T,l){const d=document.createElement("a");if(!d.click)throw new Error('DownloadManager: "a.click()" is not supported.');d.href=T,d.target="_parent","download"in d&&(d.download=l),(document.body||document.documentElement).append(d),d.click(),d.remove()}class O{constructor(){te(this,k,new WeakMap)}downloadUrl(l,d,b){if(!(0,u.createValidAbsoluteUrl)(l,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${l}`);return}c(l+"#pdfjs.action=download",d)}downloadData(l,d,b){const C=URL.createObjectURL(new Blob([l],{type:b}));c(C,d)}openOrDownloadData(l,d,b){const y=(0,u.isPdfFile)(b)?"application/pdf":"";return this.downloadData(d,b,y),!1}download(l,d,b,C){const y=URL.createObjectURL(l);c(y,b)}}k=new WeakMap,_.DownloadManager=O},(v,_)=>{var k;Object.defineProperty(_,"__esModule",{value:!0}),_.WaitOnType=_.EventBus=_.AutomationEventBus=void 0,_.waitOnEventOrTimeout=u;const w={EVENT:"event",TIMEOUT:"timeout"};_.WaitOnType=w;function u({target:T,name:l,delay:d=0}){return new Promise(function(b,C){if(typeof T!="object"||!(l&&typeof l=="string")||!(Number.isInteger(d)&&d>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function y(P){T instanceof c?T._off(l,g):T.removeEventListener(l,g),M&&clearTimeout(M),b(P)}const g=y.bind(null,w.EVENT);T instanceof c?T._on(l,g):T.addEventListener(l,g);const S=y.bind(null,w.TIMEOUT),M=setTimeout(S,d)})}class c{constructor(){te(this,k,Object.create(null))}on(l,d,b=null){this._on(l,d,{external:!0,once:b==null?void 0:b.once})}off(l,d,b=null){this._off(l,d,{external:!0,once:b==null?void 0:b.once})}dispatch(l,d){const b=A(this,k)[l];if(!b||b.length===0)return;let C;for(const{listener:y,external:g,once:S}of b.slice(0)){if(S&&this._off(l,y),g){(C||(C=[])).push(y);continue}y(d)}if(C){for(const y of C)y(d);C=null}}_on(l,d,b=null){var y;((y=A(this,k))[l]||(y[l]=[])).push({listener:d,external:(b==null?void 0:b.external)===!0,once:(b==null?void 0:b.once)===!0})}_off(l,d,b=null){const C=A(this,k)[l];if(!!C){for(let y=0,g=C.length;y<g;y++)if(C[y].listener===d){C.splice(y,1);return}}}}k=new WeakMap,_.EventBus=c;class O extends c{dispatch(l,d){throw new Error("Not implemented: AutomationEventBus.dispatch")}}_.AutomationEventBus=O},(v,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericL10n=void 0,w(9);var u=w(5);const c=document.webL10n;class O{constructor(T){this._lang=T,this._ready=new Promise((l,d)=>{c.setLanguage((0,u.fixupLangCode)(T),()=>{l(c)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(T,l=null,d=(0,u.getL10nFallback)(T,l)){return(await this._ready).get(T,l,d)}async translate(T){return(await this._ready).translate(T)}}_.GenericL10n=O},()=>{document.webL10n=function(v,_,w){var u={},c="",O="textContent",k="",T={},l="loading",d=!0;function b(){return _.querySelectorAll('link[type="application/l10n"]')}function C(){var Q=_.querySelector('script[type="application/l10n"]');return Q?JSON.parse(Q.innerHTML):null}function y(Q){return Q?Q.querySelectorAll("*[data-l10n-id]"):[]}function g(Q){if(!Q)return{};var ue=Q.getAttribute("data-l10n-id"),ae=Q.getAttribute("data-l10n-args"),le={};if(ae)try{le=JSON.parse(ae)}catch{console.warn("could not parse arguments for #"+ue)}return{id:ue,args:le}}function S(Q,ue,ae){ue=ue||function(Ae){},ae=ae||function(){};var le=new XMLHttpRequest;le.open("GET",Q,d),le.overrideMimeType&&le.overrideMimeType("text/plain; charset=utf-8"),le.onreadystatechange=function(){le.readyState==4&&(le.status==200||le.status===0?ue(le.responseText):ae())},le.onerror=ae,le.ontimeout=ae;try{le.send(null)}catch{ae()}}function M(Q,ue,ae,le){var _e=Q.replace(/[^\/]*$/,"")||"./";function Ae(Ee){return Ee.lastIndexOf("\\")<0?Ee:Ee.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function X(Ee,Se){var ee={},N=/^\s*|\s*$/,H=/^\s*#|^\s*$/,W=/^\s*\[(.*)\]\s*$/,ne=/^\s*@import\s+url\((.*)\)\s*$/i,J=/^([^=\s]*)\s*=\s*(.+)$/;function he(K,x,i){var o=K.replace(N,"").split(/[\r\n]+/),E="*",L=ue.split("-",1)[0],D=!1,z="";function ie(){for(;;){if(!o.length){i();return}var j=o.shift();if(!H.test(j)){if(x){if(z=W.exec(j),z){E=z[1].toLowerCase(),D=E!=="*"&&E!==ue&&E!==L;continue}else if(D)continue;if(z=ne.exec(j),z){Z(_e+z[1],ie);return}}var $=j.match(J);$&&$.length==3&&(ee[$[1]]=Ae($[2]))}}}ie()}function Z(K,x){S(K,function(i){he(i,!1,x)},function(){console.warn(K+" not found."),x()})}he(Ee,!0,function(){Se(ee)})}S(Q,function(Ee){c+=Ee,X(Ee,function(Se){for(var ee in Se){var N,H,W=ee.lastIndexOf(".");W>0?(N=ee.substring(0,W),H=ee.substring(W+1)):(N=ee,H=O),u[N]||(u[N]={}),u[N][H]=Se[ee]}ae&&ae()})},le)}function P(Q,ue){Q&&(Q=Q.toLowerCase()),ue=ue||function(){},R(),k=Q;var ae=b(),le=ae.length;if(le===0){var _e=C();if(_e&&_e.locales&&_e.default_locale){if(console.log("using the embedded JSON directory, early way out"),u=_e.locales[Q],!u){var Ae=_e.default_locale.toLowerCase();for(var X in _e.locales)if(X=X.toLowerCase(),X===Q){u=_e.locales[Q];break}else X===Ae&&(u=_e.locales[Ae])}ue()}else console.log("no resource to load, early way out");l="complete";return}var Ee=null,Se=0;Ee=function(){Se++,Se>=le&&(ue(),l="complete")};function ee(W){var ne=W.href;this.load=function(J,he){M(ne,J,he,function(){console.warn(ne+" not found."),console.warn('"'+J+'" resource not found'),k="",he()})}}for(var N=0;N<le;N++){var H=new ee(ae[N]);H.load(Q,Ee)}}function R(){u={},c="",k=""}function s(Q){var ue={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function ae(X,Ee){return Ee.indexOf(X)!==-1}function le(X,Ee,Se){return Ee<=X&&X<=Se}var _e={0:function(X){return"other"},1:function(X){return le(X%100,3,10)?"few":X===0?"zero":le(X%100,11,99)?"many":X==2?"two":X==1?"one":"other"},2:function(X){return X!==0&&X%10===0?"many":X==2?"two":X==1?"one":"other"},3:function(X){return X==1?"one":"other"},4:function(X){return le(X,0,1)?"one":"other"},5:function(X){return le(X,0,2)&&X!=2?"one":"other"},6:function(X){return X===0?"zero":X%10==1&&X%100!=11?"one":"other"},7:function(X){return X==2?"two":X==1?"one":"other"},8:function(X){return le(X,3,6)?"few":le(X,7,10)?"many":X==2?"two":X==1?"one":"other"},9:function(X){return X===0||X!=1&&le(X%100,1,19)?"few":X==1?"one":"other"},10:function(X){return le(X%10,2,9)&&!le(X%100,11,19)?"few":X%10==1&&!le(X%100,11,19)?"one":"other"},11:function(X){return le(X%10,2,4)&&!le(X%100,12,14)?"few":X%10===0||le(X%10,5,9)||le(X%100,11,14)?"many":X%10==1&&X%100!=11?"one":"other"},12:function(X){return le(X,2,4)?"few":X==1?"one":"other"},13:function(X){return le(X%10,2,4)&&!le(X%100,12,14)?"few":X!=1&&le(X%10,0,1)||le(X%10,5,9)||le(X%100,12,14)?"many":X==1?"one":"other"},14:function(X){return le(X%100,3,4)?"few":X%100==2?"two":X%100==1?"one":"other"},15:function(X){return X===0||le(X%100,2,10)?"few":le(X%100,11,19)?"many":X==1?"one":"other"},16:function(X){return X%10==1&&X!=11?"one":"other"},17:function(X){return X==3?"few":X===0?"zero":X==6?"many":X==2?"two":X==1?"one":"other"},18:function(X){return X===0?"zero":le(X,0,2)&&X!==0&&X!=2?"one":"other"},19:function(X){return le(X,2,10)?"few":le(X,0,1)?"one":"other"},20:function(X){return(le(X%10,3,4)||X%10==9)&&!(le(X%100,10,19)||le(X%100,70,79)||le(X%100,90,99))?"few":X%1e6===0&&X!==0?"many":X%10==2&&!ae(X%100,[12,72,92])?"two":X%10==1&&!ae(X%100,[11,71,91])?"one":"other"},21:function(X){return X===0?"zero":X==1?"one":"other"},22:function(X){return le(X,0,1)||le(X,11,99)?"one":"other"},23:function(X){return le(X%10,1,2)||X%20===0?"one":"other"},24:function(X){return le(X,3,10)||le(X,13,19)?"few":ae(X,[2,12])?"two":ae(X,[1,11])?"one":"other"}},Ae=ue[Q.replace(/-.*$/,"")];return Ae in _e?_e[Ae]:(console.warn("plural form unknown for ["+Q+"]"),function(){return"other"})}T.plural=function(Q,ue,ae,le){var _e=parseFloat(ue);if(isNaN(_e)||le!=O)return Q;T._pluralRules||(T._pluralRules=s(k));var Ae="["+T._pluralRules(_e)+"]";return _e===0&&ae+"[zero]"in u?Q=u[ae+"[zero]"][le]:_e==1&&ae+"[one]"in u?Q=u[ae+"[one]"][le]:_e==2&&ae+"[two]"in u?Q=u[ae+"[two]"][le]:ae+Ae in u?Q=u[ae+Ae][le]:ae+"[other]"in u&&(Q=u[ae+"[other]"][le]),Q};function h(Q,ue,ae){var le=u[Q];if(!le){if(console.warn("#"+Q+" is undefined."),!ae)return null;le=ae}var _e={};for(var Ae in le){var X=le[Ae];X=I(X,ue,Q,Ae),X=f(X,ue,Q),_e[Ae]=X}return _e}function I(Q,ue,ae,le){var _e=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,Ae=_e.exec(Q);if(!Ae||!Ae.length)return Q;var X=Ae[1],Ee=Ae[2],Se;if(ue&&Ee in ue?Se=ue[Ee]:Ee in u&&(Se=u[Ee]),X in T){var ee=T[X];Q=ee(Q,Se,ae,le)}return Q}function f(Q,ue,ae){var le=/\{\{\s*(.+?)\s*\}\}/g;return Q.replace(le,function(_e,Ae){return ue&&Ae in ue?ue[Ae]:Ae in u?u[Ae]:(console.log("argument {{"+Ae+"}} for #"+ae+" is undefined."),_e)})}function B(Q){var ue=g(Q);if(!!ue.id){var ae=h(ue.id,ue.args);if(!ae){console.warn("#"+ue.id+" is undefined.");return}if(ae[O]){if(q(Q)===0)Q[O]=ae[O];else{for(var le=Q.childNodes,_e=!1,Ae=0,X=le.length;Ae<X;Ae++)le[Ae].nodeType===3&&/\S/.test(le[Ae].nodeValue)&&(_e?le[Ae].nodeValue="":(le[Ae].nodeValue=ae[O],_e=!0));if(!_e){var Ee=_.createTextNode(ae[O]);Q.prepend(Ee)}}delete ae[O]}for(var Se in ae)Q[Se]=ae[Se]}}function q(Q){if(Q.children)return Q.children.length;if(typeof Q.childElementCount<"u")return Q.childElementCount;for(var ue=0,ae=0;ae<Q.childNodes.length;ae++)ue+=Q.nodeType===1?1:0;return ue}function G(Q){Q=Q||_.documentElement;for(var ue=y(Q),ae=ue.length,le=0;le<ae;le++)B(ue[le]);B(Q)}return{get:function(Q,ue,ae){var le=Q.lastIndexOf("."),_e=O;le>0&&(_e=Q.substring(le+1),Q=Q.substring(0,le));var Ae;ae&&(Ae={},Ae[_e]=ae);var X=h(Q,ue,Ae);return X&&_e in X?X[_e]:"{{"+Q+"}}"},getData:function(){return u},getText:function(){return c},getLanguage:function(){return k},setLanguage:function(Q,ue){P(Q,function(){ue&&ue()})},getDirection:function(){var Q=["ar","he","fa","ps","ur"],ue=k.split("-",1)[0];return Q.indexOf(ue)>=0?"rtl":"ltr"},translate:G,getReadyState:function(){return l},ready:function(Q){if(Q)l=="complete"||l=="interactive"?v.setTimeout(function(){Q()}):_.addEventListener&&_.addEventListener("localized",function ue(){_.removeEventListener("localized",ue),Q()});else return}}}(window,document)},(v,_,w)=>{var ue,ae,le,_e,zn,X,Jt,Se,Zt,N,qn,W,Gn,J,Xn,Z,Qt,x,Kn,o,Yn,L,Et,z,dt,j,lt,se,Jn,re,en,ve,tn,Pe,Pt,de,Zn,Me,nn,V,sn,U,ft;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFindController=_.FindState=void 0;var u=w(2),c=w(11),O=w(4);const k={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};_.FindState=k;const T=250,l=-50,d=-400,b={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"},C=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let y;const g=/\p{M}+/gu,S=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,M=/([^\p{M}])\p{M}*$/u,P=/^\p{M}*([^\p{M}])/u,R=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,s=new Map,h="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",I=new Map;let f=null,B=null;function q(me){const fe=[];let ge;for(;(ge=R.exec(me))!==null;){let{index:Ne}=ge;for(const je of ge[0]){let Ve=s.get(je);Ve||(Ve=je.normalize("NFD").length,s.set(je,Ve)),fe.push([Ve,Ne++])}}let be;if(fe.length===0&&f)be=f;else if(fe.length>0&&B)be=B;else{const Ne=Object.keys(b).join(""),je=(0,c.getNormalizeWithNFKC)(),We=`([${Ne}])|([${je}])|((?:\u3099|\u309A)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30FF])\\n)|(\\n)`;fe.length===0?be=f=new RegExp(We+"|(\\u0000)","gum"):be=B=new RegExp(We+`|(${h})`,"gum")}const we=[];for(;(ge=g.exec(me))!==null;)we.push([ge[0].length,ge.index]);let Re=me.normalize("NFD");const Te=[[0,0]];let Le=0,Oe=0,Ie=0,Fe=0,Be=0,He=!1;return Re=Re.replace(be,(Ne,je,Ve,Ue,We,Ge,Je,it,gt,qe)=>{var _n,bn,vn;if(qe-=Fe,je){const ze=b[je],Xe=ze.length;for(let Ke=1;Ke<Xe;Ke++)Te.push([qe-Ie+Ke,Ie-Ke]);return Ie-=Xe-1,ze}if(Ve){let ze=I.get(Ve);ze||(ze=Ve.normalize("NFKC"),I.set(Ve,ze));const Xe=ze.length;for(let Ke=1;Ke<Xe;Ke++)Te.push([qe-Ie+Ke,Ie-Ke]);return Ie-=Xe-1,ze}if(Ue)return He=!0,qe+Be===((_n=we[Le])==null?void 0:_n[1])?++Le:(Te.push([qe-1-Ie+1,Ie-1]),Ie-=1,Fe+=1),Te.push([qe-Ie+1,Ie]),Fe+=1,Be+=1,Ue.charAt(0);if(We){const ze=We.endsWith(`
`),Xe=ze?We.length-2:We.length;He=!0;let Ke=Xe;qe+Be===((bn=we[Le])==null?void 0:bn[1])&&(Ke-=we[Le][0],++Le);for(let mt=1;mt<=Ke;mt++)Te.push([qe-1-Ie+mt,Ie-mt]);return Ie-=Ke,Fe+=Ke,ze?(qe+=Xe-1,Te.push([qe-Ie+1,1+Ie]),Ie+=1,Fe+=1,Be+=1,We.slice(0,Xe)):We}if(Ge){const ze=Ge.length-2;return Te.push([qe-Ie+ze,1+Ie]),Ie+=1,Fe+=1,Be+=1,Ge.slice(0,-2)}if(Je){const ze=Je.length-1;return Te.push([qe-Ie+ze,Ie]),Fe+=1,Be+=1,Je.slice(0,-1)}if(it)return Te.push([qe-Ie+1,Ie-1]),Ie-=1,Fe+=1,Be+=1," ";if(qe+Be===((vn=fe[Oe])==null?void 0:vn[1])){const ze=fe[Oe][0]-1;++Oe;for(let Xe=1;Xe<=ze;Xe++)Te.push([qe-(Ie-Xe),Ie-Xe]);Ie-=ze,Fe+=ze}return gt}),Te.push([Re.length,Ie]),[Re,Te,He]}function G(me,fe,ge){if(!me)return[fe,ge];const be=fe,we=fe+ge-1;let Re=(0,u.binarySearchFirstItem)(me,Fe=>Fe[0]>=be);me[Re][0]>be&&--Re;let Te=(0,u.binarySearchFirstItem)(me,Fe=>Fe[0]>=we,Re);me[Te][0]>we&&--Te;const Le=be+me[Re][1],Ie=we+me[Te][1]+1-Le;return[Le,Ie]}class Q{constructor({linkService:fe,eventBus:ge,updateMatchesCountOnProgress:be=!0}){te(this,_e);te(this,X);te(this,Se);te(this,N);te(this,W);te(this,J);te(this,Z);te(this,x);te(this,o);te(this,L);te(this,z);te(this,j);te(this,se);te(this,re);te(this,ve);te(this,Pe);te(this,de);te(this,Me);te(this,V);te(this,U);te(this,ue,null);te(this,ae,!0);te(this,le,0);this._linkService=fe,this._eventBus=ge,ye(this,ae,be),oe(this,X,Jt).call(this),ge._on("find",oe(this,_e,zn).bind(this)),ge._on("findbarclose",oe(this,de,Zn).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return A(this,ue)}setDocument(fe){this._pdfDocument&&oe(this,X,Jt).call(this),fe&&(this._pdfDocument=fe,this._firstPageCapability.resolve())}scrollMatchIntoView({element:fe=null,selectedLeft:ge=0,pageIndex:be=-1,matchIndex:we=-1}){if(!this._scrollMatches||!fe)return;if(we===-1||we!==this._selected.matchIdx)return;if(be===-1||be!==this._selected.pageIdx)return;this._scrollMatches=!1;const Re={top:l,left:ge+d};(0,u.scrollIntoView)(fe,Re,!0)}}ue=new WeakMap,ae=new WeakMap,le=new WeakMap,_e=new WeakSet,zn=function(fe){if(!fe)return;fe.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof fe.query=="string"&&(fe.query=fe.query.match(/\S+/g)));const ge=this._pdfDocument,{type:be}=fe;(A(this,ue)===null||oe(this,N,qn).call(this,fe))&&(this._dirtyMatch=!0),ye(this,ue,fe),be!=="highlightallchange"&&oe(this,U,ft).call(this,k.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ge&&this._pdfDocument!==ge)return;oe(this,o,Yn).call(this);const we=!this._highlightMatches,Re=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),be?this._dirtyMatch?oe(this,j,lt).call(this):be==="again"?(oe(this,j,lt).call(this),we&&A(this,ue).highlightAll&&oe(this,z,dt).call(this)):be==="highlightallchange"?(Re?oe(this,j,lt).call(this):this._highlightMatches=!0,oe(this,z,dt).call(this)):oe(this,j,lt).call(this):this._findTimeout=setTimeout(()=>{oe(this,j,lt).call(this),this._findTimeout=null},T)})},X=new WeakSet,Jt=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],ye(this,le,0),ye(this,ue,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new O.PromiseCapability},Se=new WeakSet,Zt=function(){const{query:fe}=A(this,ue);return typeof fe=="string"?(fe!==this._rawQuery&&(this._rawQuery=fe,[this._normalizedQuery]=q(fe)),this._normalizedQuery):(fe||[]).filter(ge=>!!ge).map(ge=>q(ge)[0])},N=new WeakSet,qn=function(fe){const ge=fe.query,be=A(this,ue).query,we=typeof ge;if(we!==typeof be)return!0;if(we==="string"){if(ge!==be)return!0}else if(JSON.stringify(ge)!==JSON.stringify(be))return!0;switch(fe.type){case"again":const Te=this._selected.pageIdx+1,Le=this._linkService;return Te>=1&&Te<=Le.pagesCount&&Te!==Le.page&&!Le.isPageVisible(Te);case"highlightallchange":return!1}return!0},W=new WeakSet,Gn=function(fe,ge,be){let we=fe.slice(0,ge).match(M);if(we){const Re=fe.charCodeAt(ge),Te=we[1].charCodeAt(0);if((0,c.getCharacterType)(Re)===(0,c.getCharacterType)(Te))return!1}if(we=fe.slice(ge+be).match(P),we){const Re=fe.charCodeAt(ge+be-1),Te=we[1].charCodeAt(0);if((0,c.getCharacterType)(Re)===(0,c.getCharacterType)(Te))return!1}return!0},J=new WeakSet,Xn=function(fe,ge,be,we){const Re=this._pageMatches[be]=[],Te=this._pageMatchesLength[be]=[];if(!fe)return;const Le=this._pageDiffs[be];let Oe;for(;(Oe=fe.exec(we))!==null;){if(ge&&!oe(this,W,Gn).call(this,we,Oe.index,Oe[0].length))continue;const[Ie,Fe]=G(Le,Oe.index,Oe[0].length);Fe&&(Re.push(Ie),Te.push(Fe))}},Z=new WeakSet,Qt=function(fe,ge){const{matchDiacritics:be}=A(this,ue);let we=!1;fe=fe.replaceAll(S,(Te,Le,Oe,Ie,Fe,Be)=>Le?`[ ]*\\${Le}[ ]*`:Oe?`[ ]*${Oe}[ ]*`:Ie?"[ ]+":be?Fe||Be:Fe?C.has(Fe.charCodeAt(0))?Fe:"":ge?(we=!0,`${Be}\\p{M}*`):Be);const Re="[ ]*";return fe.endsWith(Re)&&(fe=fe.slice(0,fe.length-Re.length)),be&&ge&&(y||(y=String.fromCharCode(...C)),we=!0,fe=`${fe}(?=[${y}]|[^\\p{M}]|$)`),[we,fe]},x=new WeakSet,Kn=function(fe){let ge=A(this,Se,Zt);if(ge.length===0)return;const{caseSensitive:be,entireWord:we}=A(this,ue),Re=this._pageContents[fe],Te=this._hasDiacritics[fe];let Le=!1;typeof ge=="string"?[Le,ge]=oe(this,Z,Qt).call(this,ge,Te):ge=ge.sort().reverse().map(Fe=>{const[Be,He]=oe(this,Z,Qt).call(this,Fe,Te);return Le||(Le=Be),`(${He})`}).join("|");const Oe=`g${Le?"u":""}${be?"":"i"}`;ge=ge?new RegExp(ge,Oe):null,oe(this,J,Xn).call(this,ge,we,fe,Re),A(this,ue).highlightAll&&oe(this,L,Et).call(this,fe),this._resumePageIdx===fe&&(this._resumePageIdx=null,oe(this,re,en).call(this));const Ie=this._pageMatches[fe].length;this._matchesCountTotal+=Ie,A(this,ae)?Ie>0&&oe(this,V,sn).call(this):++ct(this,le)._===this._linkService.pagesCount&&oe(this,V,sn).call(this)},o=new WeakSet,Yn=function(){if(this._extractTextPromises.length>0)return;let fe=Promise.resolve();const ge={disableNormalization:!0};for(let be=0,we=this._linkService.pagesCount;be<we;be++){const Re=new O.PromiseCapability;this._extractTextPromises[be]=Re.promise,fe=fe.then(()=>this._pdfDocument.getPage(be+1).then(Te=>Te.getTextContent(ge)).then(Te=>{const Le=[];for(const Oe of Te.items)Le.push(Oe.str),Oe.hasEOL&&Le.push(`
`);[this._pageContents[be],this._pageDiffs[be],this._hasDiacritics[be]]=q(Le.join("")),Re.resolve()},Te=>{console.error(`Unable to get text content for page ${be+1}`,Te),this._pageContents[be]="",this._pageDiffs[be]=null,this._hasDiacritics[be]=!1,Re.resolve()}))}},L=new WeakSet,Et=function(fe){this._scrollMatches&&this._selected.pageIdx===fe&&(this._linkService.page=fe+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:fe})},z=new WeakSet,dt=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},j=new WeakSet,lt=function(){const fe=A(this,ue).findPrevious,ge=this._linkService.page-1,be=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ge,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,ye(this,le,0),this._matchesCountTotal=0,oe(this,z,dt).call(this);for(let Te=0;Te<be;Te++)this._pendingFindMatches.has(Te)||(this._pendingFindMatches.add(Te),this._extractTextPromises[Te].then(()=>{this._pendingFindMatches.delete(Te),oe(this,x,Kn).call(this,Te)}))}if(A(this,Se,Zt).length===0){oe(this,U,ft).call(this,k.FOUND);return}if(this._resumePageIdx)return;const Re=this._offset;if(this._pagesToSearch=be,Re.matchIdx!==null){const Te=this._pageMatches[Re.pageIdx].length;if(!fe&&Re.matchIdx+1<Te||fe&&Re.matchIdx>0){Re.matchIdx=fe?Re.matchIdx-1:Re.matchIdx+1,oe(this,Pe,Pt).call(this,!0);return}oe(this,ve,tn).call(this,fe)}oe(this,re,en).call(this)},se=new WeakSet,Jn=function(fe){const ge=this._offset,be=fe.length,we=A(this,ue).findPrevious;return be?(ge.matchIdx=we?be-1:0,oe(this,Pe,Pt).call(this,!0),!0):(oe(this,ve,tn).call(this,we),ge.wrapped&&(ge.matchIdx=null,this._pagesToSearch<0)?(oe(this,Pe,Pt).call(this,!1),!0):!1)},re=new WeakSet,en=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let fe=null;do{const ge=this._offset.pageIdx;if(fe=this._pageMatches[ge],!fe){this._resumePageIdx=ge;break}}while(!oe(this,se,Jn).call(this,fe))},ve=new WeakSet,tn=function(fe){const ge=this._offset,be=this._linkService.pagesCount;ge.pageIdx=fe?ge.pageIdx-1:ge.pageIdx+1,ge.matchIdx=null,this._pagesToSearch--,(ge.pageIdx>=be||ge.pageIdx<0)&&(ge.pageIdx=fe?be-1:0,ge.wrapped=!0)},Pe=new WeakSet,Pt=function(fe=!1){let ge=k.NOT_FOUND;const be=this._offset.wrapped;if(this._offset.wrapped=!1,fe){const we=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ge=be?k.WRAPPED:k.FOUND,we!==-1&&we!==this._selected.pageIdx&&oe(this,L,Et).call(this,we)}oe(this,U,ft).call(this,ge,A(this,ue).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,oe(this,L,Et).call(this,this._selected.pageIdx))},de=new WeakSet,Zn=function(fe){const ge=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ge&&this._pdfDocument!==ge||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),oe(this,U,ft).call(this,k.FOUND),this._highlightMatches=!1,oe(this,z,dt).call(this))})},Me=new WeakSet,nn=function(){var Re;const{pageIdx:fe,matchIdx:ge}=this._selected;let be=0,we=this._matchesCountTotal;if(ge!==-1){for(let Te=0;Te<fe;Te++)be+=((Re=this._pageMatches[Te])==null?void 0:Re.length)||0;be+=ge+1}return(be<1||be>we)&&(be=we=0),{current:be,total:we}},V=new WeakSet,sn=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:oe(this,Me,nn).call(this)})},U=new WeakSet,ft=function(fe,ge=!1){var be,we;!A(this,ae)&&(A(this,le)!==this._linkService.pagesCount||fe===k.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:fe,previous:ge,matchesCount:oe(this,Me,nn).call(this),rawQuery:(we=(be=A(this,ue))==null?void 0:be.query)!=null?we:null})},_.PDFFindController=Q},(v,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CharacterType=void 0,_.getCharacterType=g,_.getNormalizeWithNFKC=M;const w={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};_.CharacterType=w;function u(P){return P<11904}function c(P){return(P&65408)===0}function O(P){return P>=97&&P<=122||P>=65&&P<=90}function k(P){return P>=48&&P<=57}function T(P){return P===32||P===9||P===13||P===10}function l(P){return P>=13312&&P<=40959||P>=63744&&P<=64255}function d(P){return P>=12448&&P<=12543}function b(P){return P>=12352&&P<=12447}function C(P){return P>=65376&&P<=65439}function y(P){return(P&65408)===3584}function g(P){return u(P)?c(P)?T(P)?w.SPACE:O(P)||k(P)||P===95?w.ALPHA_LETTER:w.PUNCT:y(P)?w.THAI_LETTER:P===160?w.SPACE:w.ALPHA_LETTER:l(P)?w.HAN_LETTER:d(P)?w.KATAKANA_LETTER:b(P)?w.HIRAGANA_LETTER:C(P)?w.HALFWIDTH_KATAKANA_LETTER:w.ALPHA_LETTER}let S;function M(){return S||(S="\xA0\xA8\xAA\xAF\xB2-\xB5\xB8-\xBA\xBC-\xBE\u0132-\u0133\u013F-\u0140\u0149\u017F\u01C4-\u01CC\u01F1-\u01F3\u02B0-\u02B8\u02D8-\u02DD\u02E0-\u02E4\u0374\u037A\u037E\u0384-\u0385\u0387\u03D0-\u03D6\u03F0-\u03F2\u03F4-\u03F5\u03F9\u0587\u0675-\u0678\u0958-\u095F\u09DC-\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B5C-\u0B5D\u0E33\u0EB3\u0EDC-\u0EDD\u0F0C\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u10FC\u1D2C-\u1D2E\u1D30-\u1D3A\u1D3C-\u1D4D\u1D4F-\u1D6A\u1D78\u1D9B-\u1DBF\u1E9A-\u1E9B\u1F71\u1F73\u1F75\u1F77\u1F79\u1F7B\u1F7D\u1FBB\u1FBD-\u1FC1\u1FC9\u1FCB\u1FCD-\u1FCF\u1FD3\u1FDB\u1FDD-\u1FDF\u1FE3\u1FEB\u1FED-\u1FEF\u1FF9\u1FFB\u1FFD-\u1FFE\u2000-\u200A\u2011\u2017\u2024-\u2026\u202F\u2033-\u2034\u2036-\u2037\u203C\u203E\u2047-\u2049\u2057\u205F\u2070-\u2071\u2074-\u208E\u2090-\u209C\u20A8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211D\u2120-\u2122\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213B-\u2140\u2145-\u2149\u2150-\u217F\u2189\u222C-\u222D\u222F-\u2230\u2329-\u232A\u2460-\u24EA\u2A0C\u2A74-\u2A76\u2ADC\u2C7C-\u2C7D\u2D6F\u2E9F\u2EF3\u2F00-\u2FD5\u3000\u3036\u3038-\u303A\u309B-\u309C\u309F\u30FF\u3131-\u318E\u3192-\u319F\u3200-\u321E\u3220-\u3247\u3250-\u327E\u3280-\u33FF\uA69C-\uA69D\uA770\uA7F2-\uA7F4\uA7F8-\uA7F9\uAB5C-\uAB5F\uAB69\uF900-\uFA0D\uFA10\uFA12\uFA15-\uFA1E\uFA20\uFA22\uFA25-\uFA26\uFA2A-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE10-\uFE19\uFE30-\uFE44\uFE47-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE72\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6"),S}},(v,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFHistory=void 0,_.isDestArraysEqual=C,_.isDestHashesEqual=b;var u=w(2),c=w(7);const O=1e3,k=50,T=1e3;function l(){return document.location.hash}class d{constructor({linkService:g,eventBus:S}){this.linkService=g,this.eventBus=S,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",M=>{this._isPagesLoaded=!!M.pagesCount},{once:!0})})}initialize({fingerprint:g,resetHistory:S=!1,updateUrl:M=!1}){if(!g||typeof g!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const P=this._fingerprint!==""&&this._fingerprint!==g;this._fingerprint=g,this._updateUrl=M===!0,this._initialized=!0,this._bindEvents();const R=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=l(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(R,!0)||S){const{hash:h,page:I,rotation:f}=this._parseCurrentHash(!0);if(!h||P||S){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:h,page:I,rotation:f},!0);return}const s=R.destination;this._updateInternalState(s,R.uid,!0),s.rotation!==void 0&&(this._initialRotation=s.rotation),s.dest?(this._initialBookmark=JSON.stringify(s.dest),this._destination.page=null):s.hash?this._initialBookmark=s.hash:s.page&&(this._initialBookmark=`page=${s.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:g=null,explicitDest:S,pageNumber:M}){if(!this._initialized)return;if(g&&typeof g!="string"){console.error(`PDFHistory.push: "${g}" is not a valid namedDest parameter.`);return}else if(Array.isArray(S)){if(!this._isValidPage(M)&&(M!==null||this._destination)){console.error(`PDFHistory.push: "${M}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${S}" is not a valid explicitDest parameter.`);return}const P=g||JSON.stringify(S);if(!P)return;let R=!1;if(this._destination&&(b(this._destination.hash,P)||C(this._destination.dest,S))){if(this._destination.page)return;R=!0}this._popStateInProgress&&!R||(this._pushOrReplaceState({dest:S,hash:P,page:M,rotation:this.linkService.rotation},R),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(g){var S;if(!!this._initialized){if(!this._isValidPage(g)){console.error(`PDFHistory.pushPage: "${g}" is not a valid page number.`);return}((S=this._destination)==null?void 0:S.page)!==g&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${g}`,page:g,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const g=window.history.state;this._isValidState(g)&&g.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const g=window.history.state;this._isValidState(g)&&g.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(g,S=!1){const M=S||!this._destination,P={fingerprint:this._fingerprint,uid:M?this._uid:this._uid+1,destination:g};this._updateInternalState(g,P.uid);let R;if(this._updateUrl&&(g==null?void 0:g.hash)){const s=document.location.href.split("#")[0];s.startsWith("file://")||(R=`${s}#${g.hash}`)}M?window.history.replaceState(P,"",R):window.history.pushState(P,"",R)}_tryPushCurrentPosition(g=!1){if(!this._position)return;let S=this._position;if(g&&(S=Object.assign(Object.create(null),this._position),S.temporary=!0),!this._destination){this._pushOrReplaceState(S);return}if(this._destination.temporary){this._pushOrReplaceState(S,!0);return}if(this._destination.hash===S.hash||!this._destination.page&&this._numPositionUpdates<=k)return;let M=!1;if(this._destination.page>=S.first&&this._destination.page<=S.page){if(this._destination.dest!==void 0||!this._destination.first)return;M=!0}this._pushOrReplaceState(S,M)}_isValidPage(g){return Number.isInteger(g)&&g>0&&g<=this.linkService.pagesCount}_isValidState(g,S=!1){if(!g)return!1;if(g.fingerprint!==this._fingerprint)if(S){if(typeof g.fingerprint!="string"||g.fingerprint.length!==this._fingerprint.length)return!1;const[M]=performance.getEntriesByType("navigation");if((M==null?void 0:M.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(g.uid)||g.uid<0||g.destination===null||typeof g.destination!="object")}_updateInternalState(g,S,M=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),M&&(g==null?void 0:g.temporary)&&delete g.temporary,this._destination=g,this._uid=S,this._maxUid=Math.max(this._maxUid,S),this._numPositionUpdates=0}_parseCurrentHash(g=!1){const S=unescape(l()).substring(1),M=(0,u.parseQueryString)(S),P=M.get("nameddest")||"";let R=M.get("page")|0;return(!this._isValidPage(R)||g&&P.length>0)&&(R=null),{hash:S,page:R,rotation:this.linkService.rotation}}_updateViewarea({location:g}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:g.pdfOpenParams.substring(1),page:this.linkService.page,first:g.pageNumber,rotation:g.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},T))}_popState({state:g}){const S=l(),M=this._currentHash!==S;if(this._currentHash=S,!g){this._uid++;const{hash:R,page:s,rotation:h}=this._parseCurrentHash();this._pushOrReplaceState({hash:R,page:s,rotation:h},!0);return}if(!this._isValidState(g))return;this._popStateInProgress=!0,M&&(this._blockHashChange++,(0,c.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:O}).then(()=>{this._blockHashChange--}));const P=g.destination;this._updateInternalState(P,g.uid,!0),(0,u.isValidRotation)(P.rotation)&&(this.linkService.rotation=P.rotation),P.dest?this.linkService.goToDestination(P.dest):P.hash?this.linkService.setHash(P.hash):P.page&&(this.linkService.page=P.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}_.PDFHistory=d;function b(y,g){return typeof y!="string"||typeof g!="string"?!1:y===g||(0,u.parseQueryString)(y).get("nameddest")===g}function C(y,g){function S(M,P){if(typeof M!=typeof P||Array.isArray(M)||Array.isArray(P))return!1;if(M!==null&&typeof M=="object"&&P!==null){if(Object.keys(M).length!==Object.keys(P).length)return!1;for(const R in M)if(!S(M[R],P[R]))return!1;return!0}return M===P||Number.isNaN(M)&&Number.isNaN(P)}if(!(Array.isArray(y)&&Array.isArray(g))||y.length!==g.length)return!1;for(let M=0,P=y.length;M<P;M++)if(!S(y[M],g[M]))return!1;return!0}},(v,_,w)=>{var s,h,I,f,B,q,G,Q,ue,ae,wt,_e,rn,X,an,Se,on,N,ln,W,Qn,J,ei,Z,cn;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFPageView=void 0;var u=w(4),c=w(2),O=w(14),k=w(3),T=w(15),l=w(5),d=w(1),b=w(16),C=w(17),y=w(18),g=w(19),S=w(20);const M=T.compatibilityParams.maxCanvasPixels||16777216,P=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new d.SimpleLinkService}});class R{constructor(i){te(this,ae);te(this,_e);te(this,X);te(this,Se);te(this,N);te(this,W);te(this,J);te(this,Z);te(this,s,u.AnnotationMode.ENABLE_FORMS);te(this,h,null);te(this,I,null);te(this,f,null);te(this,B,null);te(this,q,c.RenderingStates.INITIAL);te(this,G,c.TextLayerMode.ENABLE);te(this,Q,{initialOptionalContent:!0,regularAnnotations:!0});te(this,ue,new WeakMap);var D,z,ie,j;const o=i.container,E=i.defaultViewport;this.id=i.id,this.renderingId="page"+this.id,ye(this,h,i.layerProperties||P),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=i.scale||c.DEFAULT_SCALE,this.viewport=E,this.pdfPageRotate=E.rotation,this._optionalContentConfigPromise=i.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,ye(this,G,(D=i.textLayerMode)!=null?D:c.TextLayerMode.ENABLE),ye(this,s,(z=i.annotationMode)!=null?z:u.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=i.imageResourcesPath||"",this.useOnlyCssZoom=i.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=(ie=i.isOffscreenCanvasSupported)!=null?ie:!0,this.maxCanvasPixels=i.maxCanvasPixels||M,this.pageColors=i.pageColors||null,this.eventBus=i.eventBus,this.renderingQueue=i.renderingQueue,this.l10n=i.l10n||l.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((j=this.renderingQueue)!=null&&j.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const L=document.createElement("div");if(L.className="page",L.setAttribute("data-page-number",this.id),L.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then($=>{L.setAttribute("aria-label",$)}),this.div=L,oe(this,ae,wt).call(this),o==null||o.append(L),this._isStandalone){o==null||o.style.setProperty("--scale-factor",this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:$}=i;$&&$.then(se=>{$===this._optionalContentConfigPromise&&(A(this,Q).initialOptionalContent=se.hasInitialVisibility)})}}get renderingState(){return A(this,q)}set renderingState(i){if(i!==A(this,q))switch(ye(this,q,i),A(this,I)&&(clearTimeout(A(this,I)),ye(this,I,null)),i){case c.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case c.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),ye(this,I,setTimeout(()=>{this.div.classList.add("loading"),ye(this,I,null)},0));break;case c.RenderingStates.INITIAL:case c.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(i){this.pdfPage=i,this.pdfPageRotate=i.rotate;const o=(this.rotation+this.pdfPageRotate)%360;this.viewport=i.getViewport({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:o}),oe(this,ae,wt).call(this),this.reset()}destroy(){var i;this.reset(),(i=this.pdfPage)==null||i.cleanup()}get _textHighlighter(){return(0,u.shadow)(this,"_textHighlighter",new y.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:A(this,h).call(this).findController}))}_resetZoomLayer(i=!1){if(!this.zoomLayer)return;const o=this.zoomLayer.firstChild;A(this,ue).delete(o),o.width=0,o.height=0,i&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:i=!1,keepAnnotationLayer:o=!1,keepAnnotationEditorLayer:E=!1,keepXfaLayer:L=!1,keepTextLayer:D=!1}={}){var pe,ve,Ce,Pe,ke;this.cancelRendering({keepAnnotationLayer:o,keepAnnotationEditorLayer:E,keepXfaLayer:L,keepTextLayer:D}),this.renderingState=c.RenderingStates.INITIAL;const z=this.div,ie=z.childNodes,j=i&&this.zoomLayer||null,$=o&&((pe=this.annotationLayer)==null?void 0:pe.div)||null,se=E&&((ve=this.annotationEditorLayer)==null?void 0:ve.div)||null,Y=L&&((Ce=this.xfaLayer)==null?void 0:Ce.div)||null,re=D&&((Pe=this.textLayer)==null?void 0:Pe.div)||null;for(let de=ie.length-1;de>=0;de--){const xe=ie[de];switch(xe){case j:case $:case se:case Y:case re:continue}xe.remove()}z.removeAttribute("data-loaded"),$&&this.annotationLayer.hide(),se&&this.annotationEditorLayer.hide(),Y&&this.xfaLayer.hide(),re&&this.textLayer.hide(),(ke=this.structTreeLayer)==null||ke.hide(),j||(this.canvas&&(A(this,ue).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:i=0,rotation:o=null,optionalContentConfigPromise:E=null,drawingDelay:L=-1}){var $;this.scale=i||this.scale,typeof o=="number"&&(this.rotation=o),E instanceof Promise&&(this._optionalContentConfigPromise=E,E.then(se=>{E===this._optionalContentConfigPromise&&(A(this,Q).initialOptionalContent=se.hasInitialVisibility)}));const D=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:D}),oe(this,ae,wt).call(this),this._isStandalone&&(($=this.div.parentNode)==null||$.style.setProperty("--scale-factor",this.viewport.scale));let z=!1;if(this.canvas&&this.maxCanvasPixels>0){const{width:se,height:Y}=this.viewport,{sx:re,sy:pe}=this.outputScale;(Math.floor(se)*re|0)*(Math.floor(Y)*pe|0)>this.maxCanvasPixels&&(z=!0)}const ie=this.useOnlyCssZoom||this.hasRestrictedScaling&&z,j=!ie&&L>=0&&L<1e3;if(this.canvas){if(j||ie){j&&this.renderingState!==c.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:L}),this.renderingState=c.RenderingStates.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!j,hideTextLayer:j}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:A(this,B)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:i=!1,keepAnnotationEditorLayer:o=!1,keepXfaLayer:E=!1,keepTextLayer:L=!1,cancelExtraDelay:D=0}={}){var z;this.renderTask&&(this.renderTask.cancel(D),this.renderTask=null),this.resume=null,this.textLayer&&(!L||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!i||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!o||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!E||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(z=this._textHighlighter)==null||z.disable())}cssTransform({target:i,redrawAnnotationLayer:o=!1,redrawAnnotationEditorLayer:E=!1,redrawXfaLayer:L=!1,redrawTextLayer:D=!1,hideTextLayer:z=!1}){var j;if(!i.hasAttribute("zooming")){i.setAttribute("zooming",!0);const{style:$}=i;$.width=$.height=""}const ie=A(this,ue).get(i);if(this.viewport!==ie){const $=this.viewport.rotation-ie.rotation,se=Math.abs($);let Y=1,re=1;if(se===90||se===270){const{width:pe,height:ve}=this.viewport;Y=ve/pe,re=pe/ve}i.style.transform=`rotate(${$}deg) scale(${Y}, ${re})`}o&&this.annotationLayer&&oe(this,_e,rn).call(this),E&&this.annotationEditorLayer&&oe(this,X,an).call(this),L&&this.xfaLayer&&oe(this,Se,on).call(this),this.textLayer&&(z?(this.textLayer.hide(),(j=this.structTreeLayer)==null||j.hide()):D&&oe(this,N,ln).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(i,o){return this.viewport.convertToPdfPoint(i,o)}async draw(){this.renderingState!==c.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:i,l10n:o,pageColors:E,pdfPage:L,viewport:D}=this;if(!L)throw this.renderingState=c.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=c.RenderingStates.RUNNING;const z=document.createElement("div");if(z.classList.add("canvasWrapper"),i.append(z),!this.textLayer&&A(this,G)!==c.TextLayerMode.DISABLE&&!L.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new C.TextAccessibilityManager),this.textLayer=new g.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:A(this,G)===c.TextLayerMode.ENABLE_PERMISSIONS}),i.append(this.textLayer.div)),!this.annotationLayer&&A(this,s)!==u.AnnotationMode.DISABLE){const{annotationStorage:V,downloadManager:F,enableScripting:U,fieldObjectsPromise:ce,hasJSActionsPromise:me,linkService:fe}=A(this,h).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new k.AnnotationLayerBuilder({pageDiv:i,pdfPage:L,annotationStorage:V,imageResourcesPath:this.imageResourcesPath,renderForms:A(this,s)===u.AnnotationMode.ENABLE_FORMS,linkService:fe,downloadManager:F,l10n:o,enableScripting:U,hasJSActionsPromise:me,fieldObjectsPromise:ce,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const ie=V=>{if(re==null||re(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=c.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=c.RenderingStates.RUNNING,V()};return}V()},{width:j,height:$}=D,se=document.createElement("canvas");se.setAttribute("role","presentation"),se.hidden=!0;const Y=!!((E==null?void 0:E.background)&&(E==null?void 0:E.foreground));let re=V=>{(!Y||V)&&(se.hidden=!1,re=null)};z.append(se),this.canvas=se;const pe=se.getContext("2d",{alpha:!1}),ve=this.outputScale=new c.OutputScale;if(this.useOnlyCssZoom){const V=D.clone({scale:u.PixelsPerInch.PDF_TO_CSS_UNITS});ve.sx*=V.width/j,ve.sy*=V.height/$}if(this.maxCanvasPixels>0){const V=j*$,F=Math.sqrt(this.maxCanvasPixels/V);ve.sx>F||ve.sy>F?(ve.sx=F,ve.sy=F,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const Ce=(0,c.approximateFraction)(ve.sx),Pe=(0,c.approximateFraction)(ve.sy);se.width=(0,c.roundToDivide)(j*ve.sx,Ce[0]),se.height=(0,c.roundToDivide)($*ve.sy,Pe[0]);const{style:ke}=se;ke.width=(0,c.roundToDivide)(j,Ce[1])+"px",ke.height=(0,c.roundToDivide)($,Pe[1])+"px",A(this,ue).set(se,D);const de=ve.scaled?[ve.sx,0,0,ve.sy,0,0]:null,xe={canvasContext:pe,transform:de,viewport:D,annotationMode:A(this,s),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:E},Me=this.renderTask=this.pdfPage.render(xe);Me.onContinue=ie;const De=Me.promise.then(async()=>{if(re==null||re(!0),await oe(this,Z,cn).call(this,Me),oe(this,N,ln).call(this),this.annotationLayer&&await oe(this,_e,rn).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:V}=A(this,h).call(this);if(!V)return;this.annotationEditorLayer=new O.AnnotationEditorLayerBuilder({uiManager:V,pageDiv:i,pdfPage:L,l10n:o,accessibilityManager:this._accessibilityManager})}oe(this,X,an).call(this)},V=>(V instanceof u.RenderingCancelledException||re==null||re(!0),oe(this,Z,cn).call(this,Me,V)));if(L.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&i.append(this.xfaLayer.div);else{const{annotationStorage:V,linkService:F}=A(this,h).call(this);this.xfaLayer=new S.XfaLayerBuilder({pageDiv:i,pdfPage:L,annotationStorage:V,linkService:F})}oe(this,Se,on).call(this)}return i.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),De}setPageLabel(i){this.pageLabel=typeof i=="string"?i:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:i,regularAnnotations:o}=A(this,Q);return i&&o?this.canvas:null}}s=new WeakMap,h=new WeakMap,I=new WeakMap,f=new WeakMap,B=new WeakMap,q=new WeakMap,G=new WeakMap,Q=new WeakMap,ue=new WeakMap,ae=new WeakSet,wt=function(){const{viewport:i}=this;if(this.pdfPage){if(A(this,f)===i.rotation)return;ye(this,f,i.rotation)}(0,u.setLayerDimensions)(this.div,i,!0,!1)},_e=new WeakSet,rn=async function(){let i=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(o){console.error(`#renderAnnotationLayer: "${o}".`),i=o}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:i})}},X=new WeakSet,an=async function(){let i=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(o){console.error(`#renderAnnotationEditorLayer: "${o}".`),i=o}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:i})}},Se=new WeakSet,on=async function(){let i=null;try{const o=await this.xfaLayer.render(this.viewport,"display");(o==null?void 0:o.textDivs)&&this._textHighlighter&&oe(this,J,ei).call(this,o.textDivs)}catch(o){console.error(`#renderXfaLayer: "${o}".`),i=o}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:i})}},N=new WeakSet,ln=async function(){const{pdfPage:i,textLayer:o,viewport:E}=this;if(!o)return;let L=null;try{if(!o.renderingDone){const D=i.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});o.setTextContentSource(D)}await o.render(E)}catch(D){if(D instanceof u.AbortException)return;console.error(`#renderTextLayer: "${D}".`),L=D}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:o.numTextDivs,error:L}),oe(this,W,Qn).call(this)},W=new WeakSet,Qn=async function(){var E,L,D;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new b.StructTreeLayerBuilder);const i=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),o=(E=this.structTreeLayer)==null?void 0:E.render(i);o&&((L=this.canvas)==null||L.append(o)),(D=this.structTreeLayer)==null||D.show()},J=new WeakSet,ei=async function(i){const o=await this.pdfPage.getTextContent(),E=[];for(const L of o.items)E.push(L.str);this._textHighlighter.setTextMapping(i,E),this._textHighlighter.enable()},Z=new WeakSet,cn=async function(i,o=null){if(i===this.renderTask&&(this.renderTask=null),o instanceof u.RenderingCancelledException){ye(this,B,null);return}if(ye(this,B,o),this.renderingState=c.RenderingStates.FINISHED,this._resetZoomLayer(!0),A(this,Q).regularAnnotations=!i.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:A(this,B)}),o)throw o},_.PDFPageView=R},(v,_,w)=>{var k;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationEditorLayerBuilder=void 0;var u=w(4),c=w(5);class O{constructor(l){te(this,k,void 0);this.pageDiv=l.pageDiv,this.pdfPage=l.pdfPage,this.accessibilityManager=l.accessibilityManager,this.l10n=l.l10n||c.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,ye(this,k,l.uiManager)}async render(l,d="display"){if(d!=="display"||this._cancelled)return;const b=l.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:b}),this.show();return}const C=this.div=document.createElement("div");C.className="annotationEditorLayer",C.tabIndex=0,C.hidden=!0,this.pageDiv.append(C),this.annotationEditorLayer=new u.AnnotationEditorLayer({uiManager:A(this,k),div:C,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:b});const y={viewport:b,div:C,annotations:null,intent:d};this.annotationEditorLayer.render(y),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){!this.div||(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}k=new WeakMap,_.AnnotationEditorLayerBuilder=O},(v,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.compatibilityParams=_.OptionKind=_.AppOptions=void 0;const w=Object.create(null);_.compatibilityParams=w;{const T=navigator.userAgent||"",l=navigator.platform||"",d=navigator.maxTouchPoints||1,b=/Android/.test(T),C=/\b(iPad|iPhone|iPod)(?=;)/.test(T)||l==="MacIntel"&&d>1;(function(){(C||b)&&(w.maxCanvasPixels=5242880)})()}const u={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};_.OptionKind=u;const c={annotationEditorMode:{value:0,kind:u.VIEWER+u.PREFERENCE},annotationMode:{value:2,kind:u.VIEWER+u.PREFERENCE},cursorToolOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},defaultZoomDelay:{value:400,kind:u.VIEWER+u.PREFERENCE},defaultZoomValue:{value:"",kind:u.VIEWER+u.PREFERENCE},disableHistory:{value:!1,kind:u.VIEWER},disablePageLabels:{value:!1,kind:u.VIEWER+u.PREFERENCE},enableFloatingToolbar:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePermissions:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableScripting:{value:!0,kind:u.VIEWER+u.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:u.VIEWER},externalLinkTarget:{value:0,kind:u.VIEWER+u.PREFERENCE},historyUpdateUrl:{value:!1,kind:u.VIEWER+u.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:u.VIEWER+u.PREFERENCE},imageResourcesPath:{value:"./images/",kind:u.VIEWER},maxCanvasPixels:{value:16777216,kind:u.VIEWER},forcePageColors:{value:!1,kind:u.VIEWER+u.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:u.VIEWER+u.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:u.VIEWER+u.PREFERENCE},pdfBugEnabled:{value:!1,kind:u.VIEWER+u.PREFERENCE},printResolution:{value:150,kind:u.VIEWER},sidebarViewOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},scrollModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},spreadModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},textLayerMode:{value:1,kind:u.VIEWER+u.PREFERENCE},useOnlyCssZoom:{value:!1,kind:u.VIEWER+u.PREFERENCE},viewerCssTheme:{value:0,kind:u.VIEWER+u.PREFERENCE},viewOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},cMapPacked:{value:!0,kind:u.API},cMapUrl:{value:"../web/cmaps/",kind:u.API},disableAutoFetch:{value:!1,kind:u.API+u.PREFERENCE},disableFontFace:{value:!1,kind:u.API+u.PREFERENCE},disableRange:{value:!1,kind:u.API+u.PREFERENCE},disableStream:{value:!1,kind:u.API+u.PREFERENCE},docBaseUrl:{value:"",kind:u.API},enableXfa:{value:!0,kind:u.API+u.PREFERENCE},fontExtraProperties:{value:!1,kind:u.API},isEvalSupported:{value:!0,kind:u.API},isOffscreenCanvasSupported:{value:!0,kind:u.API},maxImageSize:{value:-1,kind:u.API},pdfBug:{value:!1,kind:u.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:u.API},verbosity:{value:1,kind:u.API},workerPort:{value:null,kind:u.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:u.WORKER}};c.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:u.VIEWER},c.disablePreferences={value:!1,kind:u.VIEWER},c.locale={value:navigator.language||"en-US",kind:u.VIEWER},c.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:u.VIEWER};const O=Object.create(null);class k{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(l){var C;const d=O[l];if(d!==void 0)return d;const b=c[l];if(b!==void 0)return(C=w[l])!=null?C:b.value}static getAll(l=null){var b;const d=Object.create(null);for(const C in c){const y=c[C];if(l){if((l&y.kind)===0)continue;if(l===u.PREFERENCE){const S=y.value,M=typeof S;if(M==="boolean"||M==="string"||M==="number"&&Number.isInteger(S)){d[C]=S;continue}throw new Error(`Invalid type for preference: ${C}`)}}const g=O[C];d[C]=g!==void 0?g:(b=w[C])!=null?b:y.value}return d}static set(l,d){O[l]=d}static setAll(l){for(const d in l)O[d]=l[d]}static remove(l){delete O[l]}}_.AppOptions=k,k._hasUserOptions=function(){return Object.keys(O).length>0}},(v,_)=>{var O,k,un,l,hn;Object.defineProperty(_,"__esModule",{value:!0}),_.StructTreeLayerBuilder=void 0;const w={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},u=/^H(\d+)$/;class c{constructor(){te(this,k);te(this,l);te(this,O,void 0)}get renderingDone(){return A(this,O)!==void 0}render(C){if(A(this,O)!==void 0)return A(this,O);const y=oe(this,l,hn).call(this,C);return y==null||y.classList.add("structTree"),ye(this,O,y)}hide(){A(this,O)&&!A(this,O).hidden&&(A(this,O).hidden=!0)}show(){var C;(C=A(this,O))!=null&&C.hidden&&(A(this,O).hidden=!1)}}O=new WeakMap,k=new WeakSet,un=function(C,y){C.alt!==void 0&&y.setAttribute("aria-label",C.alt),C.id!==void 0&&y.setAttribute("aria-owns",C.id),C.lang!==void 0&&y.setAttribute("lang",C.lang)},l=new WeakSet,hn=function(C){if(!C)return null;const y=document.createElement("span");if("role"in C){const{role:g}=C,S=g.match(u);S?(y.setAttribute("role","heading"),y.setAttribute("aria-level",S[1])):w[g]&&y.setAttribute("role",w[g])}if(oe(this,k,un).call(this,C,y),C.children)if(C.children.length===1&&"id"in C.children[0])oe(this,k,un).call(this,C.children[0],y);else for(const g of C.children)y.append(oe(this,l,hn).call(this,g));return y},_.StructTreeLayerBuilder=c},(v,_,w)=>{var O,k,T,l,d,Ct,C,dn;Object.defineProperty(_,"__esModule",{value:!0}),_.TextAccessibilityManager=void 0;var u=w(2);const g=class{constructor(){te(this,C);te(this,O,!1);te(this,k,null);te(this,T,new Map);te(this,l,new Map)}setTextMapping(M){ye(this,k,M)}enable(){if(A(this,O))throw new Error("TextAccessibilityManager is already enabled.");if(!A(this,k))throw new Error("Text divs and strings have not been set.");if(ye(this,O,!0),ye(this,k,A(this,k).slice()),A(this,k).sort(oe(g,d,Ct)),A(this,T).size>0){const M=A(this,k);for(const[P,R]of A(this,T)){if(!document.getElementById(P)){A(this,T).delete(P);continue}oe(this,C,dn).call(this,P,M[R])}}for(const[M,P]of A(this,l))this.addPointerInTextLayer(M,P);A(this,l).clear()}disable(){!A(this,O)||(A(this,l).clear(),ye(this,k,null),ye(this,O,!1))}removePointerInTextLayer(M){if(!A(this,O)){A(this,l).delete(M);return}const P=A(this,k);if(!P||P.length===0)return;const{id:R}=M,s=A(this,T).get(R);if(s===void 0)return;const h=P[s];A(this,T).delete(R);let I=h.getAttribute("aria-owns");I!=null&&I.includes(R)&&(I=I.split(" ").filter(f=>f!==R).join(" "),I?h.setAttribute("aria-owns",I):(h.removeAttribute("aria-owns"),h.setAttribute("role","presentation")))}addPointerInTextLayer(M,P){const{id:R}=M;if(!R)return;if(!A(this,O)){A(this,l).set(M,P);return}P&&this.removePointerInTextLayer(M);const s=A(this,k);if(!s||s.length===0)return;const h=(0,u.binarySearchFirstItem)(s,f=>{var B;return oe(B=g,d,Ct).call(B,M,f)<0}),I=Math.max(0,h-1);oe(this,C,dn).call(this,R,s[I]),A(this,T).set(R,I)}moveElementInDOM(M,P,R,s){if(this.addPointerInTextLayer(R,s),!M.hasChildNodes()){M.append(P);return}const h=Array.from(M.childNodes).filter(B=>B!==P);if(h.length===0)return;const I=R||P,f=(0,u.binarySearchFirstItem)(h,B=>{var q;return oe(q=g,d,Ct).call(q,I,B)<0});f===0?h[0].before(P):h[f-1].after(P)}};let c=g;O=new WeakMap,k=new WeakMap,T=new WeakMap,l=new WeakMap,d=new WeakSet,Ct=function(M,P){const R=M.getBoundingClientRect(),s=P.getBoundingClientRect();if(R.width===0&&R.height===0)return 1;if(s.width===0&&s.height===0)return-1;const h=R.y,I=R.y+R.height,f=R.y+R.height/2,B=s.y,q=s.y+s.height,G=s.y+s.height/2;if(f<=B&&G>=I)return-1;if(G<=h&&f>=q)return 1;const Q=R.x+R.width/2,ue=s.x+s.width/2;return Q-ue},C=new WeakSet,dn=function(M,P){const R=P.getAttribute("aria-owns");R!=null&&R.includes(M)||P.setAttribute("aria-owns",R?`${R} ${M}`:M),P.removeAttribute("role")},te(c,d),_.TextAccessibilityManager=c},(v,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextHighlighter=void 0;class w{constructor({findController:c,eventBus:O,pageIndex:k}){this.findController=c,this.matches=[],this.eventBus=O,this.pageIdx=k,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(c,O){this.textDivs=c,this.textContentItemsStr=O}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=c=>{(c.pageIndex===this.pageIdx||c.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(c,O){if(!c)return[];const{textContentItemsStr:k}=this;let T=0,l=0;const d=k.length-1,b=[];for(let C=0,y=c.length;C<y;C++){let g=c[C];for(;T!==d&&g>=l+k[T].length;)l+=k[T].length,T++;T===k.length&&console.error("Could not find a matching mapping");const S={begin:{divIdx:T,offset:g-l}};for(g+=O[C];T!==d&&g>l+k[T].length;)l+=k[T].length,T++;S.end={divIdx:T,offset:g-l},b.push(S)}return b}_renderMatches(c){if(c.length===0)return;const{findController:O,pageIdx:k}=this,{textContentItemsStr:T,textDivs:l}=this,d=k===O.selected.pageIdx,b=O.selected.matchIdx,C=O.state.highlightAll;let y=null;const g={divIdx:-1,offset:void 0};function S(I,f){const B=I.divIdx;return l[B].textContent="",M(B,0,I.offset,f)}function M(I,f,B,q){let G=l[I];if(G.nodeType===Node.TEXT_NODE){const ae=document.createElement("span");G.before(ae),ae.append(G),l[I]=ae,G=ae}const Q=T[I].substring(f,B),ue=document.createTextNode(Q);if(q){const ae=document.createElement("span");return ae.className=`${q} appended`,ae.append(ue),G.append(ae),q.includes("selected")?ae.offsetLeft:0}return G.append(ue),0}let P=b,R=P+1;if(C)P=0,R=c.length;else if(!d)return;let s=-1,h=-1;for(let I=P;I<R;I++){const f=c[I],B=f.begin;if(B.divIdx===s&&B.offset===h)continue;s=B.divIdx,h=B.offset;const q=f.end,G=d&&I===b,Q=G?" selected":"";let ue=0;if(!y||B.divIdx!==y.divIdx?(y!==null&&M(y.divIdx,y.offset,g.offset),S(B)):M(y.divIdx,y.offset,B.offset),B.divIdx===q.divIdx)ue=M(B.divIdx,B.offset,q.offset,"highlight"+Q);else{ue=M(B.divIdx,B.offset,g.offset,"highlight begin"+Q);for(let ae=B.divIdx+1,le=q.divIdx;ae<le;ae++)l[ae].className="highlight middle"+Q;S(q,"highlight end"+Q)}y=q,G&&O.scrollMatchIntoView({element:l[B.divIdx],selectedLeft:ue,pageIndex:k,matchIndex:b})}y&&M(y.divIdx,y.offset,g.offset)}_updateMatches(c=!1){if(!this.enabled&&!c)return;const{findController:O,matches:k,pageIdx:T}=this,{textContentItemsStr:l,textDivs:d}=this;let b=-1;for(const g of k){const S=Math.max(b,g.begin.divIdx);for(let M=S,P=g.end.divIdx;M<=P;M++){const R=d[M];R.textContent=l[M],R.className=""}b=g.end.divIdx+1}if(!(O!=null&&O.highlightMatches)||c)return;const C=O.pageMatches[T]||null,y=O.pageMatchesLength[T]||null;this.matches=this._convertMatches(C,y),this._renderMatches(this.matches)}}_.TextHighlighter=w},(v,_,w)=>{var k,T,l,d,b,ti,y,ni;Object.defineProperty(_,"__esModule",{value:!0}),_.TextLayerBuilder=void 0;var u=w(4),c=w(2);class O{constructor({highlighter:M=null,accessibilityManager:P=null,isOffscreenCanvasSupported:R=!0,enablePermissions:s=!1}){te(this,b);te(this,y);te(this,k,!1);te(this,T,0);te(this,l,0);te(this,d,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=M,this.accessibilityManager=P,this.isOffscreenCanvasSupported=R,ye(this,k,s===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(M){var s,h,I;if(!A(this,d))throw new Error('No "textContentSource" parameter specified.');const P=M.scale*(globalThis.devicePixelRatio||1),{rotation:R}=M;if(this.renderingDone){const f=R!==A(this,T),B=P!==A(this,l);(f||B)&&(this.hide(),(0,u.updateTextLayer)({container:this.div,viewport:M,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:B,mustRotate:f}),ye(this,l,P),ye(this,T,R)),this.show();return}this.cancel(),(s=this.highlighter)==null||s.setTextMapping(this.textDivs,this.textContentItemsStr),(h=this.accessibilityManager)==null||h.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,u.renderTextLayer)({textContentSource:A(this,d),container:this.div,viewport:M,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,oe(this,b,ti).call(this),ye(this,l,P),ye(this,T,R),this.show(),(I=this.accessibilityManager)==null||I.enable()}hide(){var M;this.div.hidden||((M=this.highlighter)==null||M.disable(),this.div.hidden=!0)}show(){var M;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(M=this.highlighter)==null||M.enable())}cancel(){var M,P;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(M=this.highlighter)==null||M.disable(),(P=this.accessibilityManager)==null||P.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(M){this.cancel(),ye(this,d,M)}}k=new WeakMap,T=new WeakMap,l=new WeakMap,d=new WeakMap,b=new WeakSet,ti=function(){this.renderingDone=!0;const M=document.createElement("div");M.className="endOfContent",this.div.append(M),oe(this,y,ni).call(this)},y=new WeakSet,ni=function(){const{div:M}=this;M.addEventListener("mousedown",P=>{const R=M.querySelector(".endOfContent");if(!R)return;let s=P.target!==M;if(s&&(s=getComputedStyle(R).getPropertyValue("-moz-user-select")!=="none"),s){const h=M.getBoundingClientRect(),I=Math.max(0,(P.pageY-h.top)/h.height);R.style.top=(I*100).toFixed(2)+"%"}R.classList.add("active")}),M.addEventListener("mouseup",()=>{const P=M.querySelector(".endOfContent");!P||(P.style.top="",P.classList.remove("active"))}),M.addEventListener("copy",P=>{if(!A(this,k)){const R=document.getSelection();P.clipboardData.setData("text/plain",(0,c.removeNullCharacters)((0,u.normalizeUnicode)(R.toString())))}P.preventDefault(),P.stopPropagation()})},_.TextLayerBuilder=O},(v,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.XfaLayerBuilder=void 0;var u=w(4);class c{constructor({pageDiv:k,pdfPage:T,annotationStorage:l=null,linkService:d,xfaHtml:b=null}){this.pageDiv=k,this.pdfPage=T,this.annotationStorage=l,this.linkService=d,this.xfaHtml=b,this.div=null,this._cancelled=!1}async render(k,T="display"){if(T==="print"){const b={viewport:k.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:T},C=document.createElement("div");return this.pageDiv.append(C),b.div=C,u.XfaLayer.render(b)}const l=await this.pdfPage.getXfa();if(this._cancelled||!l)return{textDivs:[]};const d={viewport:k.clone({dontFlip:!0}),div:this.div,xfaHtml:l,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:T};return this.div?u.XfaLayer.update(d):(this.div=document.createElement("div"),this.pageDiv.append(this.div),d.div=this.div,u.XfaLayer.render(d))}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}_.XfaLayerBuilder=c},(v,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFScriptingManager=void 0;var u=w(2),c=w(4);class O{constructor({eventBus:T,sandboxBundleSrc:l=null,scriptingFactory:d=null,docPropertiesLookup:b=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._ready=!1,this._eventBus=T,this._sandboxBundleSrc=l,this._scriptingFactory=d,this._docPropertiesLookup=b,this._scriptingFactory||window.addEventListener("updatefromsandbox",C=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:C.detail})})}setViewer(T){this._pdfViewer=T}async setDocument(T){var C;if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=T,!T)return;const[l,d,b]=await Promise.all([T.getFieldObjects(),T.getCalculationOrderIds(),T.getJSActions()]);if(!l&&!b){await this._destroyScripting();return}if(T===this._pdfDocument){try{this._scripting=this._createScripting()}catch(y){console.error(`PDFScriptingManager.setDocument: "${y==null?void 0:y.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",y=>{(y==null?void 0:y.source)===window&&this._updateFromSandbox(y.detail)}),this._internalEvents.set("dispatcheventinsandbox",y=>{var g;(g=this._scripting)==null||g.dispatchEventInSandbox(y.detail)}),this._internalEvents.set("pagechanging",({pageNumber:y,previous:g})=>{y!==g&&(this._dispatchPageClose(g),this._dispatchPageOpen(y))}),this._internalEvents.set("pagerendered",({pageNumber:y})=>{!this._pageOpenPending.has(y)||y===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(y)}),this._internalEvents.set("pagesdestroy",async y=>{var g,S;await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await((g=this._scripting)==null?void 0:g.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(S=this._closeCapability)==null||S.resolve()});for(const[y,g]of this._internalEvents)this._eventBus._on(y,g);try{const y=await this._getDocProperties();if(T!==this._pdfDocument)return;await this._scripting.createSandbox({objects:l,calculationOrder:d,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...y,actions:b}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(y){console.error(`PDFScriptingManager.setDocument: "${y==null?void 0:y.message}".`),await this._destroyScripting();return}await((C=this._scripting)==null?void 0:C.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{T===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(T){var l;return(l=this._scripting)==null?void 0:l.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(T){var l;return(l=this._scripting)==null?void 0:l.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(T){var l;return(l=this._scripting)==null?void 0:l.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(T){var l;return(l=this._scripting)==null?void 0:l.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var T;return((T=this._destroyCapability)==null?void 0:T.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,c.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,c.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,c.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(T){var S;const l=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:d,siblings:b,command:C,value:y}=T;if(!d){switch(C){case"clear":console.clear();break;case"error":console.error(y);break;case"layout":{if(l)return;const M=(0,u.apiPageLayoutToViewerModes)(y);this._pdfViewer.spreadMode=M.spreadMode;break}case"page-num":this._pdfViewer.currentPageNumber=y+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(y);break;case"zoom":if(l)return;this._pdfViewer.currentScaleValue=y;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(l)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(l)return;this._pdfViewer.decreaseScale();break}return}if(l&&T.focus)return;delete T.id,delete T.siblings;const g=b?[d,...b]:[d];for(const M of g){const P=document.querySelector(`[data-element-id="${M}"]`);P?P.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:T})):(S=this._pdfDocument)==null||S.annotationStorage.setValue(M,T)}}async _dispatchPageOpen(T,l=!1){const d=this._pdfDocument,b=this._visitedPages;if(l&&(this._closeCapability=new c.PromiseCapability),!this._closeCapability)return;const C=this._pdfViewer.getPageView(T-1);if((C==null?void 0:C.renderingState)!==u.RenderingStates.FINISHED){this._pageOpenPending.add(T);return}this._pageOpenPending.delete(T);const y=(async()=>{var S,M;const g=await(b.has(T)?null:(S=C.pdfPage)==null?void 0:S.getJSActions());d===this._pdfDocument&&await((M=this._scripting)==null?void 0:M.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:T,actions:g}))})();b.set(T,y)}async _dispatchPageClose(T){var C;const l=this._pdfDocument,d=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(T))return;const b=d.get(T);!b||(d.set(T,null),await b,l===this._pdfDocument&&await((C=this._scripting)==null?void 0:C.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:T})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:T}=w(22);return T(this._pdfDocument)}_createScripting(){if(this._destroyCapability=new c.PromiseCapability,this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:T}=w(22);return new T(this._sandboxBundleSrc)}async _destroyScripting(){var T,l;if(!this._scripting){this._pdfDocument=null,(T=this._destroyCapability)==null||T.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(d=>{setTimeout(d,1e3)})]).catch(d=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[d,b]of this._internalEvents)this._eventBus._off(d,b);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,this._ready=!1,(l=this._destroyCapability)==null||l.resolve()}}_.PDFScriptingManager=O},(v,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericScripting=void 0,_.docPropertiesLookup=c;var u=w(4);async function c(k){const T="",l=T.split("#")[0];let{info:d,metadata:b,contentDispositionFilename:C,contentLength:y}=await k.getMetadata();if(!y){const{length:g}=await k.getDownloadInfo();y=g}return{...d,baseURL:l,filesize:y,filename:C||(0,u.getPdfFilenameFromUrl)(T),metadata:b==null?void 0:b.getRaw(),authors:b==null?void 0:b.get("dc:creator"),numPages:k.numPages,URL:T}}class O{constructor(T){this._ready=(0,u.loadScript)(T,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(T){(await this._ready).create(T)}async dispatchEventInSandbox(T){const l=await this._ready;setTimeout(()=>l.dispatchEvent(T),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}_.GenericScripting=O},(v,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFSinglePageViewer=void 0;var u=w(2),c=w(24);class O extends c.PDFViewer{_resetView(){super._resetView(),this._scrollMode=u.ScrollMode.PAGE,this._spreadMode=u.SpreadMode.NONE}set scrollMode(T){}_updateScrollMode(){}set spreadMode(T){}_updateSpreadMode(){}}_.PDFSinglePageViewer=O},(v,_,w)=>{var S,M,P,fn,s,h,I,f,B,q,G,Q,ue,ae,le,_e,Ae,X,Ee,Se,ee,ii,H,si,ne,ri,he,ai,K,pt,i,Tt,E,oi,D,pn,ie,li,$,et,Y,gn,pe,ci,Ce,ui,ke,mn,xe,hi;Object.defineProperty(_,"__esModule",{value:!0}),_.PagesCountLimit=_.PDFViewer=_.PDFPageViewBuffer=void 0;var u=w(4),c=w(2),O=w(5),k=w(13),T=w(25),l=w(1);const d=10,b={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};_.PagesCountLimit=b;function C(De){return Object.values(u.AnnotationEditorType).includes(De)&&De!==u.AnnotationEditorType.DISABLE}class y{constructor(V){te(this,P);te(this,S,new Set);te(this,M,0);ye(this,M,V)}push(V){const F=A(this,S);F.has(V)&&F.delete(V),F.add(V),F.size>A(this,M)&&oe(this,P,fn).call(this)}resize(V,F=null){ye(this,M,V);const U=A(this,S);if(F){const ce=U.size;let me=1;for(const fe of U)if(F.has(fe.id)&&(U.delete(fe),U.add(fe)),++me>ce)break}for(;U.size>A(this,M);)oe(this,P,fn).call(this)}has(V){return A(this,S).has(V)}[Symbol.iterator](){return A(this,S).keys()}}S=new WeakMap,M=new WeakMap,P=new WeakSet,fn=function(){const V=A(this,S).keys().next().value;V==null||V.destroy(),A(this,S).delete(V)},_.PDFPageViewBuffer=y;class g{constructor(V){te(this,ee);te(this,H);te(this,ne);te(this,he);te(this,K);te(this,i);te(this,E);te(this,D);te(this,ie);te(this,$);te(this,Y);te(this,pe);te(this,Ce);te(this,ke);te(this,xe);te(this,s,null);te(this,h,u.AnnotationEditorType.NONE);te(this,I,null);te(this,f,u.AnnotationMode.ENABLE_FORMS);te(this,B,null);te(this,q,null);te(this,G,!1);te(this,Q,!1);te(this,ue,null);te(this,ae,!1);te(this,le,0);te(this,_e,new ResizeObserver(oe(this,xe,hi).bind(this)));te(this,Ae,null);te(this,X,null);te(this,Ee,null);te(this,Se,c.TextLayerMode.ENABLE);var U,ce,me,fe,ge,be;const F="3.6.172";if(u.version!==F)throw new Error(`The API version "${u.version}" does not match the Viewer version "${F}".`);if(this.container=V.container,this.viewer=V.viewer||V.container.firstElementChild,((U=this.container)==null?void 0:U.tagName)!=="DIV"||((ce=this.viewer)==null?void 0:ce.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");A(this,_e).observe(this.container),this.eventBus=V.eventBus,this.linkService=V.linkService||new l.SimpleLinkService,this.downloadManager=V.downloadManager||null,this.findController=V.findController||null,this._scriptingManager=V.scriptingManager||null,ye(this,Se,(me=V.textLayerMode)!=null?me:c.TextLayerMode.ENABLE),ye(this,f,(fe=V.annotationMode)!=null?fe:u.AnnotationMode.ENABLE_FORMS),ye(this,h,(ge=V.annotationEditorMode)!=null?ge:u.AnnotationEditorType.NONE),this.imageResourcesPath=V.imageResourcesPath||"",this.enablePrintAutoRotate=V.enablePrintAutoRotate||!1,this.removePageBorders=V.removePageBorders||!1,this.useOnlyCssZoom=V.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=(be=V.isOffscreenCanvasSupported)!=null?be:!0,this.maxCanvasPixels=V.maxCanvasPixels,this.l10n=V.l10n||O.NullL10n,ye(this,G,V.enablePermissions||!1),this.pageColors=V.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!V.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new T.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=V.renderingQueue,this.scroll=(0,c.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=c.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),oe(this,ke,mn).call(this)}get pagesCount(){return this._pages.length}getPageView(V){return this._pages[V]}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(V=>V==null?void 0:V.pdfPage)}get renderForms(){return A(this,f)===u.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(V){if(!Number.isInteger(V))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(V,!0)||console.error(`currentPageNumber: "${V}" is not a valid page.`)}_setCurrentPageNumber(V,F=!1){var ce,me;if(this._currentPageNumber===V)return F&&oe(this,Y,gn).call(this),!0;if(!(0<V&&V<=this.pagesCount))return!1;const U=this._currentPageNumber;return this._currentPageNumber=V,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:V,pageLabel:(me=(ce=this._pageLabels)==null?void 0:ce[V-1])!=null?me:null,previous:U}),F&&oe(this,Y,gn).call(this),!0}get currentPageLabel(){var V,F;return(F=(V=this._pageLabels)==null?void 0:V[this._currentPageNumber-1])!=null?F:null}set currentPageLabel(V){if(!this.pdfDocument)return;let F=V|0;if(this._pageLabels){const U=this._pageLabels.indexOf(V);U>=0&&(F=U+1)}this._setCurrentPageNumber(F,!0)||console.error(`currentPageLabel: "${V}" is not a valid page.`)}get currentScale(){return this._currentScale!==c.UNKNOWN_SCALE?this._currentScale:c.DEFAULT_SCALE}set currentScale(V){if(isNaN(V))throw new Error("Invalid numeric scale.");!this.pdfDocument||oe(this,$,et).call(this,V,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(V){!this.pdfDocument||oe(this,$,et).call(this,V,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(V){if(!(0,c.isValidRotation)(V))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(V%=360,V<0&&(V+=360),this._pagesRotation===V))return;this._pagesRotation=V;const F=this._currentPageNumber;this.refresh(!0,{rotation:V}),this._currentScaleValue&&oe(this,$,et).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:V,pageNumber:F}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const V=[],F=[];for(let U=1,ce=this.pdfDocument.numPages;U<=ce;++U){if(A(this,ae))return null;F.length=0;const me=await this.pdfDocument.getPage(U),{items:fe}=await me.getTextContent();for(const ge of fe)ge.str&&F.push(ge.str),ge.hasEOL&&F.push(`
`);V.push((0,c.removeNullCharacters)(F.join("")))}return V.join(`
`)}setDocument(V){var fe,ge;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(fe=this.findController)==null||fe.setDocument(null),(ge=this._scriptingManager)==null||ge.setDocument(null),A(this,I)&&(A(this,I).destroy(),ye(this,I,null))),this.pdfDocument=V,!V)return;const F=V.numPages,U=V.getPage(1),ce=V.getOptionalContentConfig(),me=A(this,G)?V.getPermissions():Promise.resolve();if(F>b.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const be=this._scrollMode=c.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:be})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:F})},()=>{}),this._onBeforeDraw=be=>{const we=this._pages[be.pageNumber-1];!we||A(this,s).push(we)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=be=>{be.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:be.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,A(this,X)&&(document.removeEventListener("visibilitychange",A(this,X)),ye(this,X,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([U,me]).then(([be,we])=>{if(V!==this.pdfDocument)return;this._firstPageCapability.resolve(be),this._optionalContentConfigPromise=ce;const{annotationEditorMode:Re,annotationMode:Te,textLayerMode:Le}=oe(this,H,si).call(this,we);if(Le!==c.TextLayerMode.DISABLE){const Ne=ye(this,ue,document.createElement("div"));Ne.id="hiddenCopyElement",this.viewer.before(Ne)}if(Re!==u.AnnotationEditorType.DISABLE){const Ne=Re;V.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):C(Ne)?(ye(this,I,new u.AnnotationEditorUIManager(this.container,this.eventBus,V==null?void 0:V.annotationStorage)),Ne!==u.AnnotationEditorType.NONE&&A(this,I).updateMode(Ne)):console.error(`Invalid AnnotationEditor mode: ${Ne}`)}const Oe=oe(this,ee,ii).bind(this),Ie=this._scrollMode===c.ScrollMode.PAGE?null:this.viewer,Fe=this.currentScale,Be=be.getViewport({scale:Fe*u.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Be.scale);for(let Ne=1;Ne<=F;++Ne){const je=new k.PDFPageView({container:Ie,eventBus:this.eventBus,id:Ne,scale:Fe,defaultViewport:Be.clone(),optionalContentConfigPromise:ce,renderingQueue:this.renderingQueue,textLayerMode:Le,annotationMode:Te,imageResourcesPath:this.imageResourcesPath,useOnlyCssZoom:this.useOnlyCssZoom,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:Oe});this._pages.push(je)}const He=this._pages[0];He&&(He.setPdfPage(be),this.linkService.cachePageRef(1,be.ref)),this._scrollMode===c.ScrollMode.PAGE?oe(this,K,pt).call(this):this._spreadMode!==c.SpreadMode.NONE&&this._updateSpreadMode(),oe(this,ne,ri).call(this).then(async()=>{var je,Ve;if((je=this.findController)==null||je.setDocument(V),(Ve=this._scriptingManager)==null||Ve.setDocument(V),A(this,ue)&&(ye(this,q,oe(this,he,ai).bind(this,Le)),document.addEventListener("copy",A(this,q))),A(this,I)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:A(this,h)}),V.loadingParams.disableAutoFetch||F>b.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let Ne=F-1;if(Ne<=0){this._pagesCapability.resolve();return}for(let Ue=2;Ue<=F;++Ue){const We=V.getPage(Ue).then(Ge=>{const Je=this._pages[Ue-1];Je.pdfPage||Je.setPdfPage(Ge),this.linkService.cachePageRef(Ue,Ge.ref),--Ne===0&&this._pagesCapability.resolve()},Ge=>{console.error(`Unable to get page ${Ue} to initialize viewer`,Ge),--Ne===0&&this._pagesCapability.resolve()});Ue%b.PAUSE_EAGER_PAGE_INIT===0&&await We}}),this.eventBus.dispatch("pagesinit",{source:this}),V.getMetadata().then(({info:Ne})=>{V===this.pdfDocument&&Ne.Language&&(this.viewer.lang=Ne.Language)}),this.defaultRenderingQueue&&this.update()}).catch(be=>{console.error("Unable to initialize viewer",be),this._pagesCapability.reject(be)})}setPageLabels(V){var F,U;if(!!this.pdfDocument){V?Array.isArray(V)&&this.pdfDocument.numPages===V.length?this._pageLabels=V:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let ce=0,me=this._pages.length;ce<me;ce++)this._pages[ce].setPageLabel((U=(F=this._pageLabels)==null?void 0:F[ce])!=null?U:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=c.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,ye(this,s,new y(d)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new u.PromiseCapability,this._onePageRenderedCapability=new u.PromiseCapability,this._pagesCapability=new u.PromiseCapability,this._scrollMode=c.ScrollMode.VERTICAL,this._previousScrollMode=c.ScrollMode.UNKNOWN,this._spreadMode=c.SpreadMode.NONE,ye(this,Ae,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),A(this,X)&&(document.removeEventListener("visibilitychange",A(this,X)),ye(this,X,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),A(this,ue)&&(document.removeEventListener("copy",A(this,q)),ye(this,q,null),A(this,ue).remove(),ye(this,ue,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(V){if(!this._pageLabels)return null;const F=this._pageLabels.indexOf(V);return F<0?null:F+1}scrollPageIntoView({pageNumber:V,destArray:F=null,allowNegativeOffset:U=!1,ignoreDestinationZoom:ce=!1}){if(!this.pdfDocument)return;const me=Number.isInteger(V)&&this._pages[V-1];if(!me){console.error(`scrollPageIntoView: "${V}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!F){this._setCurrentPageNumber(V,!0);return}let fe=0,ge=0,be=0,we=0,Re,Te;const Le=me.rotation%180!==0,Oe=(Le?me.height:me.width)/me.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS,Ie=(Le?me.width:me.height)/me.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS;let Fe=0;switch(F[1].name){case"XYZ":fe=F[2],ge=F[3],Fe=F[4],fe=fe!==null?fe:0,ge=ge!==null?ge:Ie;break;case"Fit":case"FitB":Fe="page-fit";break;case"FitH":case"FitBH":ge=F[2],Fe="page-width",ge===null&&this._location?(fe=this._location.left,ge=this._location.top):(typeof ge!="number"||ge<0)&&(ge=Ie);break;case"FitV":case"FitBV":fe=F[2],be=Oe,we=Ie,Fe="page-height";break;case"FitR":fe=F[2],ge=F[3],be=F[4]-fe,we=F[5]-ge;let je=c.SCROLLBAR_PADDING,Ve=c.VERTICAL_PADDING;this.removePageBorders&&(je=Ve=0),Re=(this.container.clientWidth-je)/be/u.PixelsPerInch.PDF_TO_CSS_UNITS,Te=(this.container.clientHeight-Ve)/we/u.PixelsPerInch.PDF_TO_CSS_UNITS,Fe=Math.min(Math.abs(Re),Math.abs(Te));break;default:console.error(`scrollPageIntoView: "${F[1].name}" is not a valid destination type.`);return}if(ce||(Fe&&Fe!==this._currentScale?this.currentScaleValue=Fe:this._currentScale===c.UNKNOWN_SCALE&&(this.currentScaleValue=c.DEFAULT_SCALE_VALUE)),Fe==="page-fit"&&!F[4]){oe(this,i,Tt).call(this,me);return}const Be=[me.viewport.convertToViewportPoint(fe,ge),me.viewport.convertToViewportPoint(fe+be,ge+we)];let He=Math.min(Be[0][0],Be[1][0]),Ne=Math.min(Be[0][1],Be[1][1]);U||(He=Math.max(He,0),Ne=Math.max(Ne,0)),oe(this,i,Tt).call(this,me,{left:He,top:Ne})}_updateLocation(V){const F=this._currentScale,U=this._currentScaleValue,ce=parseFloat(U)===F?Math.round(F*1e4)/100:U,me=V.id,fe=this._pages[me-1],ge=this.container,be=fe.getPagePoint(ge.scrollLeft-V.x,ge.scrollTop-V.y),we=Math.round(be[0]),Re=Math.round(be[1]);let Te=`#page=${me}`;this.isInPresentationMode||(Te+=`&zoom=${ce},${we},${Re}`),this._location={pageNumber:me,scale:ce,top:Re,left:we,rotation:this._pagesRotation,pdfOpenParams:Te}}update(){const V=this._getVisiblePages(),F=V.views,U=F.length;if(U===0)return;const ce=Math.max(d,2*U+1);A(this,s).resize(ce,V.ids),this.renderingQueue.renderHighestPriority(V);const me=this._spreadMode===c.SpreadMode.NONE&&(this._scrollMode===c.ScrollMode.PAGE||this._scrollMode===c.ScrollMode.VERTICAL),fe=this._currentPageNumber;let ge=!1;for(const be of F){if(be.percent<100)break;if(be.id===fe&&me){ge=!0;break}}this._setCurrentPageNumber(ge?fe:F[0].id),this._updateLocation(V.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(V){return this.container.contains(V)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===c.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===c.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const V=this._scrollMode===c.ScrollMode.PAGE?A(this,Ae).pages:this._pages,F=this._scrollMode===c.ScrollMode.HORIZONTAL,U=F&&this._isContainerRtl;return(0,c.getVisibleElements)({scrollEl:this.container,views:V,sortByVisibility:!0,horizontal:F,rtl:U})}isPageVisible(V){return this.pdfDocument?Number.isInteger(V)&&V>0&&V<=this.pagesCount?this._getVisiblePages().ids.has(V):(console.error(`isPageVisible: "${V}" is not a valid page.`),!1):!1}isPageCached(V){if(!this.pdfDocument)return!1;if(!(Number.isInteger(V)&&V>0&&V<=this.pagesCount))return console.error(`isPageCached: "${V}" is not a valid page.`),!1;const F=this._pages[V-1];return A(this,s).has(F)}cleanup(){for(const V of this._pages)V.renderingState!==c.RenderingStates.FINISHED&&V.reset()}_cancelRendering(){for(const V of this._pages)V.cancelRendering()}forceRendering(V){const F=V||this._getVisiblePages(),U=oe(this,Ce,ui).call(this,F),ce=this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL,me=this.renderingQueue.getHighestPriority(F,this._pages,U,ce);return me?(oe(this,pe,ci).call(this,me).then(()=>{this.renderingQueue.renderView(me)}),!0):!1}get hasEqualPageSizes(){const V=this._pages[0];for(let F=1,U=this._pages.length;F<U;++F){const ce=this._pages[F];if(ce.width!==V.width||ce.height!==V.height)return!1}return!0}getPagesOverview(){let V;return this._pages.map(F=>{const U=F.pdfPage.getViewport({scale:1}),ce=(0,c.isPortraitOrientation)(U);if(V===void 0)V=ce;else if(this.enablePrintAutoRotate&&ce!==V)return{width:U.height,height:U.width,rotation:(U.rotation-90)%360};return{width:U.width,height:U.height,rotation:U.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(V){if(!(V instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${V}`);!this.pdfDocument||!this._optionalContentConfigPromise||(this._optionalContentConfigPromise=V,this.refresh(!1,{optionalContentConfigPromise:V}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:V}))}get scrollMode(){return this._scrollMode}set scrollMode(V){if(this._scrollMode!==V){if(!(0,c.isValidScrollMode)(V))throw new Error(`Invalid scroll mode: ${V}`);this.pagesCount>b.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=V,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:V}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(V=null){const F=this._scrollMode,U=this.viewer;U.classList.toggle("scrollHorizontal",F===c.ScrollMode.HORIZONTAL),U.classList.toggle("scrollWrapped",F===c.ScrollMode.WRAPPED),!(!this.pdfDocument||!V)&&(F===c.ScrollMode.PAGE?oe(this,K,pt).call(this):this._previousScrollMode===c.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&oe(this,$,et).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(V,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(V){if(this._spreadMode!==V){if(!(0,c.isValidSpreadMode)(V))throw new Error(`Invalid spread mode: ${V}`);this._spreadMode=V,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:V}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(V=null){if(!this.pdfDocument)return;const F=this.viewer,U=this._pages;if(this._scrollMode===c.ScrollMode.PAGE)oe(this,K,pt).call(this);else if(F.textContent="",this._spreadMode===c.SpreadMode.NONE)for(const ce of this._pages)F.append(ce.div);else{const ce=this._spreadMode-1;let me=null;for(let fe=0,ge=U.length;fe<ge;++fe)me===null?(me=document.createElement("div"),me.className="spread",F.append(me)):fe%2===ce&&(me=me.cloneNode(!1),F.append(me)),me.append(U[fe].div)}!V||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&oe(this,$,et).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(V,!0),this.update())}_getPageAdvance(V,F=!1){switch(this._scrollMode){case c.ScrollMode.WRAPPED:{const{views:U}=this._getVisiblePages(),ce=new Map;for(const{id:me,y:fe,percent:ge,widthPercent:be}of U){if(ge===0||be<100)continue;let we=ce.get(fe);we||ce.set(fe,we||(we=[])),we.push(me)}for(const me of ce.values()){const fe=me.indexOf(V);if(fe===-1)continue;const ge=me.length;if(ge===1)break;if(F)for(let be=fe-1,we=0;be>=we;be--){const Re=me[be],Te=me[be+1]-1;if(Re<Te)return V-Te}else for(let be=fe+1,we=ge;be<we;be++){const Re=me[be],Te=me[be-1]+1;if(Re>Te)return Te-V}if(F){const be=me[0];if(be<V)return V-be+1}else{const be=me[ge-1];if(be>V)return be-V+1}break}break}case c.ScrollMode.HORIZONTAL:break;case c.ScrollMode.PAGE:case c.ScrollMode.VERTICAL:{if(this._spreadMode===c.SpreadMode.NONE)break;const U=this._spreadMode-1;if(F&&V%2!==U)break;if(!F&&V%2===U)break;const{views:ce}=this._getVisiblePages(),me=F?V-1:V+1;for(const{id:fe,percent:ge,widthPercent:be}of ce)if(fe===me){if(ge>0&&be===100)return 2;break}break}}return 1}nextPage(){const V=this._currentPageNumber,F=this.pagesCount;if(V>=F)return!1;const U=this._getPageAdvance(V,!1)||1;return this.currentPageNumber=Math.min(V+U,F),!0}previousPage(){const V=this._currentPageNumber;if(V<=1)return!1;const F=this._getPageAdvance(V,!0)||1;return this.currentPageNumber=Math.max(V-F,1),!0}increaseScale({drawingDelay:V,scaleFactor:F,steps:U}={}){if(!this.pdfDocument)return;let ce=this._currentScale;if(F>1)ce=Math.round(ce*F*100)/100;else{U!=null||(U=1);do ce=Math.ceil((ce*c.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--U>0&&ce<c.MAX_SCALE)}oe(this,$,et).call(this,Math.min(c.MAX_SCALE,ce),{noScroll:!1,drawingDelay:V})}decreaseScale({drawingDelay:V,scaleFactor:F,steps:U}={}){if(!this.pdfDocument)return;let ce=this._currentScale;if(F>0&&F<1)ce=Math.round(ce*F*100)/100;else{U!=null||(U=1);do ce=Math.floor((ce/c.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--U>0&&ce>c.MIN_SCALE)}oe(this,$,et).call(this,Math.max(c.MIN_SCALE,ce),{noScroll:!1,drawingDelay:V})}get containerTopLeft(){return A(this,B)||ye(this,B,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return A(this,I)?A(this,h):u.AnnotationEditorType.DISABLE}set annotationEditorMode(V){if(!A(this,I))throw new Error("The AnnotationEditor is not enabled.");if(A(this,h)!==V){if(!C(V))throw new Error(`Invalid AnnotationEditor mode: ${V}`);!this.pdfDocument||(ye(this,h,V),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:V}),A(this,I).updateMode(V))}}set annotationEditorParams({type:V,value:F}){if(!A(this,I))throw new Error("The AnnotationEditor is not enabled.");A(this,I).updateParams(V,F)}refresh(V=!1,F=Object.create(null)){if(!!this.pdfDocument){for(const U of this._pages)U.update(F);A(this,Ee)!==null&&(clearTimeout(A(this,Ee)),ye(this,Ee,null)),V||this.update()}}}s=new WeakMap,h=new WeakMap,I=new WeakMap,f=new WeakMap,B=new WeakMap,q=new WeakMap,G=new WeakMap,Q=new WeakMap,ue=new WeakMap,ae=new WeakMap,le=new WeakMap,_e=new WeakMap,Ae=new WeakMap,X=new WeakMap,Ee=new WeakMap,Se=new WeakMap,ee=new WeakSet,ii=function(){const V=this;return{get annotationEditorUIManager(){return A(V,I)},get annotationStorage(){var F;return(F=V.pdfDocument)==null?void 0:F.annotationStorage},get downloadManager(){return V.downloadManager},get enableScripting(){return!!V._scriptingManager},get fieldObjectsPromise(){var F;return(F=V.pdfDocument)==null?void 0:F.getFieldObjects()},get findController(){return V.findController},get hasJSActionsPromise(){var F;return(F=V.pdfDocument)==null?void 0:F.hasJSActions()},get linkService(){return V.linkService}}},H=new WeakSet,si=function(V){const F={annotationEditorMode:A(this,h),annotationMode:A(this,f),textLayerMode:A(this,Se)};return V&&(!V.includes(u.PermissionFlag.COPY)&&A(this,Se)===c.TextLayerMode.ENABLE&&(F.textLayerMode=c.TextLayerMode.ENABLE_PERMISSIONS),V.includes(u.PermissionFlag.MODIFY_CONTENTS)||(F.annotationEditorMode=u.AnnotationEditorType.DISABLE),!V.includes(u.PermissionFlag.MODIFY_ANNOTATIONS)&&!V.includes(u.PermissionFlag.FILL_INTERACTIVE_FORMS)&&A(this,f)===u.AnnotationMode.ENABLE_FORMS&&(F.annotationMode=u.AnnotationMode.ENABLE)),F},ne=new WeakSet,ri=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const V=new Promise(F=>{ye(this,X,()=>{document.visibilityState==="hidden"&&(F(),document.removeEventListener("visibilitychange",A(this,X)),ye(this,X,null))}),document.addEventListener("visibilitychange",A(this,X))});return Promise.race([this._onePageRenderedCapability.promise,V])},he=new WeakSet,ai=function(V,F){const U=document.getSelection(),{focusNode:ce,anchorNode:me}=U;if(me&&ce&&U.containsNode(A(this,ue))){if(A(this,Q)||V===c.TextLayerMode.ENABLE_PERMISSIONS){F.preventDefault(),F.stopPropagation();return}ye(this,Q,!0);const fe=this.container.style.cursor;this.container.style.cursor="wait";const ge=be=>ye(this,ae,be.key==="Escape");window.addEventListener("keydown",ge),this.getAllText().then(async be=>{be!==null&&await navigator.clipboard.writeText(be)}).catch(be=>{console.warn(`Something goes wrong when extracting the text: ${be.message}`)}).finally(()=>{ye(this,Q,!1),ye(this,ae,!1),window.removeEventListener("keydown",ge),this.container.style.cursor=fe}),F.preventDefault(),F.stopPropagation()}},K=new WeakSet,pt=function(){if(this._scrollMode!==c.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const V=this._currentPageNumber,F=A(this,Ae),U=this.viewer;if(U.textContent="",F.pages.length=0,this._spreadMode===c.SpreadMode.NONE&&!this.isInPresentationMode){const ce=this._pages[V-1];U.append(ce.div),F.pages.push(ce)}else{const ce=new Set,me=this._spreadMode-1;me===-1?ce.add(V-1):V%2!==me?(ce.add(V-1),ce.add(V)):(ce.add(V-2),ce.add(V-1));const fe=document.createElement("div");if(fe.className="spread",this.isInPresentationMode){const ge=document.createElement("div");ge.className="dummyPage",fe.append(ge)}for(const ge of ce){const be=this._pages[ge];!be||(fe.append(be.div),F.pages.push(be))}U.append(fe)}F.scrollDown=V>=F.previousPageNumber,F.previousPageNumber=V},i=new WeakSet,Tt=function(V,F=null){const{div:U,id:ce}=V;if(this._currentPageNumber!==ce&&this._setCurrentPageNumber(ce),this._scrollMode===c.ScrollMode.PAGE&&(oe(this,K,pt).call(this),this.update()),!F&&!this.isInPresentationMode){const me=U.offsetLeft+U.clientLeft,fe=me+U.clientWidth,{scrollLeft:ge,clientWidth:be}=this.container;(this._scrollMode===c.ScrollMode.HORIZONTAL||me<ge||fe>ge+be)&&(F={left:0,top:0})}(0,c.scrollIntoView)(U,F),!this._currentScaleValue&&this._location&&(this._location=null)},E=new WeakSet,oi=function(V){return V===this._currentScale||Math.abs(V-this._currentScale)<1e-15},D=new WeakSet,pn=function(V,F,{noScroll:U=!1,preset:ce=!1,drawingDelay:me=-1}){if(this._currentScaleValue=F.toString(),oe(this,E,oi).call(this,V)){ce&&this.eventBus.dispatch("scalechanging",{source:this,scale:V,presetValue:F});return}this.viewer.style.setProperty("--scale-factor",V*u.PixelsPerInch.PDF_TO_CSS_UNITS);const fe=me>=0&&me<1e3;if(this.refresh(!0,{scale:V,drawingDelay:fe?me:-1}),fe&&ye(this,Ee,setTimeout(()=>{ye(this,Ee,null),this.refresh()},me)),this._currentScale=V,!U){let ge=this._currentPageNumber,be;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(ge=this._location.pageNumber,be=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:ge,destArray:be,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:V,presetValue:ce?F:void 0}),this.defaultRenderingQueue&&this.update()},ie=new WeakSet,li=function(){return this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL?2:1},$=new WeakSet,et=function(V,F){let U=parseFloat(V);if(U>0)F.preset=!1,oe(this,D,pn).call(this,U,V,F);else{const ce=this._pages[this._currentPageNumber-1];if(!ce)return;let me=c.SCROLLBAR_PADDING,fe=c.VERTICAL_PADDING;this.isInPresentationMode?(me=fe=4,this._spreadMode!==c.SpreadMode.NONE&&(me*=2)):this.removePageBorders?me=fe=0:this._scrollMode===c.ScrollMode.HORIZONTAL&&([me,fe]=[fe,me]);const ge=(this.container.clientWidth-me)/ce.width*ce.scale/A(this,ie,li),be=(this.container.clientHeight-fe)/ce.height*ce.scale;switch(V){case"page-actual":U=1;break;case"page-width":U=ge;break;case"page-height":U=be;break;case"page-fit":U=Math.min(ge,be);break;case"auto":const we=(0,c.isPortraitOrientation)(ce)?ge:Math.min(be,ge);U=Math.min(c.MAX_AUTO_SCALE,we);break;default:console.error(`#setScale: "${V}" is an unknown zoom value.`);return}F.preset=!0,oe(this,D,pn).call(this,U,V,F)}},Y=new WeakSet,gn=function(){const V=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&oe(this,$,et).call(this,this._currentScaleValue,{noScroll:!0}),oe(this,i,Tt).call(this,V)},pe=new WeakSet,ci=async function(V){var F,U;if(V.pdfPage)return V.pdfPage;try{const ce=await this.pdfDocument.getPage(V.id);return V.pdfPage||V.setPdfPage(ce),(U=(F=this.linkService)._cachedPageNumber)!=null&&U.call(F,ce.ref)||this.linkService.cachePageRef(V.id,ce.ref),ce}catch(ce){return console.error("Unable to get page for page view",ce),null}},Ce=new WeakSet,ui=function(V){var F,U;if(((F=V.first)==null?void 0:F.id)===1)return!0;if(((U=V.last)==null?void 0:U.id)===this.pagesCount)return!1;switch(this._scrollMode){case c.ScrollMode.PAGE:return A(this,Ae).scrollDown;case c.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},ke=new WeakSet,mn=function(V=this.container.clientHeight){V!==A(this,le)&&(ye(this,le,V),c.docStyle.setProperty("--viewer-container-height",`${V}px`))},xe=new WeakSet,hi=function(V){for(const F of V)if(F.target===this.container){oe(this,ke,mn).call(this,Math.floor(F.borderBoxSize[0].blockSize)),ye(this,B,null);break}},_.PDFViewer=g},(v,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFRenderingQueue=void 0;var u=w(4),c=w(2);const O=3e4;class k{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(l){this.pdfViewer=l}setThumbnailViewer(l){this.pdfThumbnailViewer=l}isHighestPriority(l){return this.highestPriorityPage===l.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(l){var d;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(l)&&(this.isThumbnailViewEnabled&&((d=this.pdfThumbnailViewer)==null?void 0:d.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),O)))}getHighestPriority(l,d,b,C=!1){const y=l.views,g=y.length;if(g===0)return null;for(let s=0;s<g;s++){const h=y[s].view;if(!this.isViewFinished(h))return h}const S=l.first.id,M=l.last.id;if(M-S+1>g){const s=l.ids;for(let h=1,I=M-S;h<I;h++){const f=b?S+h:M-h;if(s.has(f))continue;const B=d[f-1];if(!this.isViewFinished(B))return B}}let P=b?M:S-2,R=d[P];return R&&!this.isViewFinished(R)||C&&(P+=b?1:-1,R=d[P],R&&!this.isViewFinished(R))?R:null}isViewFinished(l){return l.renderingState===c.RenderingStates.FINISHED}renderView(l){switch(l.renderingState){case c.RenderingStates.FINISHED:return!1;case c.RenderingStates.PAUSED:this.highestPriorityPage=l.renderingId,l.resume();break;case c.RenderingStates.RUNNING:this.highestPriorityPage=l.renderingId;break;case c.RenderingStates.INITIAL:this.highestPriorityPage=l.renderingId,l.draw().finally(()=>{this.renderHighestPriority()}).catch(d=>{d instanceof u.RenderingCancelledException||console.error(`renderView: "${d}"`)});break}return!0}}_.PDFRenderingQueue=k}],n={};function a(v){var _=n[v];if(_!==void 0)return _.exports;var w=n[v]={exports:{}};return r[v](w,w.exports,a),w.exports}var m={};return(()=>{var v=m;Object.defineProperty(v,"__esModule",{value:!0}),Object.defineProperty(v,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return u.AnnotationLayerBuilder}}),v.DefaultXfaLayerFactory=v.DefaultTextLayerFactory=v.DefaultStructTreeLayerFactory=v.DefaultAnnotationLayerFactory=void 0,Object.defineProperty(v,"DownloadManager",{enumerable:!0,get:function(){return c.DownloadManager}}),Object.defineProperty(v,"EventBus",{enumerable:!0,get:function(){return O.EventBus}}),Object.defineProperty(v,"GenericL10n",{enumerable:!0,get:function(){return k.GenericL10n}}),Object.defineProperty(v,"LinkTarget",{enumerable:!0,get:function(){return _.LinkTarget}}),Object.defineProperty(v,"NullL10n",{enumerable:!0,get:function(){return T.NullL10n}}),Object.defineProperty(v,"PDFFindController",{enumerable:!0,get:function(){return l.PDFFindController}}),Object.defineProperty(v,"PDFHistory",{enumerable:!0,get:function(){return d.PDFHistory}}),Object.defineProperty(v,"PDFLinkService",{enumerable:!0,get:function(){return _.PDFLinkService}}),Object.defineProperty(v,"PDFPageView",{enumerable:!0,get:function(){return b.PDFPageView}}),Object.defineProperty(v,"PDFScriptingManager",{enumerable:!0,get:function(){return C.PDFScriptingManager}}),Object.defineProperty(v,"PDFSinglePageViewer",{enumerable:!0,get:function(){return y.PDFSinglePageViewer}}),Object.defineProperty(v,"PDFViewer",{enumerable:!0,get:function(){return g.PDFViewer}}),Object.defineProperty(v,"ProgressBar",{enumerable:!0,get:function(){return w.ProgressBar}}),Object.defineProperty(v,"RenderingStates",{enumerable:!0,get:function(){return w.RenderingStates}}),Object.defineProperty(v,"ScrollMode",{enumerable:!0,get:function(){return w.ScrollMode}}),Object.defineProperty(v,"SimpleLinkService",{enumerable:!0,get:function(){return _.SimpleLinkService}}),Object.defineProperty(v,"SpreadMode",{enumerable:!0,get:function(){return w.SpreadMode}}),Object.defineProperty(v,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return S.StructTreeLayerBuilder}}),Object.defineProperty(v,"TextLayerBuilder",{enumerable:!0,get:function(){return M.TextLayerBuilder}}),Object.defineProperty(v,"XfaLayerBuilder",{enumerable:!0,get:function(){return P.XfaLayerBuilder}}),Object.defineProperty(v,"parseQueryString",{enumerable:!0,get:function(){return w.parseQueryString}});var _=a(1),w=a(2),u=a(3),c=a(6),O=a(7),k=a(8),T=a(5),l=a(10),d=a(12),b=a(13),C=a(21),y=a(23),g=a(24),S=a(16),M=a(19),P=a(20);class R{constructor(){throw new Error("The `DefaultAnnotationLayerFactory` has been removed, please use the `annotationMode` option when initializing the `PDFPageView`-instance to control AnnotationLayer rendering.")}}v.DefaultAnnotationLayerFactory=R;class s{constructor(){throw new Error("The `DefaultStructTreeLayerFactory` has been removed, this functionality is automatically enabled when the TextLayer is used.")}}v.DefaultStructTreeLayerFactory=s;class h{constructor(){throw new Error("The `DefaultTextLayerFactory` has been removed, please use the `textLayerMode` option when initializing the `PDFPageView`-instance to control TextLayer rendering.")}}v.DefaultTextLayerFactory=h;class I{constructor(){throw new Error("The `DefaultXfaLayerFactory` has been removed, please use the `enableXfa` option when calling the `getDocument`-function to control XfaLayer rendering.")}}v.DefaultXfaLayerFactory=I})(),m})())})(pdf_viewer);const _hoisted_1$d={class:"relative"},_hoisted_2$c=createBaseVNode("div",{id:"viewer",class:"pdfViewer"},null,-1),_hoisted_3$b=[_hoisted_2$c],_sfc_main$5=defineComponent({__name:"PDFDocument",props:{showSidebar:Boolean,pageScaleValue:{type:String,required:!0}},emits:["on-pdf-viewer-set"],setup(e,{emit:t}){const r=e,n=inject("pdf"),a=inject("eventBus"),m=inject("pdfLinkService"),v=inject("pdfFindController"),_=ref(null),w=ref(null);watch(()=>r.pageScaleValue,c=>{toRaw(w.value).currentScaleValue=c});const u=()=>{const c=toRaw(w.value).currentScaleValue;!c||(toRaw(w.value).refresh(),(c==="auto"||c==="page-fit"||c==="page-width")&&(toRaw(w.value).currentScaleValue=c),toRaw(w.value).update())};return onMounted(()=>{window.addEventListener("resize",u),w.value=new pdf_viewer.exports.PDFViewer({container:_.value,eventBus:a,linkService:m,findController:v}),toRaw(m).setViewer(toRaw(w.value)),a.on("pagesinit",()=>{setTimeout(()=>{toRaw(w.value).currentScaleValue="auto"},0)}),toRaw(w.value).setDocument(toRaw(n.value)),toRaw(m).setDocument(toRaw(n.value),null),t("on-pdf-viewer-set",toRaw(w.value))}),onBeforeUnmount(()=>window.removeEventListener("resize",u)),(c,O)=>{const k=__unplugin_components_0$2;return openBlock(),createElementBlock("section",{class:"overflow-hidden flex-1 bg-[#f1f5f9] grid transition-all duration-75 ease-in",style:normalizeStyle({"grid-template-columns":`${e.showSidebar?"8rem":"0rem"} 1fr`})},[(openBlock(),createBlock(Suspense,null,{default:withCtx(()=>[createVNode(k,{class:normalizeClass(["transition-all duration-75 ease-in-out",{opacity:+e.showSidebar}])},null,8,["class"])]),_:1})),createBaseVNode("div",_hoisted_1$d,[createBaseVNode("div",{id:"viewerContainer",ref_key:"containerRef",ref:_},_hoisted_3$b,512)])],4)}}}),PDFDocument_vue_vue_type_style_index_0_lang="",_hoisted_1$c={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$b=createBaseVNode("path",{fill:"currentColor",d:"M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"},null,-1),_hoisted_3$a=[_hoisted_2$b];function render$8(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$c,_hoisted_3$a)}const __unplugin_components_8={name:"carbon-download",render:render$8},_hoisted_1$b={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$a=createBaseVNode("path",{fill:"currentColor",d:"m29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9Z"},null,-1),_hoisted_3$9=[_hoisted_2$a];function render$7(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$b,_hoisted_3$9)}const __unplugin_components_7={name:"carbon-search",render:render$7},_hoisted_1$a={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$9=createBaseVNode("path",{fill:"currentColor",d:"M22 16h2V8h-8v2h6v6zM8 24h8v-2h-6v-6H8v8z"},null,-1),_hoisted_3$8=createBaseVNode("path",{fill:"currentColor",d:"M26 28H6a2.002 2.002 0 0 1-2-2V6a2.002 2.002 0 0 1 2-2h20a2.002 2.002 0 0 1 2 2v20a2.002 2.002 0 0 1-2 2ZM6 6v20h20.001L26 6Z"},null,-1),_hoisted_4$4=[_hoisted_2$9,_hoisted_3$8];function render$6(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$a,_hoisted_4$4)}const __unplugin_components_6={name:"carbon-fit-to-screen",render:render$6},_hoisted_1$9={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$8=createBaseVNode("path",{fill:"currentColor",d:"m22 11l-1.41 1.41L23.17 15H8.83l2.58-2.59L10 11l-5 5l5 5l1.41-1.41L8.83 17h14.34l-2.58 2.59L22 21l5-5l-5-5z"},null,-1),_hoisted_3$7=createBaseVNode("path",{fill:"currentColor",d:"M28 30H4a2.002 2.002 0 0 1-2-2V4a2.002 2.002 0 0 1 2-2h24a2.002 2.002 0 0 1 2 2v24a2.002 2.002 0 0 1-2 2ZM4 4v24h24V4Z"},null,-1),_hoisted_4$3=[_hoisted_2$8,_hoisted_3$7];function render$5(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$9,_hoisted_4$3)}const __unplugin_components_5={name:"carbon-fit-to-width",render:render$5},_hoisted_1$8={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$7=createBaseVNode("path",{fill:"currentColor",d:"M18 12h-4V8h-2v4H8v2h4v4h2v-4h4v-2z"},null,-1),_hoisted_3$6=createBaseVNode("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),_hoisted_4$2=[_hoisted_2$7,_hoisted_3$6];function render$4(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$8,_hoisted_4$2)}const __unplugin_components_4={name:"carbon-zoom-in",render:render$4},_hoisted_1$7={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$6=createBaseVNode("path",{fill:"currentColor",d:"M8 12h10v2H8z"},null,-1),_hoisted_3$5=createBaseVNode("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),_hoisted_4$1=[_hoisted_2$6,_hoisted_3$5];function render$3(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$7,_hoisted_4$1)}const __unplugin_components_3={name:"carbon-zoom-out",render:render$3},_hoisted_1$6={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$5=createBaseVNode("path",{fill:"currentColor",d:"M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"},null,-1),_hoisted_3$4=[_hoisted_2$5];function render$2(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$6,_hoisted_3$4)}const __unplugin_components_2={name:"carbon-chevron-down",render:render$2},_hoisted_1$5={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_hoisted_2$4=createBaseVNode("path",{fill:"currentColor",d:"m16 10l10 10l-1.4 1.4l-8.6-8.6l-8.6 8.6L6 20z"},null,-1),_hoisted_3$3=[_hoisted_2$4];function render$1(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$5,_hoisted_3$3)}const __unplugin_components_1={name:"carbon-chevron-up",render:render$1},_hoisted_1$4={viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"},_hoisted_2$3=createBaseVNode("path",{fill:"currentColor",d:"M10.25 7A6.25 6.25 0 0 0 4 13.25v21.5A6.25 6.25 0 0 0 10.25 41h27.5A6.25 6.25 0 0 0 44 34.75v-21.5A6.25 6.25 0 0 0 37.75 7h-27.5ZM6.5 13.25a3.75 3.75 0 0 1 3.75-3.75h5.5v29h-5.5a3.75 3.75 0 0 1-3.75-3.75v-21.5ZM18.25 38.5v-29h19.5a3.75 3.75 0 0 1 3.75 3.75v21.5a3.75 3.75 0 0 1-3.75 3.75h-19.5Z"},null,-1),_hoisted_3$2=[_hoisted_2$3];function render(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$4,_hoisted_3$2)}const __unplugin_components_0$1={name:"fluent-panel-left48-regular",render},_withScopeId=e=>(pushScopeId("data-v-35f4e51b"),e=e(),popScopeId(),e),_hoisted_1$3={class:"relative flex items-center justify-between shadow-md gap-1 p-1 z-40"},_hoisted_2$2={class:"flex md:w-1/3 items-center gap-x-2"},_hoisted_3$1={class:"flex items-center"},_hoisted_4=["disabled"],_hoisted_5=["disabled"],_hoisted_6={class:"flex items-center ml-2"},_hoisted_7=["value","max","onChange"],_hoisted_8={class:"text-gray-600 font-thin ml-2 text-sm whitespace-nowrap"},_hoisted_9={class:"flex items-center ml-2 gap-1"},_hoisted_10=["disabled"],_hoisted_11=["disabled"],_hoisted_12={class:"md:w-1/3 hidden lg:flex justify-center"},_hoisted_13=["title"],_hoisted_14={class:"flex md:w-1/3 items-center justify-end gap-x-2"},_hoisted_15=["onClick"],_hoisted_16=["href"],_hoisted_17={class:"bg-white p-1 px-2 z-40 shadow-xl rounded absolute top-full border right-0"},_hoisted_18={class:"flex flex-col space-y-1 py-1"},_hoisted_19={class:"space-x-2 flex items-center"},_hoisted_20={class:"flex flex-row gap-1"},_hoisted_21={class:"relative w-full"},_hoisted_22=["onKeyup"],_hoisted_23={key:0,class:"absolute inset-y-0 right-2 my-1 text-xs text-gray-500"},_hoisted_24={key:0,class:"bg-green-100 w-full h-full flex items-center rounded px-2 text-green-400"},_hoisted_25={key:1,class:"bg-red-100 w-full h-full flex items-center rounded px-2 text-red-400"},_hoisted_26=_withScopeId(()=>createBaseVNode("span",null,"Phrase not found",-1)),_hoisted_27=[_hoisted_26],_hoisted_28={key:2,class:"bg-amber-100 w-full h-full flex items-center rounded px-2 text-amber-500"},_sfc_main$4=defineComponent({__name:"PDFNavbar",props:{title:{type:String,required:!0},numPages:{type:Number,required:!0,default:1},showSidebar:Boolean,pageScaleValue:{type:String,required:!0,validator:e=>["page-width","page-fit"].includes(e)},pageZoom:{type:Number,required:!0,default:1,validator:e=>e>=.1&&e<=10}},emits:["on-zoom-in","on-zoom-out","on-page-prev","on-page-next","on-page-change","on-toggle-sidebar","on-page-scale-change"],setup(e,{emit:t}){const r=e,n=inject("pdfLinkService"),a=inject("eventBus"),m=.1,v=10,_={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},w=ref(1),u=ref(!1),c=ref(""),O=ref(0),k=ref(0),T=ref(0),l=ref(!0),d=ref(!1),b=ref(!1),C=ref(!1),y=computed(()=>({type:"",query:c.value,caseSensitive:d.value,entireWord:C.value,highlightAll:l.value,findPrevious:!1,matchDiacritics:b.value})),g=ref(null),S=(q,G=!1)=>{a.dispatch("find",{...y.value,type:q,findPrevious:G})},M=q=>{S("again",q.shiftKey)},P=()=>{S("again",!0)},R=()=>{S("again")},s=async()=>{u.value=!u.value,u.value?(await nextTick(),g.value.focus()):a.dispatch("find",{...y.value,query:""})},h=()=>{a.dispatch("find",y.value)},I=q=>{const G=w.value,Q=+q.target.value,ue=Q<1||Q>r.numPages?G:Q;w.value=ue,q.target.value=ue,n.goToPage(ue)};watch([l,d,b,C],()=>{h()});function f(q){const G=q.target,Q=G.tagName;return G.isContentEditable||Q==="INPUT"||Q==="SELECT"||Q==="TEXTAREA"}const B=q=>{(q.key==="Escape"&&u.value||q.key.toLowerCase()==="f"&&(q.metaKey||q.ctrlKey)||!f(q)&&q.key==="/"&&!u.value)&&(q.preventDefault(),s())};return onMounted(()=>{window.addEventListener("keydown",B),a.on("pagechanging",({pageNumber:q})=>w.value=q),a.on("updatefindmatchescount",({matchesCount:q})=>{const{current:G,total:Q}=q;k.value=G,O.value=Q}),a.on("updatefindcontrolstate",({matchesCount:q,state:G})=>{const{current:Q,total:ue}=q;k.value=Q,O.value=ue,T.value=G})}),onBeforeUnmount(()=>{window.removeEventListener("keydown",B)}),(q,G)=>{const Q=__unplugin_components_0$1,ue=__unplugin_components_1,ae=__unplugin_components_2,le=__unplugin_components_3,_e=__unplugin_components_4,Ae=__unplugin_components_5,X=__unplugin_components_6,Ee=__unplugin_components_7,Se=__unplugin_components_8;return openBlock(),createElementBlock("nav",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("button",{class:normalizeClass(["p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90 text-gray-500",{"bg-sky-100":e.showSidebar}]),onClick:G[0]||(G[0]=ee=>q.$emit("on-toggle-sidebar"))},[createVNode(Q,{class:"w-5 h-5"})],2),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("button",{class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 enabled:active:scale-90 text-gray-500 disabled:opacity-75 disabled:cursor-default",disabled:w.value===1,onClick:G[1]||(G[1]=ee=>q.$emit("on-page-prev"))},[createVNode(ue,{class:"w-5 h-5"})],8,_hoisted_4),createBaseVNode("button",{class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 enabled:active:scale-90 text-gray-500 disabled:opacity-75 disabled:cursor-default",disabled:w.value===e.numPages,onClick:G[2]||(G[2]=ee=>q.$emit("on-page-next"))},[createVNode(ae,{class:"w-5 h-5"})],8,_hoisted_5),createBaseVNode("div",_hoisted_6,[createBaseVNode("input",{value:w.value,type:"number",min:"1",max:e.numPages,class:"text-gray-600 appearance-none m-0 w-14 text-sm text-center border-2 rounded",onFocus:G[3]||(G[3]=ee=>ee.target.select()),onChange:withModifiers(I,["prevent","stop"])},null,40,_hoisted_7),createBaseVNode("span",_hoisted_8,"of "+toDisplayString(e.numPages),1)])]),createBaseVNode("div",_hoisted_9,[createBaseVNode("button",{class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 enabled:active:scale-90 text-gray-500 disabled:opacity-75 disabled:cursor-default",disabled:e.pageZoom===m,onClick:G[4]||(G[4]=ee=>t("on-zoom-out"))},[createVNode(le)],8,_hoisted_10),createBaseVNode("button",{class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 enabled:active:scale-90 text-gray-500 disabled:opacity-75 disabled:cursor-default",disabled:e.pageZoom===v,onClick:G[5]||(G[5]=ee=>t("on-zoom-in"))},[createVNode(_e)],8,_hoisted_11),e.pageScaleValue==="page-fit"?(openBlock(),createElementBlock("button",{key:0,class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90 text-gray-500",onClick:G[6]||(G[6]=ee=>q.$emit("on-page-scale-change","page-width"))},[createVNode(Ae)])):(openBlock(),createElementBlock("button",{key:1,class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90 text-gray-500",onClick:G[7]||(G[7]=ee=>q.$emit("on-page-scale-change","page-fit"))},[createVNode(X)]))])]),createBaseVNode("div",_hoisted_12,[createBaseVNode("p",{class:"text-center font-medium text-gray-700 text-md truncate",title:e.title},toDisplayString(e.title),9,_hoisted_13)]),createBaseVNode("div",_hoisted_14,[createBaseVNode("button",{class:normalizeClass(["relative p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90 text-gray-500",{"bg-sky-100":u.value}]),onClick:withModifiers(s,["stop","prevent"])},[createVNode(Ee)],10,_hoisted_15),createBaseVNode("a",{class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90 text-gray-500",href:e.title,download:""},[createVNode(Se)],8,_hoisted_16)]),withDirectives(createBaseVNode("div",_hoisted_17,[createBaseVNode("div",_hoisted_18,[createBaseVNode("div",_hoisted_19,[createBaseVNode("button",{class:normalizeClass(["text-xs bg-gray-50 p-1 px-2 rounded text-gray-600 select-none transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90",{"bg-sky-100 hover:bg-sky-100":l.value}]),onClick:G[8]||(G[8]=ee=>l.value=!l.value)}," Highlight All ",2),createBaseVNode("button",{class:normalizeClass(["text-xs bg-gray-50 p-1 px-2 rounded text-gray-600 select-none transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90",{"bg-sky-100 hover:bg-sky-100":d.value}]),onClick:G[9]||(G[9]=ee=>d.value=!d.value)}," Match Case ",2),createBaseVNode("button",{class:normalizeClass(["text-xs bg-gray-50 p-1 px-2 rounded text-gray-600 select-none transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90",{"bg-sky-100 hover:bg-sky-100":b.value}]),onClick:G[10]||(G[10]=ee=>b.value=!b.value)}," Match Diacritics ",2),createBaseVNode("button",{class:normalizeClass(["text-xs bg-gray-50 p-1 px-2 rounded text-gray-600 select-none transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90",{"bg-sky-100 hover:bg-sky-100":C.value}]),onClick:G[11]||(G[11]=ee=>C.value=!C.value)}," Whole Words ",2)]),createBaseVNode("div",_hoisted_20,[createBaseVNode("div",_hoisted_21,[withDirectives(createBaseVNode("input",{id:"search",ref_key:"searchInput",ref:g,"onUpdate:modelValue":G[12]||(G[12]=ee=>c.value=ee),type:"text",class:"w-full border-2 border-sky-500 focus:outline-none rounded px-1",placeholder:"Find in document...",onInput:h,onKeyup:withKeys(M,["enter"])},null,40,_hoisted_22),[[vModelText,c.value]]),c.value?(openBlock(),createElementBlock("div",_hoisted_23,[T.value===_.FOUND||T.value===_.WRAPPED?(openBlock(),createElementBlock("div",_hoisted_24,[createBaseVNode("span",null,toDisplayString(k.value)+" of "+toDisplayString(O.value),1)])):T.value===_.NOT_FOUND?(openBlock(),createElementBlock("div",_hoisted_25,_hoisted_27)):T.value===_.PENDING?(openBlock(),createElementBlock("div",_hoisted_28," Loading ")):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("button",{class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90 text-gray-500",onClick:P},[createVNode(ue,{class:"w-5 h-5"})]),createBaseVNode("button",{class:"p-1 rounded transition-all duration-75 ease-in hover:bg-gray-200 active:scale-90 text-gray-500",onClick:R},[createVNode(ae,{class:"w-5 h-5"})])])])],512),[[vShow,u.value]])])}}}),PDFNavbar_vue_vue_type_style_index_0_scoped_35f4e51b_lang="",__unplugin_components_0=_export_sfc(_sfc_main$4,[["__scopeId","data-v-35f4e51b"]]);var pdfExports=requirePdf();const _hoisted_1$2={id:"pdf-document",class:"relative flex flex-col h-screen"},_hoisted_2$1={key:1,class:"font-thin text-2xl text-center text-gray-800 h-40 m-auto"},_sfc_main$3=defineComponent({__name:"PDFViewer",props:{url:{type:String,required:!0}},setup(e){const t=e;pdfExports.GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${pdfExports.version}/build/pdf.worker.min.js`;const r=ref("page-width"),n=ref(1),a=ref(null),m=ref(!0),v=ref(null),_=T=>{v.value=T},w=T=>{r.value=T},u=new pdf_viewer.exports.EventBus,c=new pdf_viewer.exports.PDFLinkService({eventBus:u}),O=new pdf_viewer.exports.PDFFindController({eventBus:u,linkService:c});provide("pdf",a),provide("eventBus",u),provide("pdfLinkService",c),provide("pdfFindController",O),onMounted(async()=>{const l=await pdfExports.getDocument({url:t.url,cMapUrl:`https://unpkg.com/pdfjs-dist@${pdfExports.version}/cmaps/`,cMapPacked:!0,enableXfa:!0}).promise;a.value=l,u.on("scalechanging",({scale:d})=>{n.value=d})});const k=()=>m.value=!m.value;return(T,l)=>{var C;const d=__unplugin_components_0,b=_sfc_main$5;return openBlock(),createElementBlock("div",_hoisted_1$2,[createVNode(d,{title:unref(pdfExports.getFilenameFromUrl)(e.url),"num-pages":(C=a.value)==null?void 0:C.numPages,"show-sidebar":m.value,"page-scale-value":r.value,"page-zoom":n.value,onOnToggleSidebar:k,onOnPagePrev:l[0]||(l[0]=y=>{var g;return(g=toRaw(v.value))==null?void 0:g.previousPage()}),onOnPageNext:l[1]||(l[1]=y=>{var g;return(g=toRaw(v.value))==null?void 0:g.nextPage()}),onOnZoomIn:l[2]||(l[2]=y=>{var g;return(g=toRaw(v.value))==null?void 0:g.increaseScale()}),onOnZoomOut:l[3]||(l[3]=y=>{var g;return(g=toRaw(v.value))==null?void 0:g.decreaseScale()}),onOnPageScaleChange:w},null,8,["title","num-pages","show-sidebar","page-scale-value","page-zoom"]),a.value?(openBlock(),createBlock(b,{key:0,"show-sidebar":m.value,"page-scale-value":r.value,onOnPdfViewerSet:_},null,8,["show-sidebar","page-scale-value"])):(openBlock(),createElementBlock("div",_hoisted_2$1," Loading... "))])}}}),_hoisted_1$1={key:1,class:"content"},_sfc_main$2=defineComponent({__name:"PDFComponent",props:{url:{type:String,required:!0},loading:Boolean},setup(e){const t=ref(window.innerWidth),r=ref(window.innerHeight),n=()=>{t.value=window.innerWidth,r.value=window.innerHeight};return onMounted(()=>{window.addEventListener("resize",n)}),onBeforeUnmount(()=>{window.removeEventListener("resize",n)}),(a,m)=>(openBlock(),createElementBlock(Fragment,null,[!e.loading&&e.url.length?(openBlock(),createBlock(_sfc_main$3,{key:0,url:e.url},null,8,["url"])):createCommentVNode("",!0),e.url.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$1,"No media found"))],64))}}),_sfc_main$1=defineComponent({__name:"FloatingWindow",props:["setIsOpen","loading","isBlackTheme","url","top","right","type","typeOfContent","width","height"],setup(e){const t=e,r=ref(null),n=ref(null),a=ref(null),m=ref(null);return onMounted(()=>{if(t.typeOfContent==="video"&&!t.width&&!t.height){const v=document.createElement("video");v.src=t.url,v.addEventListener("loadedmetadata",()=>{a.value=v.videoWidth,m.value=v.videoHeight+100})}else if(t.typeOfContent==="image"&&!t.width&&!t.height){const v=new Image;v.src=t.url,v.addEventListener("load",()=>{r.value=v.naturalWidth,n.value=v.naturalHeight})}}),(v,_)=>(openBlock(),createElementBlock("div",null,[e.typeOfContent.includes("video")&&m.value&&a.value||e.typeOfContent.includes("video")&&e.width&&e.height?(openBlock(),createBlock(VideoComponent,{key:0,"set-is-open":e.setIsOpen,"is-black-theme":e.isBlackTheme,url:e.url,top:e.top,right:e.right,type:e.type,width:e.width,height:e.height,"video-width":a.value,"video-height":m.value},null,8,["set-is-open","is-black-theme","url","top","right","type","width","height","video-width","video-height"])):e.typeOfContent.includes("image")?(openBlock(),createBlock(_sfc_main$7,{key:1,"set-is-open":e.setIsOpen,loading:e.loading,url:e.url,top:e.top,right:e.right,width:e.width,height:e.height,"img-width":r.value,"img-height":n.value},null,8,["set-is-open","loading","url","top","right","width","height","img-width","img-height"])):e.typeOfContent.includes("pdf")?(openBlock(),createBlock(_sfc_main$2,{key:2,url:e.url,loading:e.loading},null,8,["url","loading"])):createCommentVNode("",!0)]))}}),App_vue_vue_type_style_index_0_scoped_2c86ca36_lang="",_hoisted_1={class:"full-screen"},_hoisted_2={key:0,class:"content"},_hoisted_3={key:1},_sfc_main={__name:"App",props:{msg:{type:String,default:""}},setup(e){const t=ref(!1),r=ref(!0),n=ref("image"),a=null,m=null,v=ref("image/png"),_=ref("");return onMounted(async()=>{await dl.init(),dl.on("ready",async()=>{const u=(await dl.items.get()).metadata.system.modalities.find(c=>c.type==="preview");if(u){if(u.refType==="url")_.value=u.ref;else{const c=await dl.items.stream(u.stream);_.value=c}v.value=u.mimetype?u.mimetype:v.value,n.value=v.value}r.value=!1})}),(w,u)=>(openBlock(),createElementBlock("div",_hoisted_1,[r.value?(openBlock(),createElementBlock("div",_hoisted_2,"Content is loading...")):(openBlock(),createElementBlock("div",_hoisted_3,[createVNode(_sfc_main$1,{loading:r.value,"type-of-content":n.value,"set-is-open":c=>t.value=c,width:a,height:m,url:_.value,type:v.value},null,8,["loading","type-of-content","set-is-open","url","type"])]))]))}},App=_export_sfc(_sfc_main,[["__scopeId","data-v-2c86ca36"]]);createApp(App).mount("#app");
